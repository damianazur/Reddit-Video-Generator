(window.webpackJsonp=window.webpackJsonp||[]).push([["Chat~RedesignChat"],{"./src/chat/actions/apiRequestHeaders.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return s});var a=n("./src/lib/makeActionCreator/index.ts");const s="API_REQUEST_HEADERS__set";Object(a.a)(s)},"./src/chat/actions/channel.ts":function(e,t,n){"use strict";n.d(t,"f",function(){return D}),n.d(t,"d",function(){return A}),n.d(t,"e",function(){return L}),n.d(t,"p",function(){return U}),n.d(t,"o",function(){return B}),n.d(t,"q",function(){return R}),n.d(t,"g",function(){return P}),n.d(t,"c",function(){return H}),n.d(t,"w",function(){return F}),n.d(t,"x",function(){return K}),n.d(t,"y",function(){return G}),n.d(t,"u",function(){return z}),n.d(t,"j",function(){return W}),n.d(t,"k",function(){return V}),n.d(t,"h",function(){return q}),n.d(t,"i",function(){return J}),n.d(t,"a",function(){return Z}),n.d(t,"b",function(){return Q}),n.d(t,"t",function(){return Y}),n.d(t,"r",function(){return X}),n.d(t,"m",function(){return $}),n.d(t,"v",function(){return ee}),n.d(t,"n",function(){return te}),n.d(t,"l",function(){return ne}),n.d(t,"s",function(){return ae}),n.d(t,"M",function(){return se}),n.d(t,"L",function(){return re}),n.d(t,"z",function(){return ie}),n.d(t,"D",function(){return le}),n.d(t,"T",function(){return he}),n.d(t,"S",function(){return pe}),n.d(t,"R",function(){return je}),n.d(t,"O",function(){return _e}),n.d(t,"K",function(){return Ie}),n.d(t,"C",function(){return Ne}),n.d(t,"B",function(){return we}),n.d(t,"I",function(){return ke}),n.d(t,"P",function(){return Ae}),n.d(t,"F",function(){return Ke}),n.d(t,"G",function(){return ze}),n.d(t,"H",function(){return We}),n.d(t,"E",function(){return qe}),n.d(t,"A",function(){return Je}),n.d(t,"N",function(){return Ze}),n.d(t,"J",function(){return Qe}),n.d(t,"Q",function(){return $e});var a=n("./node_modules/lodash/isEqual.js"),s=n.n(a),c=n("./node_modules/react-router-redux/es/index.js"),r=n("./src/lib/makeActionCreator/index.ts"),o=n("./src/chat/actions/channel/subreddit.ts"),i=n("./src/chat/actions/members.ts"),l=n("./src/chat/actions/message/index.ts"),d=n("./src/chat/actions/message/unreadCount.ts"),u=n("./src/chat/actions/tracking.ts"),h=n("./src/chat/actions/user.ts"),m=n("./src/chat/actions/sidebar.ts"),b=n("./src/chat/constants/batchSizes.ts"),p=n("./src/chat/constants/channels.ts"),g=n("./src/chat/constants/sendbird.ts"),O=n("./src/chat/endpoints/sendbird/index.ts"),j=n("./src/chat/helpers/errors.ts"),f=n("./src/chat/helpers/urls/index.ts"),C=n("./src/chat/models/Channel/index.ts"),E=n("./src/chat/models/Channel/platform.ts"),_=n("./src/chat/models/Channel/utils/index.ts"),I=n("./src/chat/models/Message/index.ts"),v=n("./src/chat/models/Subreddit/index.ts"),y=n("./src/chat/selectors/channels.ts"),x=n("./src/chat/selectors/channels/next.tsx"),S=n("./src/chat/selectors/experiments.ts"),N=n("./src/chat/selectors/platform.ts"),w=n("./src/chat/selectors/promos.ts"),k=n("./src/chat/selectors/sidebar.ts"),T=n("./src/chat/selectors/subreddit.ts"),M=n("./src/chat/singleton/SendbirdSDK.ts");const D="CHANNEL__ADD_SUCCESS",A="CHANNEL__ADD_FAIL",L="CHANNEL__CREATE_CHANNEL_START",U="CHANNEL__SELECT_BEGIN",B="CHANNEL__RESET_UNREAD_COUNT",R="CHANNEL__SELECT_END",P="CHANNEL__EXPAND_INVITE_LIST",H="CHANNEL__COLLAPSE_INVITE_LIST",F="CHANNEL__UPDATE_MODEL",K="CHANNEL__INVITED_UPDATE",G="CHANNEL__JOINED_UPDATE",z="CHANNEL__SET_UPDATED_CHANNEL_ON_TOP",W="CHANNEL__FETCHING_JOINED_CHANNELS",V="CHANNEL__FETCHING_JOINED_CHANNELS_FAILED",q="CHANNEL__FETCHING_INVITED_CHANNELS",J="CHANNEL__FETCHING_INVITED_CHANNELS_FAILED",Z="CHANNEL__ADD_EXISTING_INVITED_CHANNELS",Q="CHANNEL__ADD_EXISTING_JOINED_CHANNELS",Y="CHANNEL__SET_INVITED_CHANNEL_TO_JOINED",X="CHANNEL__SET_EXISTING_CHANNELS_END",$="CHANNEL__REMOVE_CHANNEL",ee="CHANNEL__UNSORT_CHANNEL",te="CHANNEL__RESET_CHANNEL_MESSAGE_LIST",ne="CHANNEL__FETCH_FIRST_MESSAGE",ae="CHANNEL__SET_FIRST_MESSAGE_ID",se=Object(r.a)($),ce=Object(r.a)(ee),re=(e,t)=>async(n,a)=>{const s=a();n(Object(y.K)(s,e)?ce({channelId:e,subredditName:t}):se({channelId:e,subredditName:t}))},oe=Object(r.a)(Y),ie=e=>async(t,n)=>{const a=n(),s=a.channels.selected,r=a.contacts.models,o=e||s.channelId;if(!o)throw new j.a("accepted channelId",e);const i=Object(y.k)(a),d=i&&i.firstMessageId,u=!!(i&&d&&i.hasMoreMessages),h=Object(y.b)(a,r),m=Object(w.a)(a);h&&m?t(Object(c.b)(Object(f.channelAction)(o,p.a.VIEW_NSFW_CONFIRMATION))):await M.b.acceptChannelInvite().then(()=>u&&t(Object(l.p)(d))).then(()=>t(oe({channelId:o}))).then(()=>t(Object(c.b)(Object(f.channelUrl)(o))))},le=e=>async(t,n)=>{const a=n(),s=Object(y.A)(a,"channelState"),c=Object(y.A)(a,"channelId"),r=a.channels.models[c];if(!c)throw new j.a("declinedChannelId",c);if(!s)throw new j.a("declinedChannelType",s);try{await M.b.declineChannelInvite()}catch(o){return Object(j.b)(`Error declining channel: ${o.message}`)}t(Ie(c)),t(((e,t)=>async n=>n(re(e,t)))(c,e)),t(Te(r.channelState))},de=Object(r.a)(K),ue=Object(r.a)(G),he=Object(r.a)(F),me=e=>async t=>{if(e.type===C.a.Subreddit){const n=Object(v.c)([e]);await t(Object(o.o)(n)),t(Object(o.w)({channel:e}))}else await t(de({channel:e})),t((e=>async(t,n)=>{const a=n().user.account.id,s=e.members.filter(e=>e.id!==a).map(e=>e.id);t(Object(h.v)(s))})(e))},be=e=>async(t,n)=>{const a=n(),s=e.channelId,c=(e=>{if(e.type===C.a.Subreddit){const t=e.customData.subreddit;return t&&t.name}})(e),r=Object(y.w)(a);r&&r.channelId===e.channelId&&(await t(se({channelId:s,subredditName:c})),await t(he({channel:e})),t(Te(r.channelState)))},pe=(e,t)=>async(n,a)=>{if(e){const c=a(),r=Object(y.h)(c,e.channelId);if(e.channelState!==p.b.INVITED&&!r||t)return;if(e=ge(c,e),s()(e,r))return;switch(e.channelState){case p.b.INVITED:await n(me(e));break;case p.b.UNSORTED:await n(be(e));break;case p.b.JOINED:await n(ue({channel:e}));break;default:Object(j.b)("Error updating channel. ChannelState not found.")}n(Object(d.b)())}},ge=(e,t)=>{const n=Object(N.d)(e),a=Object(y.h)(e,t.channelId),s=n===t.channelId,c=t.type===C.a.Subreddit;return s&&(t.unreadMessageCount=0),!s&&c&&(t.unreadMessageCount=t.unreadMessageCount?1:0),a&&c&&(t.lastMessage=a.lastMessage,t.isMessageListLoaded=a.isMessageListLoaded,t.hasMoreMessages=a.hasMoreMessages),t},Oe=Object(r.a)(z),je=e=>async(t,n)=>{const a=e.channelId;e.type!==C.a.Subreddit&&t(Oe({channelId:a}))},fe=Object(r.a)(B),Ce=Object(r.a)(U),Ee=Object(r.a)(R),_e=()=>async(e,t)=>{const n=t(),a=Object(N.d)(n),s=Object(N.c)(n),r=p.a.DENY,o=p.a.VIEW_JOIN;if(!n.platform.currentPage)return;const d=n.sidebarTabs.activeIndex;a&&e(Object(m.e)({channelId:a,tabIndex:d}));const u=a&&Object(y.h)(n,a),h=u&&Object(T.b)(n,u.channelId),b=h&&h.name||void 0;if(!u&&s===r)return;const O=!(!u||u.channelState!==p.b.UNSORTED),j=!(!a||!Object(y.L)(n,a));if((j||O)&&u&&!s)return void e(Object(c.b)(Object(f.channelAction)(u.channelId,o,b)));const C=!(!u||u.channelState!==p.b.JOINED);if(u&&C&&s&&p.g.includes(s))e(Object(c.b)(Object(f.channelUrl)(u.channelId,b)));else if(u&&a){e(Ce({channelId:a}));const t=j||O,n=await M.b.enterChannel(u,!1,t);if(n&&!n.error){const t=n.data.messageListData;await e(Object(l.m)(t)),await e(Ee()),e(Ie(a)),e(Object(i.f)())}else e(Object(l.y)()),e(Ee())}else{const t=n.sendbird.sdk.connectionStatus===g.b.Open;if(!u&&a&&t){const t=await M.b.addChannelModelByChannelId(a);if(t&&!s)return void e(Object(c.b)(Object(f.channelAction)(t.channelId,o,b)))}e(Ae()),e(Object(l.y)())}},Ie=(Object(r.a)("MESSAGE__MARK_AS_READ"),e=>async(t,n)=>{const a=n(),s=e||Object(N.d)(a);s&&(await t(fe(s)),await M.b.markChannelAsRead(),t(Object(d.b)()))}),ve=Object(r.a)(L),ye=Object(r.a)(D),xe=Object(r.a)(A),Se=(e,t,n)=>{const a=e.map(e=>({user_id:e,nickname:t[e].name}));if(n){const e=n.id,t=n.name;-1===a.findIndex(t=>t.user_id===e)&&a.unshift({user_id:e,nickname:t})}return a},Ne=(e,t,n)=>async(a,s,{apiContext:r})=>{const o=s();var i=o.user;const l=i.account,d=i.session,h=o.contacts.models;var m=o.channels;const b=m.joined,g=m.invited;if(l&&d){a(ve());const s=Se(e,h,l);if(s.length<2)return;const o=await Object(O.c)(r(),d,s,t);if(o.ok){const t=o.body,s=Object(E.a)(t,p.b.JOINED),r=s.channelId;g.sortedKeys.includes(r)?(a(ie(r)),a(Object(u.h)(e,r))):b.sortedKeys.includes(r)?n&&(a(Object(c.b)(Object(f.channelUrl)(r))),a(Object(u.h)(e,r))):(await a(ye({[r]:s})),a(Object(u.h)(e,r)),n&&a(Object(c.b)(Object(f.channelUrl)(r))))}else a(xe()),a(Object(u.x)(e))}},we=(e,t)=>async(n,a)=>{e.length>1&&(e=[e[0]]),await n(Object(h.v)(e)),n(Ne(e,t,!0))},ke=e=>async(t,n,{apiContext:a})=>{const s=n();var r=s.user;const o=r.account,i=r.session,l=s.contacts.models,d=Object(y.A)(s,"channelSendbirdUrl");if(o&&i){const n=Se(e,l);(await Object(O.k)(a(),i,n,d)).body?(t(Object(u.b)()),t(Object(c.a)())):Object(j.b)("Error inviting user to existing channel")}},Te=e=>async(t,n)=>{const a=n(),s=Object(k.b)(a),c=e===p.b.INVITED,r=Object(x.d)(a),o=Object(x.f)(a),i=Object(x.g)(a),l=Object(x.c)(a),d=Object(x.e)(a);s&&c&&Object(S.b)(a)?r.channelId?t(De(r)):t(De(o)):s&&!c&&Object(S.b)(a)?o.channelId?t(De(o)):t(De(i)):s||!c?s||c?t(Me()):d.channelId?t(De(d)):t(Me()):l.channelId?t(De(l)):t(De(d))},Me=()=>async(e,t)=>{const n=t();if(n.channels.firstLoaded){const t=!!n.platform.currentPage,a=Object(x.b)(n,t);e(De(a))}},De=e=>async(t,n)=>{e&&e.channelId?e.channelAction?t(Object(c.c)(Object(f.channelAction)(e.channelId,e.channelAction,e.subredditName))):t(Object(c.c)(Object(f.channelUrl)(e.channelId,e.subredditName))):t(Object(c.c)(f.rootUrl))},Ae=e=>async(t,n)=>{const a=n().platform.currentPage;if(a&&a.urlParams.userIds){const e=a.urlParams.userIds.split(",");return t(we(e,name))}return t(e?Te(e):Me())},Le=Object(r.a)(q),Ue=Object(r.a)(J),Be=Object(r.a)(W),Re=Object(r.a)(V),Pe=Object(r.a)(Z),He=Object(r.a)(Q),Fe=Object(r.a)(X),Ke=()=>async(e,t)=>{await Promise.all([e(Ve()),e(Object(o.r)()),e(Object(o.q)()),e(Object(o.p)()),e(ze()),e(We())]);const n=t().channels.models;await e(Ge(n)),e(Fe()),e(_e())},Ge=e=>async t=>{const n=Object(_.c)(e,[C.a.Direct,C.a.Group,C.a.Subreddit]);if(!n)return;const a={};for(const e in n){const t=n[e];t.channelState!==p.b.PARTIAL&&(a[t.channelId]=t)}if(a){const e=[];for(const t in a)a[t].members.map(t=>e.push(t.id));t(Object(h.v)(e))}},ze=()=>async(e,t)=>{e(Le());const n=await M.b.getExistingChannels(p.b.INVITED,p.f.NonSuper).catch(()=>null);if(n){const t=n.hasMoreChannels,a=Object(C.e)(n.channels);return e(Ge(a)),void e(Pe({channels:a,hasMoreChannels:t}))}e(Ue()),Object(j.b)("Error fetching invited channels")},We=()=>async(e,t)=>{e(Be());const n=await M.b.getExistingChannels(p.b.JOINED,p.f.NonSuper).catch(t=>{Object(j.b)(t),e(Re())});if(n){const a=n.hasMoreChannels,s=Object(C.e)(n.channels),c=Object(y.r)(t());return e(He({channels:s,hasMoreChannels:a})),void(a&&c<b.a.InitChannels&&e(We()))}e(Re())},Ve=()=>async(e,t)=>{const n=t(),a=Object(N.d)(n);a&&await M.b.addChannelModelByChannelId(a)},qe=Object(r.a)(P),Je=Object(r.a)(H),Ze=(Object(r.a)("CHANNEL__MESSAGES_LOADED"),Object(r.a)(te)),Qe=(e,t)=>async(n,a)=>{const s=a(),c=Object(y.A)(s,"channelState");M.b.leaveChannel().then(()=>n(re(e,t))).then(()=>n(Te(c))).catch(e=>Object(j.b)(`Error leaving channels: ${e.message}`))},Ye=Object(r.a)(ne),Xe=Object(r.a)(ae),$e=e=>async(t,n)=>{const a=n(),s=Object(y.k)(a);t(Ye({channelId:e})),M.b.getFirstMessage().then(e=>{const n=e[0];if(n){if(s&&s.hasMoreMessages){const e=Object(I.b)(n);t(Object(l.s)({[n.messageId]:e}))}return n.messageId}}).then(n=>n&&t(Xe({channelId:e,firstMessageId:n}))).catch(e=>Object(j.b)(`Error setting of first message: ${e.message}`))}},"./src/chat/actions/channel/dropdown.ts":function(e,t,n){"use strict";n.d(t,"b",function(){return O}),n.d(t,"c",function(){return j}),n.d(t,"d",function(){return f}),n.d(t,"g",function(){return C}),n.d(t,"j",function(){return E}),n.d(t,"i",function(){return _}),n.d(t,"a",function(){return I}),n.d(t,"h",function(){return y}),n.d(t,"e",function(){return x}),n.d(t,"f",function(){return S});var a=n("./node_modules/react-router-redux/es/index.js"),s=n("./src/lib/makeActionCreator/index.ts"),c=n("./src/chat/actions/tooltip.ts"),r=n("./src/chat/actions/tracking.ts"),o=n("./src/chat/constants/channels.ts"),i=n("./src/chat/helpers/errors.ts"),l=n("./src/chat/helpers/urls/index.ts"),d=n("./src/chat/selectors/channels.ts"),u=n("./src/chat/selectors/subreddit.ts"),h=n("./src/chat/singleton/SendbirdSDK.ts");const m=o.a.INVITE_MEMBERS,b=o.a.LEAVE,p=o.a.LOCK_CHANNEL_CONFIRMATION,g=o.a.VIEW_MEMBERS,O=()=>async(e,t)=>{const n=t();const s=Object(d.w)(n).channelId,c=Object(u.b)(n),r=c&&c.name;e(Object(a.b)(Object(l.channelAction)(s,m,r)))},j=()=>async(e,t)=>{const n=t();const s=Object(d.w)(n).channelId,c=Object(u.b)(n),r=c&&c.name;e(Object(a.b)(Object(l.channelAction)(s,b,r)))},f=()=>async(e,t)=>{const n=t();const s=Object(d.w)(n).channelId,c=Object(u.b)(n),r=c&&c.name;e(Object(a.b)(Object(l.channelAction)(s,p,r)))},C=e=>async(t,n)=>{t(Object(c.c)({tooltipId:e})),t(Object(r.A)())},E=e=>async(t,n)=>{e&&(t(Object(r.m)()),t(Object(r.p)()).then(()=>{window.open(Object(l.viewProfileUrl)(e))}))},_=()=>async(e,t)=>{const n=t();const s=Object(d.w)(n).channelId,c=Object(u.b)(n),r=c&&c.name;e(Object(a.b)(Object(l.channelAction)(s,g,r)))},I="CHANNEL__UPDATE_CHANNEL_NAME",v=Object(s.a)(I),y=e=>async(t,n)=>{const a=Object(d.w)(n());if(a){const n=Object.assign({},a,{name:e}),s=Object.assign({},a);t(v(n)),await h.b.updateChannel(n).catch(e=>{Object(i.b)(e),t(v(s))})}},x=()=>async(e,t)=>{h.b.setMyCountPreference(o.c.Off)},S=()=>async(e,t)=>{h.b.setMyCountPreference(o.c.All)}},"./src/chat/actions/channel/subreddit.ts":function(e,t,n){"use strict";n.d(t,"d",function(){return E}),n.d(t,"o",function(){return _}),n.d(t,"l",function(){return I}),n.d(t,"g",function(){return v}),n.d(t,"r",function(){return N}),n.d(t,"k",function(){return w}),n.d(t,"j",function(){return k}),n.d(t,"f",function(){return T}),n.d(t,"q",function(){return L}),n.d(t,"i",function(){return U}),n.d(t,"h",function(){return B}),n.d(t,"e",function(){return R}),n.d(t,"p",function(){return K}),n.d(t,"m",function(){return G}),n.d(t,"w",function(){return z}),n.d(t,"b",function(){return W}),n.d(t,"t",function(){return q}),n.d(t,"n",function(){return J}),n.d(t,"u",function(){return Q}),n.d(t,"c",function(){return Y}),n.d(t,"a",function(){return $}),n.d(t,"s",function(){return ne}),n.d(t,"v",function(){return ae});var a=n("./node_modules/react-router-redux/es/index.js"),s=n("./src/lib/makeActionCreator/index.ts"),c=n("./src/chat/actions/channel.ts"),r=n("./src/chat/actions/message/index.ts"),o=n("./src/chat/actions/user.ts"),i=n("./src/chat/constants/channels.ts"),l=n("./src/chat/endpoints/sendbird/index.ts"),d=n("./src/chat/helpers/errors.ts"),u=n("./src/chat/helpers/urls/index.ts"),h=n("./src/chat/models/Channel/index.ts"),m=n("./src/chat/models/Channel/subreddit.ts"),b=n("./src/chat/models/Subreddit/index.ts"),p=n("./src/chat/selectors/channels.ts"),g=n("./src/chat/selectors/subreddit.ts"),O=n("./src/chat/selectors/user.ts"),j=n("./src/chat/singleton/SendbirdSDK.ts"),f=n("./src/chat/tracking/events/chatPreview.ts"),C=n("./src/chat/tracking/events/chatSettings.ts");const E="SUBREDDIT__ADD_SUBREDDIT_COLLECTION",_=Object(s.a)(E),I="SUBREDDIT_CHANNELS__FETCH_RECOMMENDED",v="SUBREDDIT_CHANNELS__ADD_RECOMMENDED_COLLECTION",y=Object(s.a)("SUBREDDIT_CHANNELS__FETCH_RECOMMENDED_FAILED"),x=Object(s.a)(I),S=Object(s.a)(v),N=()=>async(e,t,{apiContext:n})=>{var a=t(),s=a.user;const c=s.account,r=s.session,o=a.channels.subreddit.recommended.fetchingChannels;if(!c||!r||o)return;e(x());const i=await Object(l.f)(n(),r),d=i.ok&&i.body;if(d&&d.length){const t=Object(b.a)(d);await e(_(t));const n=Object(m.a)(d);e(S(n))}else e(y(i.error))},w="SUBREDDIT_CHANNELS__FETCH_JOINED_FAILED",k="SUBREDDIT_CHANNELS__FETCH_JOINED",T="SUBREDDIT_CHANNELS__ADD_JOINED_COLLECTION",M=Object(s.a)(w),D=Object(s.a)(k),A=Object(s.a)(T),L=()=>async(e,t)=>{const n=t(),a=i.b.JOINED;if(!Object(O.f)(n))return;e(D());const s=await j.b.getExistingChannels(a,i.f.Super).catch(()=>null);if(s){const n=s.channels,c=Object(b.c)(n);await e(_(c));const r=t(),o=Object(m.c)(n,a),i=Object(p.t)(r,o);return await e(A(Object.assign({},o,{sortedKeys:i}))),void(s.hasMoreChannels&&e(L()))}e(M())},U="SUBREDDIT_CHANNELS__FETCH_INVITED_FAILED",B="SUBREDDIT_CHANNELS__FETCH_INVITED",R="SUBREDDIT_CHANNELS__ADD_INVITED_COLLECTION",P=Object(s.a)(U),H=Object(s.a)(B),F=Object(s.a)(R),K=()=>async(e,t)=>{var n=t(),a=n.user;const s=a.account,c=a.session,r=n.channels.subreddit.invited.fetchingChannels;if(!s||!c||r)return;e(H());const o=await j.b.getExistingChannels(i.b.INVITED,i.f.Super).catch(()=>null);if(o){const t=Object(b.c)(o.channels),n=Object(m.c)(o.channels,i.b.INVITED);return await e(_(t)),void e(F(n))}e(P())},G="SUBREDDIT_CHANNELS__UPDATE_INVITED",z=Object(s.a)(G),W="SET__INVITED_SUBREDDIT_CHANNEL_TO_JOINED",V=Object(s.a)(W),q=(e,t)=>async(n,s)=>{const c=s(),o=c.channels,l=e||o.selected.channelId;if(!l)throw new d.a("joinedChannelId",l);const m=Object(p.h)(c,l);if(m&&m.type===h.a.Subreddit){Object(f.a)(c);const e=Object(p.t)(c,void 0,[m]);const s=(await j.b.enterChannel(m,!0)).data,o=s.messageListData;o?(n(Object(r.m)(o)),n(V({channelId:l,sortedKeys:e})),n(Z(l)),n(Object(a.b)(Object(u.channelUrl)(l,t)))):s===j.a.KICKED||s===j.a.BANNED?n(te(s,t)):n(Object(a.b)(Object(u.channelAction)(l,i.a.VIEW_PRIVATE,t)))}},J=(e,t)=>async(n,s,{apiContext:c})=>{const r=s(),o=r.channels,h=e||o.selected.channelId,m=Object(O.c)(r);if(!h)throw new d.a("requestChannelId",h);const b=Object(p.h)(r,h),g=Object(p.t)(r,void 0,[b]);if(b&&m){(await Object(l.a)(c(),m,b.channelSendbirdUrl)).error?n(Object(a.b)(Object(u.channelAction)(h,i.a.VIEW_PRIVATE,t))):(n(V({channelId:h,sortedKeys:g})),n(Z(h)),n(Object(a.b)(Object(u.channelUrl)(h,t))))}},Z=e=>async(t,n)=>{const a=n(),s=Object(p.h)(a,e);if(s){const e=[];s.members.map(t=>e.push(t.id)),t(Object(o.v)(e))}},Q=(e,t)=>async(n,a,{apiContext:s})=>{var c=a().user;const r=c.account,o=c.session;if(r&&o)return new Promise(async n=>{await Object(l.l)(s(),o,e,t).then(e=>{n(e)}).catch(e=>{n(e)})})},Y="SUBREDDIT_CHANNEL__SET_KICKED_CHANNEL",X=Object(s.a)(Y),$="SUBREDDIT_CHANNEL__SET_BANNED_CHANNEL",ee=Object(s.a)($),te=(e,t)=>async(n,s)=>{const c=s(),r=Object(p.k)(c),o=r&&r.channelId;o&&(e===j.a.KICKED?n(X({channelId:o})):e===j.a.BANNED&&n(ee({channelId:o})),n(Object(a.b)(Object(u.channelAction)(o,i.a.DENY,t))))},ne=(e,t)=>async(n,s)=>{const r=s(),o=e.channelId,l=Object(p.x)(r),d=Object(g.b)(r,o),h=Object(O.a)(r);d&&t===h&&(n(Object(c.L)(o,d.name)),o===l&&n(Object(a.b)(Object(u.channelAction)(o,i.a.DENY,d.name))))},ae=(e,t)=>async(n,a)=>{await e?j.b.lockChannel():j.b.unlockChannel(),Object(C.e)(a(),e,t)}},"./src/chat/actions/container.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"SIZE_CHANGED",function(){return c}),n.d(t,"sizeChanged",function(){return r}),n.d(t,"popoutOpened",function(){return o});var a=n("./src/chat/constants/container.ts"),s=n("./src/lib/makeActionCreator/index.ts");const c="CONTAINER__SIZE_CHANGED",r=Object(s.a)(c),o=()=>async(e,t,{apiContext:n})=>{const s=t().platform.currentPage;if(!s)throw new Error("Could not open pop-out: current page not defined");window.open(s.url,"_blank","width=1024, height=768"),e(r(a.a.MINIMIZED))}},"./src/chat/actions/members.ts":function(e,t,n){"use strict";n.d(t,"b",function(){return d}),n.d(t,"e",function(){return m}),n.d(t,"c",function(){return b}),n.d(t,"a",function(){return g}),n.d(t,"d",function(){return f}),n.d(t,"f",function(){return E});var a=n("./src/lib/makeActionCreator/index.ts"),s=n("./src/chat/endpoints/users/index.ts"),c=n("./src/chat/helpers/errors.ts"),r=n("./src/chat/models/User/index.ts"),o=n("./src/chat/selectors/channels.ts"),i=n("./src/chat/selectors/members.ts"),l=n("./src/chat/singleton/SendbirdSDK.ts");const d="MEMBERS__FETCHING_MEMBERS",u=Object(a.a)(d),h=Object(a.a)("MEMBERS__FETCHING_MEMBERS_FAILED"),m=e=>async(t,n)=>{const a=n(),s=Object(o.x)(a);if(s){t(u({channelId:s}));const n=e?await l.b.getChannelMembersStartsWith(e).catch(e=>Object(c.b)(`Error getting channel members: ${e.message}`)):await l.b.getSubredditChannelMembers().catch(e=>Object(c.b)(`Error getting subreddit channel members: ${e.message}`));if(n){const e=n.hasMoreMembers,a=n.members.map(e=>e.userId);t(j(s,a,e))}else t(h())}},b="MEMBERS__FETCHING_MEMBERS_COMPLETED",p=Object(a.a)(b),g="MEMBERS__ADD_CHANNEL_MEMBERS",O=Object(a.a)(g),j=(e,t,n)=>async(a,c,{apiContext:o})=>{const l=await Object(s.d)(o(),t);if(l.ok){const n=c(),s=Object(r.a)(l.body),o=t.reduce((e,t)=>{const a=s[t];return a&&(e[t]=Object(i.e)(a,n.contacts.models)),e},{});a(O({channelId:e,members:o}))}a(p({channelId:e,hasMoreMembers:n}))},f="MEMBERS__REMOVE_CHANNEL_MEMBERS",C=Object(a.a)(f),E=()=>async e=>{e(C())}},"./src/chat/actions/message/inboxScroller.ts":function(e,t,n){"use strict";n.d(t,"c",function(){return l}),n.d(t,"a",function(){return d}),n.d(t,"b",function(){return h});var a=n("./node_modules/lodash/sortBy.js"),s=n.n(a),c=n("./src/lib/makeActionCreator/index.ts"),r=n("./src/chat/constants/batchSizes.ts"),o=n("./src/chat/selectors/channels.ts"),i=n("./src/chat/singleton/SendbirdSDK.ts");const l=e=>async(t,n)=>{const a=Object(o.x)(n()),c=(e=>{return s()(e,"createAt").splice(0,e.length-r.a.Messages).map(e=>e.messageId)})(e);a&&(t(u({messageIdList:c})),t(m({channelId:a})),i.c.resetChannelMessageListQuery())},d="MESSAGE__REMOVE_MESSAGES_FROM_CURRENT_CHANNEL",u=Object(c.a)(d),h="CHANNEL__RESET_HAS_MORE_MESSAGES",m=Object(c.a)(h)},"./src/chat/actions/message/index.ts":function(e,t,n){"use strict";var a=n("./node_modules/lodash/flatten.js"),s=n.n(a),c=n("./node_modules/react-router-redux/es/index.js"),r=n("./src/lib/linkMatchers/index.ts"),o=n("./src/lib/makeActionCreator/index.ts"),i=n("./src/chat/actions/channel.ts"),l=n("./src/chat/actions/tracking.ts"),d=n("./src/chat/constants/messages.ts"),u=n("./node_modules/lodash/isEmpty.js"),h=n.n(u),m=n("./src/config.ts"),b=n("./src/lib/constants/index.ts"),p=n("./src/lib/makeRequest/index.ts");const g=m.a.embedlyApiKey,O=e=>e.filter(e=>!h()(e)).map(e=>({name:e.provider_name,title:e.title,description:e.description,faviconUrl:e.favicon_url,imageUrl:(e=>e&&e.length>0&&e[0]?e[0].url:void 0)(e.images),url:e.url}));var j=n("./src/chat/endpoints/sendbird/index.ts"),f=n("./src/chat/helpers/errors.ts"),C=n("./src/chat/helpers/linkParser/index.ts"),E=n("./src/chat/models/Message/index.ts"),_=n("./src/chat/models/Message/adapter.ts"),I=n("./src/chat/selectors/app.ts"),v=n("./src/chat/selectors/channels.ts"),y=n("./src/chat/selectors/contacts.ts"),x=n("./src/chat/selectors/messages.ts"),S=n("./src/chat/singleton/SendbirdSDK.ts");n.d(t,"a",function(){return N}),n.d(t,"c",function(){return M}),n.d(t,"n",function(){return A}),n.d(t,"v",function(){return L}),n.d(t,"l",function(){return U}),n.d(t,"j",function(){return R}),n.d(t,"u",function(){return P}),n.d(t,"h",function(){return F}),n.d(t,"s",function(){return K}),n.d(t,"r",function(){return G}),n.d(t,"b",function(){return z}),n.d(t,"m",function(){return V}),n.d(t,"k",function(){return q}),n.d(t,"y",function(){return J}),n.d(t,"d",function(){return Z}),n.d(t,"p",function(){return Q}),n.d(t,"o",function(){return Y}),n.d(t,"i",function(){return X}),n.d(t,"t",function(){return ee}),n.d(t,"g",function(){return te}),n.d(t,"e",function(){return ne}),n.d(t,"f",function(){return ae}),n.d(t,"q",function(){return oe}),n.d(t,"x",function(){return ie}),n.d(t,"w",function(){return le});const N="MESSAGE__ADD_ONE",w=Object(o.a)(N),k=(e,t,n)=>async(a,s)=>{const c=s(),r=Object(_.b)(n),o=await T(t,c,a);S.b.addMessage(t,n,o).then(t=>{a(w({message:{[t.messageId]:t},channelId:e,clientMessageId:r})),a(Object(l.v)(t.messageId))}).catch(()=>{r&&(a(Object(l.z)(r)),a(B({clientMessageId:r,toggle:!0})))})},T=async(e,t,n)=>{const a=Object(r.b)(e);if(!a.length)return[];const c=[];return[...a.map(e=>{const n=Object(y.g)(t,e);return n||c.push(e),n&&n.id}).filter(e=>e),...(c.length&&s()(await Promise.all(c.slice(0,3).map(e=>S.b.searchMemberByName(e,!0))))||[]).map(e=>e&&e.id).filter(e=>e)]},M="MESSAGE__ADD_PENDING_ONE",D=Object(o.a)(M),A=(e,t,n)=>async(a,s)=>{const c=s();if(Object(C.b)(t)&&1===t.split(" ").length)return void H(a,c,e,t);const r=Object(E.a)(c,e,t,n),o=n===d.b.TEXT?t:"";a(D(r)),a(k(e,o,r.data))},L=(e,t)=>async(n,a)=>{const s=a(),c=Object(x.h)(s,t);c&&(n(B({clientMessageId:t,toggle:!1})),n(k(e,c.messageData.value,c.data)))},U="MESSAGE__TOGGLE_PENDING_MESSAGE_ERROR",B=Object(o.a)(U),R="MESSAGE__REMOVE_PENDING_ONE",P=Object(o.a)(R),H=async(e,t,n,a)=>{const s=r.c.match(a).map(e=>e.url).join(""),c=d.b.EMBED;let o={url:a};const i=Object(E.a)(t,n,JSON.stringify(o),c);if(i){e(D(i));const t=await(async({chars:e,scheme:t,url:n})=>Object(p.b)({endpoint:"https://api.embed.ly/1/extract",method:b.cb.GET,data:{key:g,url:n,scheme:t,chars:e}}).then(e=>e.ok&&Array.isArray(e.body)?e.body:[e.body]).then(O))({url:s,scheme:"https",chars:140});if(t){o=Object.assign({},o,{embed:t[0]});const a=JSON.stringify(o),s=JSON.stringify(Object(_.a)(a,c,i.clientMessageId));e(k(n,o.url,s))}}},F="MESSAGE__RECEIVE_ADD_ONE",K=Object(o.a)(F),G=e=>async(t,n,{apiContext:a})=>{const s=n(),c=Object(v.x)(s)===e.channelId;Object(I.c)(s)&&c&&t(Object(i.K)(e.channelId)),t(K({[e.messageId]:e}))},z="MESSAGE__ADD_LIST",W=Object(o.a)(z),V=e=>async(t,n,{apiContext:a})=>{const s=Object(v.A)(n(),"channelId");t(W(Object.assign({channelId:s},e)))},q="MESSAGE__SET_MESSAGE_LIST_IS_LOADED",J=Object(o.a)(q),Z="MESSAGE__DELETE_ONE",Q=Object(o.a)(Z),Y=e=>async(t,n)=>{const a=n(),s=Object(x.d)(a,e);s&&S.b.deleteMessage(s).then(()=>t(Q(s.messageId))).then(()=>t(Object(c.a)()))},X="MESSAGE__RECEIVE_DELETE_ONE",$=Object(o.a)(X),ee=e=>async(t,n)=>{t($(e))},te="MESSAGE__GET_PREVIOUS_MESSAGES_START",ne="MESSAGE__GET_PREVIOUS_MESSAGES_END",ae="MESSAGE__GET_PREVIOUS_MESSAGES_ERROR",se=Object(o.a)(te),ce=Object(o.a)(ne),re=Object(o.a)(ae),oe=e=>async(t,n)=>{const a=Object(v.A)(n(),"channelId");t(se(a)),t(Object(l.B)()),a&&await S.b.getPreviousMessages(d.c.USER,e).then(e=>t(ce(Object.assign({channelId:a},e)))).catch(()=>t(re(a)))},ie=(e,t)=>async(n,a,{apiContext:s})=>{try{await Object(j.j)(s(),t,e)}catch(c){Object(f.b)(c)}},le=(e,t)=>async(n,a,{apiContext:s})=>{try{await Object(j.d)(s(),t,e)}catch(c){Object(f.b)(c)}}},"./src/chat/actions/message/unreadCount.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return m}),n.d(t,"b",function(){return g});var a=n("./node_modules/lodash/debounce.js"),s=n.n(a),c=n("./node_modules/lodash/isEqual.js"),r=n.n(c),o=n("./src/lib/constants/index.ts"),i=n("./src/lib/makeActionCreator/index.ts"),l=n("./src/chat/endpoints/sendbird/index.ts"),d=n("./src/chat/helpers/errors.ts"),u=n("./src/chat/selectors/user.ts"),h=n("./src/chat/singleton/SendbirdSDK.ts");const m="MESSAGE__SET_UNREAD_COUNT",b=Object(i.a)(m),p=e=>({basicChannelCount:e&&Number(e.unread_count)||0,subredditChannelCount:e&&Number(e.subreddit_unread_count)?1:0,subredditMentionCount:e&&Number(e.subreddit_mention_count)||0}),g=s()((e,t,n)=>async(a,s,{apiContext:c})=>{const o=s();let i;(i="number"==typeof e||"number"==typeof t||"number"==typeof n?{basicChannelCount:e||0,subredditChannelCount:t||0,subredditMentionCount:n||0}:h.b.isConnected()?await(async()=>{try{const t=await h.b.getUnreadCount();return p(t)}catch(e){Object(d.b)(e)}})():await(async(e,t)=>{const n=Object(u.c)(e);if(n)try{const e=await Object(l.i)(t(),n);return p(e&&e.body)}catch(a){Object(d.b)(`Error getting proxy unread count: ${a}`)}})(o,c))&&!r()(o.messages.unread,i)&&await a(b(i))},o.Db,{leading:!0})},"./src/chat/actions/page.ts":function(e,t,n){"use strict";n.d(t,"b",function(){return l}),n.d(t,"a",function(){return d}),n.d(t,"c",function(){return u}),n.d(t,"d",function(){return h});var a=n("./src/chat/actions/channel.ts"),s=n("./src/chat/actions/sidebar.ts"),c=n("./src/chat/actions/tracking.ts"),r=n("./src/chat/actions/user.ts"),o=n("./src/chat/selectors/platform.ts");function i(e){return t=>async(n,a,c)=>{const i=Object(o.f)(a());n(Object(s.d)(i)),await Object(r.l)()(n,a,c),await Object(r.p)()(n,a,c),await e(t)(n,a,c)}}const l=i(e=>async(e,t,n)=>{}),d=i(e=>async(e,t,n)=>{}),u=i(e=>async(e,t,n)=>{}),h=i(e=>async(e,t,n)=>{const s=t().platform.currentPage;{const t=s&&s.urlParams.userIds.split(",");if(t)return e(Object(c.i)(t)),void e(Object(a.B)(t,name))}})},"./src/chat/actions/platform.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return l}),n.d(t,"c",function(){return d}),n.d(t,"d",function(){return u}),n.d(t,"e",function(){return h});n("./src/config.ts");var a=n("./src/lib/areUrlsEqual/index.ts"),s=(n("./src/lib/constants/index.ts"),n("./src/lib/logs/timing.js")),c=n("./src/lib/makeActionCreator/index.ts"),r=(n("./src/chat/strings/index.ts"),n("./src/chat/actions/channel.ts")),o=n("./src/chat/actions/sendbird/index.ts");const i="PLATFORM__HISTORY_LOCATION_SET",l="PLATFORM__INITIAL_REFERRER_SET",d="PLATFORM__PAGE_META_SET",u=(e,t,n)=>async(c,i,l)=>{const d=Date.now(),u=i().platform.currentPage;if(n&&(c(h({action:t,location:e,routeMatch:n})),!u||!Object(a.a)(u.url,e))){if(n){const e=n.match;await n.route.action(e)(c,i,l);const t=n.route.meta;if(t){const e=Date.now()-d;Object(s.b)({duration:e,meta:t})}}n.match.params.subredditName&&c(Object(o.l)()),n.match.params.channelId&&c(Object(r.O)())}},h=Object(c.a)(i);Object(c.a)(l),Object(c.a)(d),Object(c.a)("PLATFORM__MODAL_TOGGLED")},"./src/chat/actions/promo/checkPromoInLocalStorage.ts":function(e,t,n){"use strict";var a=n("./src/lib/cache/index.ts"),s=n("./src/chat/constants/promos.ts"),c=n("./src/chat/models/Promo/index.ts");t.a=(e=>{const t=Object(a.b)(s.a)||[];return e=(e=>{switch(e){case c.c.LegacySubredditChatFtux:return c.a.SubredditChatFtux;case c.c.LegacyNSFWWarning:return c.b.NSFWWarning;default:return e}})(e),t.includes(e)})},"./src/chat/actions/promo/index.ts":function(e,t,n){"use strict";n.d(t,"d",function(){return O}),n.d(t,"e",function(){return j}),n.d(t,"a",function(){return f}),n.d(t,"b",function(){return E}),n.d(t,"f",function(){return I}),n.d(t,"c",function(){return v});var a=n("./src/lib/cache/index.ts"),s=n("./src/lib/constants/index.ts"),c=n("./src/lib/makeActionCreator/index.ts"),r=n("./src/chat/constants/promos.ts"),o=n("./src/chat/endpoints/users/index.ts"),i=n("./src/chat/models/Promo/index.ts"),l=n("./src/chat/selectors/experiments.ts"),d=n("./src/chat/selectors/messages.ts"),u=n("./src/chat/selectors/user.ts"),h=n("./src/chat/tracking/events/platform.ts"),m=n("./src/chat/actions/promo/checkPromoInLocalStorage.ts"),b=n("./src/chat/actions/promo/constants.ts");const p=Object(c.a)(b.a),g=Object(c.a)(b.b),O=e=>async(t,n)=>{t(g(e)),(e=>{if(!Object(m.a)(e)){const t=[...Object(a.b)(r.a)||[],e];Object(a.d)(r.a,t,s.Xb)}})(e)},j=()=>async(e,t)=>{Object.keys(i.b).forEach(t=>{Object(m.a)(i.b[t])||e(p(i.b[t]))})},f="PROMO__DISPLAY_SUBREDDIT_CHAT_FTUX_PROMO",C=Object(c.a)(f),E="PROMO__SEEN_SUBREDDIT_CHAT_FTUX",_=Object(c.a)(E),I=()=>async(e,t,{apiContext:n})=>{Object(o.e)(n()),e(_()),e(O(i.a.SubredditChatFtux))},v=()=>async(e,t)=>{const n=t(),a=Object(m.a)(i.a.SubredditChatFtux),s=Object(u.e)(n),c=Object(l.a)(n),r=Object(l.b)(n);!a&&!s&&c&&r&&(await e(p(i.a.SubredditChatFtux)),await e(C(Object(d.i)(n))),Object(h.b)(n))}},"./src/chat/actions/sendbird/config.ts":function(e,t,n){"use strict";n.d(t,"c",function(){return c}),n.d(t,"b",function(){return o}),n.d(t,"a",function(){return l}),n.d(t,"d",function(){return u});var a=n("./src/lib/makeActionCreator/index.ts"),s=n("./src/chat/endpoints/sendbird/index.ts");const c="SENDBIRD_CONFIG__PROXY",r=Object(a.a)(c),o="SENDBIRD_CONFIG__GLOBAL_SETTINGS",i=Object(a.a)(o),l="SENDBIRD_CONFIG__USER_EXPERIMENTS",d=Object(a.a)(l),u=()=>async(e,t,{apiContext:n})=>{const a=await Object(s.e)(n());a.ok&&await Promise.all([e(r({host:a.body.proxy_host})),e(i({maxMessageLength:parseInt(a.body.max_message_length,10)})),e(d({userSubredditChatEnabled:a.body.user_subreddit_chat_enabled}))])}},"./src/chat/actions/sendbird/index.ts":function(e,t,n){"use strict";n.d(t,"c",function(){return h}),n.d(t,"a",function(){return m}),n.d(t,"j",function(){return b}),n.d(t,"h",function(){return p}),n.d(t,"m",function(){return O}),n.d(t,"b",function(){return j}),n.d(t,"i",function(){return f}),n.d(t,"g",function(){return C}),n.d(t,"n",function(){return I}),n.d(t,"d",function(){return v}),n.d(t,"e",function(){return y}),n.d(t,"k",function(){return N}),n.d(t,"f",function(){return w}),n.d(t,"l",function(){return T});var a=n("./src/lib/cache/index.ts"),s=n("./src/lib/constants/index.ts"),c=n("./src/lib/makeActionCreator/index.ts"),r=n("./src/chat/actions/tracking.ts"),o=n("./src/chat/endpoints/accounts/index.ts"),i=n("./src/chat/endpoints/sendbird/index.ts"),l=n("./src/chat/models/Contact/index.ts"),d=n("./src/chat/selectors/contacts.ts"),u=n("./src/chat/selectors/experiments.ts");const h="SENDBIRD__DEACTIVATE_SENDBIRD_SESSION",m="SENDBIRD__ACTIVATE_SENDBIRD_SESSION",b=Object(c.a)(h),p=(Object(c.a)(m),"SENDBIRD__SET_SENDBIRD_SESSION"),g=Object(c.a)(p),O=(e=!0)=>async(t,n,{apiContext:c})=>{var r=n().user;const o=r.account,l=r.session;if(l&&o){let n;const r=Object(a.c)(s.n.CHAT,"session",o.id),u=Object(a.b)(r);if(u&&u.token)n=u;else{const e=await Object(i.h)(c(),l);if(e.ok){var d=e.body;const t=d.valid_until;n={expires:t,token:d.sb_access_token},Object(a.d)(r,n,new Date(t))}}if(n)return void t(g(Object.assign({},n,{active:e})))}t(b())},j="SENDBIRD__ADD_MEMBERS_TO_KNOWN_CONTACTS",f=Object(c.a)(j),C="SENDBIRD__SET_REDDIT_CONTACT_LIST",E=6*s.K,_=Object(c.a)(C),I=()=>async(e,t,{apiContext:n})=>{const c=t(),r=c.contacts.models,o=Object(a.c)(s.n.CHAT,"contacts",c.user.account.id),d=Object(a.b)(o);if(d&&d.version===l.a)return void e(_(d.data));const u=t().user.session;if(!u)return;const h=await Object(i.g)(n(),u,25),m=Object(l.c)(h.body).map(e=>r[e.id]?r[e.id]:e),b={version:l.a,data:m};Object(a.d)(o,b,E),e(_(m))},v="SENDBIRD__IDENTIFY_CONTACT_BEGIN",y="SENDBIRD__IDENTIFY_CONTACT_END",x=Object(c.a)(v),S=Object(c.a)(y),N=e=>async(t,n,{apiContext:a})=>{Object(d.c)(n(),e.username)||(t(x({username:e.username})),Object(o.b)(a(),e.username).then(n=>{if(n.ok){const a=Object(l.d)(n.body.data);if(a)return t(S({username:e.username,contact:a,valid:!0}))}else t(Object(r.y)(e.username));t(S({username:e.username,valid:!1}))}))},w="SENDBIRD__OPT_IN",k=Object(c.a)(w),T=()=>async(e,t,{apiContext:n})=>{Object(u.b)(t())||(e(k({userSubredditChatEnabled:!0})),Object(i.m)(n()))}},"./src/chat/actions/sendbird/sdk.ts":function(e,t,n){"use strict";n.d(t,"c",function(){return b}),n.d(t,"a",function(){return p}),n.d(t,"b",function(){return g}),n.d(t,"d",function(){return O}),n.d(t,"e",function(){return C}),n.d(t,"f",function(){return _}),n.d(t,"h",function(){return I}),n.d(t,"g",function(){return v});var a=n("./src/lib/makeActionCreator/index.ts"),s=n("./src/chat/actions/channel.ts"),c=n("./src/chat/actions/message/index.ts"),r=n("./src/chat/actions/message/unreadCount.ts"),o=n("./src/chat/actions/sendbird/index.ts"),i=n("./src/chat/actions/toast.ts"),l=n("./src/chat/constants/sendbird.ts"),d=n("./src/chat/constants/toast.ts"),u=n("./src/chat/selectors/sendbird.ts"),h=n("./src/chat/selectors/user.ts"),m=n("./src/chat/singleton/SendbirdSDK.ts");const b="SENDBIRD_SDK__CONNECT_FAIL",p="SENDBIRD_SDK__CONNECT_SUCCESS",g="SENDBIRD_SDK__DISCONNECT",O="SENDBIRD_SDK__UPDATE_CONNECTION_STATUS",j=Object(a.a)(b),f=Object(a.a)(p),C=e=>async(t,n)=>{const a=n(),o=Object(u.d)(a),b=Object(u.c)(a),p=Object(u.a)(a),g=Object(h.d)(a),O={connectionStatus:l.b.Closed};if(g&&p&&b){const n=g.id;o&&t(Object(i.e)({toast:d.a.ConnectionPending})),e=e||b.token,m.b.connect(p,e,n,t).then(e=>{e.error?(t(j(e.error)),t(I(Object.assign({},O))),t(Object(i.e)({toast:d.a.ConnectionClosed}))):(t(f()),o&&(t(Object(c.q)(!0)),t(Object(i.e)({toast:d.a.ConnectionOpen})),t(Object(i.c)(3))),t(Object(r.b)()),t(Object(s.F)()))})}},E=Object(a.a)(g),_=()=>async e=>{m.b.disconnect().then(()=>{e(E()),e(Object(o.j)())})},I=Object(a.a)(O),v=()=>m.b.reconnect()},"./src/chat/actions/session.ts":function(e,t,n){"use strict";var a=n("./src/lib/makeActionCreator/index.ts"),s=n("./src/lib/constants/index.ts"),c=n("./src/lib/makeApiRequest/index.ts");n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o}),n.d(t,"c",function(){return i}),n.d(t,"d",function(){return u});const r="SESSION__USER_AUTHENTICATED",o="SESSION__USER_LOGGED_OUT",i="SESSION__USER_REAUTHENTICATED",l=(Object(a.a)(r),Object(a.a)(i)),d=Object(a.a)(o),u=()=>async(e,t,{apiContext:n})=>{const a=t().user.session;if(a){const t=await((e,t)=>Object(c.b)(e,{data:t,endpoint:"/refreshproxy",method:s.cb.POST}))(n(),a);if(t.ok){const n=t.body;if(n.unsafeLoggedOut)return void(a.unsafeLoggedOut||e(d()));e(l(n))}}}},"./src/chat/actions/sidebar.ts":function(e,t,n){"use strict";n.d(t,"b",function(){return d}),n.d(t,"d",function(){return h}),n.d(t,"a",function(){return m}),n.d(t,"e",function(){return b}),n.d(t,"c",function(){return p});var a=n("./node_modules/react-router-redux/es/index.js"),s=n("./src/lib/makeActionCreator/index.ts"),c=n("./src/chat/constants/sidebar.ts"),r=n("./src/chat/helpers/urls/index.ts"),o=n("./src/chat/selectors/channels.ts"),i=n("./src/chat/selectors/channels/next.tsx"),l=n("./src/chat/selectors/subreddit.ts");const d="SIDEBAR__SET_SIDEBAR_ACTIVE_INDEX",u=Object(s.a)(d),h=e=>async(t,n)=>{const a=n();e!==a.sidebarTabs.activeIndex&&t(u({activeIndex:e}))},m="SIDEBAR__SET_LAST_CHANNEL_ID_PER_TAB",b=Object(s.a)(m),p=e=>async(t,n)=>{const s=n(),d=s.sidebarTabs.lastChannelIdPerTab[e]||((e,t)=>{switch(t){case c.a.SubredditChannels:return Object(i.a)(e,c.a.SubredditChannels);case c.a.DirectChannels:return Object(i.a)(e,c.a.DirectChannels)}})(s,e);if(t(h(e)),d){const e=Object(o.h)(s,d);if(e){const n=Object(l.b)(s,d),c=n&&n.name,o=Object(r.getChannelUrl)(e,c);return void t(Object(a.b)(o))}}}},"./src/chat/actions/sitewideRules.ts":function(e,t,n){"use strict";var a=n("./src/lib/makeActionCreator/index.ts"),s=n("./src/lib/constants/index.ts"),c=n("./src/lib/makeApiRequest/index.ts"),r=n("./src/lib/omitHeaders/index.ts"),o=n("./src/reddit/constants/headers.ts");var i=n("./src/chat/strings/index.ts");n.d(t,"a",function(){return l}),n.d(t,"b",function(){return u});const l="SITEWIDE_RULES_LOADED",d=Object(a.a)(l),u=()=>async(e,t,{apiContext:n})=>{const a=t();if(!a.user||!a.user.language)return;if(a.sitewideRules&&a.sitewideRules.length)return;const l=await(e=>Object(c.b)(Object(r.a)(e,[o.a]),{endpoint:`${e.apiUrl}/api/sitewide_rules.json`,method:s.cb.GET}))(n());if(l.ok){const t=l.body.sitewide_rules;let n=[];if(t&&t.length){const e={reasonTextToShow:Object(i.a)("en","app.chat.report.spamItem"),nextStepReasons:[t[0],t[1]]};n.push(e),n=n.concat(t.slice(2))}e(d(n))}}},"./src/chat/actions/theme.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"THEME_CHANGED",function(){return c}),n.d(t,"themeToggle",function(){return l}),n.d(t,"switchTheme",function(){return d});var a=n("./src/lib/makeActionCreator/index.ts"),s=n("./src/chat/constants/theme.ts");const c="THEME_CHANGED",r=s.b.REDDIT,o=s.b.NIGHT,i=Object(a.a)(c),l=()=>async(e,t)=>{const n=t().user.prefs.globalTheme;e(i({themeKey:n===r?o:r}))},d=e=>async(t,n)=>{t(i({themeKey:e?o:r}))}},"./src/chat/actions/toast.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"d",function(){return r}),n.d(t,"b",function(){return o}),n.d(t,"e",function(){return i}),n.d(t,"c",function(){return l});var a=n("./src/lib/makeActionCreator/index.ts"),s=n("./src/lib/constants/index.ts");const c="TOAST__RESET_TOAST",r=Object(a.a)(c),o="TOAST__UPDATE_TOAST",i=Object(a.a)(o),l=e=>async(t,n)=>{setTimeout(()=>t(r()),e*s.Db)}},"./src/chat/actions/tooltip.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"b",function(){return c}),n.d(t,"c",function(){return r}),n.d(t,"d",function(){return o});var a=n("./src/lib/makeActionCreator/index.ts");const s="TOOLTIP__DROPDOWN_TOGGLED",c="TOOLTIP__DROPDOWN_UNSET",r=Object(a.a)(s),o=Object(a.a)(c)},"./src/chat/actions/tracking.ts":function(e,t,n){"use strict";var a=n("./src/telemetry/models/Event.ts"),s=n("./src/chat/constants/channels.ts"),c=n("./src/chat/selectors/channels.ts"),r=n("./src/chat/selectors/contacts.ts"),o=n("./src/chat/selectors/platform.ts"),i=n("./src/chat/selectors/sidebar.ts"),l=n("./src/chat/tracking/fields/chat.ts"),d=n("./src/chat/tracking/fields/common.ts"),u=n("./src/chat/tracking/fields/subreddit.ts"),h=n("./src/chat/tracking/sendEvent.ts");var m=n("./src/chat/tracking/events/chatSettings.ts"),b=n("./src/chat/tracking/events/chatView.ts"),p=n("./src/chat/tracking/events/contactsList.ts"),g=n("./src/chat/tracking/events/invitationInbox.ts"),O=n("./src/chat/tracking/events/messagesInbox.ts"),j=n("./src/chat/selectors/telemetry.ts");n.d(t,"g",function(){return f}),n.d(t,"v",function(){return C}),n.d(t,"z",function(){return E}),n.d(t,"w",function(){return _}),n.d(t,"B",function(){return I}),n.d(t,"A",function(){return v}),n.d(t,"t",function(){return y}),n.d(t,"p",function(){return x}),n.d(t,"n",function(){return S}),n.d(t,"u",function(){return N}),n.d(t,"f",function(){return w}),n.d(t,"y",function(){return k}),n.d(t,"x",function(){return T}),n.d(t,"h",function(){return M}),n.d(t,"d",function(){return D}),n.d(t,"b",function(){return A}),n.d(t,"k",function(){return L}),n.d(t,"l",function(){return U}),n.d(t,"m",function(){return B}),n.d(t,"j",function(){return R}),n.d(t,"e",function(){return P}),n.d(t,"i",function(){return H}),n.d(t,"c",function(){return F}),n.d(t,"o",function(){return K}),n.d(t,"D",function(){return G}),n.d(t,"r",function(){return z}),n.d(t,"C",function(){return W}),n.d(t,"q",function(){return V}),n.d(t,"s",function(){return q}),n.d(t,"a",function(){return J});const f=()=>async(e,t)=>{Object(O.b)(t())},C=e=>async(t,n)=>{Object(b.a)(n(),e)},E=e=>async(t,n)=>{Object(b.d)(n(),e)},_=(e,t)=>async(n,a)=>{Object(b.b)(a(),e,t)},I=()=>async(e,t)=>{Object(b.e)(t())},v=()=>async(e,t)=>{Object(m.f)(t())},y=()=>async(e,t)=>{const n=Object(c.u)(t());if(n&&n.length){const e=n[0].id;Object(m.c)(t(),e)}},x=()=>async(e,t)=>{const n=t();Object(o.c)(n)!==s.a.VIEW_INVITE&&Object(m.b)(n)},S=()=>async(e,t)=>{Object(m.a)(t())},N=e=>async(t,n)=>{Object(m.d)(n(),e)},w=e=>async(t,n)=>{Object(p.c)(n(),e)},k=e=>async(t,n)=>{Object(r.c)(n(),e)&&Object(p.f)(n())},T=e=>async(t,n)=>{const a=n(),s=e&&e.filter(e=>e!==a.user.account.id),c=s&&s[0],o=a.contacts.models[c],i=o&&o.name,l=Object(r.a)(n(),i);l&&Object(p.e)(n(),l)},M=(e,t)=>async(e,n)=>{Object(p.d)(n(),t)},D=()=>async(e,t)=>{Object(p.b)(t())},A=()=>async(e,t)=>{Object(p.a)(t())},L=()=>async(e,t)=>{Object(g.c)(t())},U=()=>async(e,t)=>{Object(g.d)(t())},B=()=>async(e,t)=>{const n=t();Object(o.c)(n)===s.a.VIEW_INVITE&&Object(g.e)(n)},R=()=>async(e,t)=>{const n=t();Object(g.b)(n),Object(i.b)(n)&&Object(g.f)(t())},P=()=>async(e,t)=>{Object(g.a)(t())},H=e=>async(t,n)=>{((e,t)=>{Object(h.a)(Object.assign({noun:"create_chat",source:a.b.UserProfile,action:a.a.Click,chat:Object.assign({},Object(l.E)(e,t),Object(l.C)(e,t),Object(l.D)(e,t)),user:Object.assign({},(e=>({id:e.user.account.id}))(e))},Object(d.a)(e)))})(n(),e)},F=()=>async(e,t)=>{Object(O.a)(t())},K=()=>async(e,t)=>{Object(O.c)(t())},G=()=>async(e,t)=>{Object(O.g)(t())},z=()=>async(e,t)=>{Object(O.d)(t())},W=e=>async(t,n)=>{const s=n();s.tooltipId!==e&&(e=>{Object(h.a)(Object.assign({noun:"snoomoji",source:a.b.ChatKeyboard,action:a.a.View,chat:Object.assign({},Object(l.A)(e),Object(l.p)(e),Object(l.g)(e)),subreddit:Object.assign({},Object(u.a)(e),Object(u.b)(e))},Object(d.a)(e)))})(s)},V=()=>async(e,t)=>{(e=>{Object(h.a)(Object.assign({noun:"other_message",source:a.b.ChatView,action:a.a.ModDelete,chat:Object.assign({},Object(l.A)(e),Object(l.p)(e),Object(l.g)(e),Object(l.s)(e),Object(l.n)(e),Object(l.x)(e)),subreddit:Object.assign({},Object(u.a)(e),Object(u.b)(e))},Object(d.a)(e)))})(t())},q=e=>async(t,n)=>{const s=n(),c=Object(o.b)(s),r=(e=>{switch(e){case a.b.ChatSettings:return a.b.ChatSettings;default:return a.b.ChatView}})(c&&c.source);((e,t,n)=>{Object(h.a)(Object.assign({noun:"user",source:n,action:a.a.Kick,chat:Object.assign({},Object(l.A)(e),Object(l.p)(e),Object(l.g)(e),Object(l.s)(e),Object(l.n)(e),Object(l.x)(e)),subreddit:Object.assign({},Object(u.a)(e),Object(u.b)(e))},Object(d.a)(e),{actionInfo:Object.assign({settingValue:t},Object(j.a)(e))}))})(n(),e,r)},J=e=>async(t,n)=>{((e,t)=>{Object(h.a)(Object.assign({noun:"ban_user",source:t,action:a.a.Click,chat:Object.assign({},Object(l.A)(e),Object(l.p)(e),Object(l.g)(e),Object(l.s)(e),Object(l.n)(e),Object(l.x)(e)),subreddit:Object.assign({},Object(u.a)(e),Object(u.b)(e))},Object(d.a)(e)))})(n(),e)}},"./src/chat/actions/typingIndicator.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return l});var a=n("./node_modules/lodash/isEqual.js"),s=n.n(a),c=n("./src/lib/makeActionCreator/index.ts"),r=n("./src/chat/selectors/channels.ts");const o="TYPING_INDICATOR__UPDATE",i=Object(c.a)(o),l=({channelId:e,usernames:t})=>async(n,a)=>{const c=Object(r.A)(a(),"channelId"),o=a().typingIndicator.usernames,l=e===c,d=t.length>3&&o.length>3,u=!s()(t,o);l&&u&&!d&&n(i({usernames:t}))}},"./src/chat/actions/user.ts":function(e,t,n){"use strict";var a=n("./node_modules/lodash/chunk.js"),s=n.n(a),c=n("./node_modules/react-router-redux/es/index.js"),r=n("./src/lib/makeActionCreator/index.ts"),o=n("./src/chat/actions/channel.ts"),i=n("./src/chat/actions/theme.ts"),l=n("./src/chat/actions/tracking.ts"),d=n("./src/chat/constants/channels.ts"),u=n("./src/chat/endpoints/accounts/index.ts"),h=n("./src/chat/endpoints/sendbird/index.ts"),m=n("./src/chat/endpoints/users/index.ts"),b=n("./src/chat/helpers/errors.ts"),p=n("./src/chat/models/Channel/index.ts"),g=n("./src/chat/models/Contact/index.ts");const O=e=>({experimentId:e.experiment_id,owner:e.owner,variant:e.variant});var j=n("./src/chat/models/User/index.ts"),f=n("./src/chat/selectors/channels.ts"),C=n("./src/chat/selectors/user.ts"),E=n("./src/chat/singleton/SendbirdSDK.ts");n.d(t,"a",function(){return I}),n.d(t,"f",function(){return v}),n.d(t,"e",function(){return y}),n.d(t,"g",function(){return x}),n.d(t,"d",function(){return S}),n.d(t,"q",function(){return N}),n.d(t,"r",function(){return M}),n.d(t,"u",function(){return D}),n.d(t,"l",function(){return L}),n.d(t,"i",function(){return U}),n.d(t,"v",function(){return H}),n.d(t,"h",function(){return F}),n.d(t,"m",function(){return G}),n.d(t,"k",function(){return z}),n.d(t,"t",function(){return W}),n.d(t,"j",function(){return V}),n.d(t,"s",function(){return q}),n.d(t,"c",function(){return J}),n.d(t,"o",function(){return Y}),n.d(t,"b",function(){return X}),n.d(t,"p",function(){return te}),n.d(t,"n",function(){return ne});var _=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(a=Object.getOwnPropertySymbols(e);s<a.length;s++)t.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(n[a[s]]=e[a[s]])}return n};const I="USER__ACCOUNT_FETCH_COMPLETED",v="USER__REDDAID_RECEIVED",y="USER__LOID_RECEIVED",x="USER__SESSION_TRACKER_RECEIVED",S="FETCH_EXPERIMENTS_COMPLETED",N=Object(r.a)(y),w=Object(r.a)("USER__ACCOUNT_FETCH_PENDING"),k=Object(r.a)(I),T=Object(r.a)("USER__ACCOUNT_FETCH_FAILED"),M=Object(r.a)(v),D=Object(r.a)(x),A=Object(r.a)(S),L=()=>async(e,t,{apiContext:n})=>{var a=t().user;const s=a.session,c=a.account,r=a.experiments;if(!s||c&&Object.keys(r).length)return;e(w());const o=await Object(u.c)(n());if(o.ok&&o.body&&o.body.features){const t=o.body,n=o.body.features,a=Object(j.b)(t),s=(e=>Object.keys(e).reduce((t,n)=>{const a=e[n];return"boolean"==typeof a&&(t[n]=a),"object"==typeof a&&(t[n]=O(a)),t},{}))(n),c=!!a.prefNightmode;e(k(a)),e(A(s)),e(Object(i.switchTheme)(c))}else e(T(o.error))},U="USER__USERS_FETCH_COMPLETED",B=Object(r.a)("USER__USERS_FETCH_PENDING"),R=Object(r.a)(U),P=Object(r.a)("USER__USERS_FETCH_FAILED"),H=e=>async(t,n,{apiContext:a})=>{const c=n().contacts.models,r=e.filter(e=>!c[e]),o=s()(r,100);if(!r.length)return;t(B(e));const i=await Promise.all(o.map(e=>Object(m.d)(a(),e))).catch(()=>[]);for(const e of i)if(e.ok){const n=Object(j.a)(e.body);t(R(n))}else t(P())},F="USERS__USERS_ADD_SELECTED",K=Object(r.a)(F),G=e=>async(t,n)=>{t(K(e)),t(Object(l.f)(e))},z="USERS__USERS_REMOVE_SELECTED",W=Object(r.a)(z),V="USERS__USERS_REMOVE_ALL_SELECTED",q=Object(r.a)(V),J="USERS__BLOCK_USER_COMPLETED",Z=Object(r.a)(J),Q=Object(r.a)("USERS__BLOCK_USER_FAILED"),Y=(e,t)=>async(n,a,{apiContext:s})=>{const r=a(),i=r.contacts.models[e],l=i&&i.name,h=Object(f.w)(r),m=Object(f.i)(r)||d.b.JOINED,g=h&&h.type===p.a.Direct,O=Object(f.k)(r);if(!O)throw new b.a("currentChannel",O);const j=O.channelId;if(!j)throw new b.a("blockedChannelId",j);const C=await Object(u.a)(s(),e);C&&C.ok&&g?(await E.b.hideChannel(),n(Z({userId:e,username:l})),t||(n(Object(o.L)(j)),n(Object(o.P)(m)))):C&&C.ok&&!g?(n(Z({userId:e,username:l})),t||n(Object(c.a)())):C&&n(Q(C.error))},X="BLOCKED_USER_LIST_FETCH_COMPLETED",$=Object(r.a)("BLOCKED_USER_LIST_FETCH_FAILED"),ee=Object(r.a)(X),te=()=>async(e,t,{apiContext:n})=>{const a=t().contacts;if(!a.fetchedBlockedUsers){const t=await Object(m.c)(n());if(t.ok&&t.body&&t.body.data){const n=t.body.data.children,s=a.models,c={};n.forEach(e=>{if(s[e.id])c[e.id]=Object.assign({},s[e.id],{isBlocked:!0});else{e.date;const t=_(e,["date"]);c[e.id]=Object.assign({},g.b,t,{isBlocked:!0})}}),e(ee({blockedContacts:c}))}else e($(t.error))}},ne=e=>async(t,n,{apiContext:a})=>{const s=n(),r=Object(C.c)(s);if(r){const n=(e=>({chat_ban:e.chatBan,delete_all_messages:e.deleteAllMessages,subreddit_id:e.subredditId,user_id:e.userId}))(e);(await Object(h.b)(a(),r,n)).ok||Object(b.b)("Error with ban user and delete all messages"),t(Object(c.a)())}}},"./src/chat/components/BasicJoined/index.m.less":function(e,t,n){e.exports={LoadingIndicator:"ig0HUUOzAEYQrNAtx6nVm",loadingIndicator:"ig0HUUOzAEYQrNAtx6nVm",Text:"_3k0sISq1Sewv-7h_jA7Nhh",text:"_3k0sISq1Sewv-7h_jA7Nhh"}},"./src/chat/components/ChannelHeaderDropdown/index.m.less":function(e,t,n){e.exports={Dropdown:"_1qhSxdEj1WQNv1ToBDZ2SG",dropdown:"_1qhSxdEj1WQNv1ToBDZ2SG",DropdownRow:"_3EydiRSMl_H2N9IS6m76km",dropdownRow:"_3EydiRSMl_H2N9IS6m76km",DropdownTrigger:"_2g2FuE9xJbJ5iuYJEimir3",dropdownTrigger:"_2g2FuE9xJbJ5iuYJEimir3"}},"./src/chat/components/ChatIcon/index.m.less":function(e,t,n){e.exports={IconWrapper:"_31wl61nRiy0UL2YxoDjz2D",iconWrapper:"_31wl61nRiy0UL2YxoDjz2D",Userpic:"fe-_chEHN4wNlORq9_m6c",userpic:"fe-_chEHN4wNlORq9_m6c",TopUserpic:"_3hrLerMvj3lz0atZrar82R",topUserpic:"_3hrLerMvj3lz0atZrar82R",BottomUserpic:"_10qnPCOiTCWch5MdQoHupL",bottomUserpic:"_10qnPCOiTCWch5MdQoHupL"}},"./src/chat/components/ChatListItem/index.m.less":function(e,t,n){e.exports={activityStyle:"_1PVlOhNZbGo7nEpTkL6Gh0",active:"_2rJ3EIF1aYMVsu_oc8J96G",unread:"_1ibPLfkwlA3DRLbvoeDQ-z",ChatListItem:"_3X4hbg4asgVvLaVYU6dUzs",chatListItem:"_3X4hbg4asgVvLaVYU6dUzs",ChatIcon:"VrCsXoT_hmeIwuKljzKl0",chatIcon:"VrCsXoT_hmeIwuKljzKl0",ItemTitle:"_3bFoFHzAF-p75iQXilwXZu",itemTitle:"_3bFoFHzAF-p75iQXilwXZu",ItemTitleName:"_2uA0PzZKH32GoGhEYmjNQY",itemTitleName:"_2uA0PzZKH32GoGhEYmjNQY",Description:"inhRCnEPMGix0YN6H1tG-",description:"inhRCnEPMGix0YN6H1tG-",ItemControls:"Vq8lNsMCbhivjYa37NfXE",itemControls:"Vq8lNsMCbhivjYa37NfXE",TimeStamp:"_3d9H4ACD6bXp0ZIcchz-ys",timeStamp:"_3d9H4ACD6bXp0ZIcchz-ys",ChannelName:"_2O9bxNWfKdVw3DGR5RL3qM",channelName:"_2O9bxNWfKdVw3DGR5RL3qM",selected:"_1kLrU4-nGav42QWAbioHOC"}},"./src/chat/components/ChatMemberList/index.m.less":function(e,t,n){e.exports={MemberActionDropdown:"_35hMJITNiOe39zEBZZIhTb",memberActionDropdown:"_35hMJITNiOe39zEBZZIhTb",ListItem:"_1r5uWTYsfJO7mPIndnsjxX",listItem:"_1r5uWTYsfJO7mPIndnsjxX",selected:"_3pi1mfWzFHB0awpfsGqhRY",IconContainer:"_1sD1FML2DnIYX9pKhe9bWr",iconContainer:"_1sD1FML2DnIYX9pKhe9bWr",Title:"gwMzsQ4nu6WVY2c9v7Mus",title:"gwMzsQ4nu6WVY2c9v7Mus",Warning:"Z3RlgS8V_RlK5YYIfJ2C4",warning:"Z3RlgS8V_RlK5YYIfJ2C4"}},"./src/chat/components/CloseIcon/index.m.less":function(e,t,n){e.exports={IconButton:"_2SeZKjVwSpNwqshVnDJkYF",iconButton:"_2SeZKjVwSpNwqshVnDJkYF"}},"./src/chat/components/CloseIcon/index.tsx":function(e,t,n){"use strict";var a=n("./node_modules/react/index.js"),s=n.n(a),c=n("./node_modules/react-redux/es/index.js"),r=n("./src/lib/lessComponent.tsx"),o=n("./src/chat/actions/container.ts"),i=n("./src/chat/actions/tracking.ts"),l=n("./src/chat/constants/container.ts"),d=n("./src/chat/controls/Button/index.tsx"),u=n("./src/chat/helpers/chatSelector.ts"),h=n("./src/chat/helpers/dom.ts"),m=n("./src/chat/icons/svgs/NavClose/index.tsx"),b=n("./src/chat/strings/index.ts"),p=n("./src/chat/components/CloseIcon/index.m.less"),g=n.n(p);const O=r.a.wrapped(d.d,"IconButton",g.a),j=Object(c.b)(()=>Object(u.a)({containerSize:e=>e.container.size}),e=>({close:()=>{e(Object(o.sizeChanged)(l.a.HIDDEN)),e(Object(i.c)())}}));t.a=j(({className:e,close:t,containerSize:n})=>n===l.a.EMBED||n===l.a.MINIMIZED?s.a.createElement(O,{onClick:Object(h.b)(t),title:Object(b.a)("en","app.layout.header.close"),className:e},s.a.createElement(m.a,null)):null)},"./src/chat/components/DateSplitter/index.m.less":function(e,t,n){e.exports={TimeWrapper:"_1XAkyv2F6byrdWJg-SHZ7i",timeWrapper:"_1XAkyv2F6byrdWJg-SHZ7i",Time:"_2LyKshutzx3TO04UvQTYsq",time:"_2LyKshutzx3TO04UvQTYsq"}},"./src/chat/components/EmptyState/index.m.less":function(e,t,n){e.exports={Wrapper:"_2UMdjEGcEc4jVOyQvrm43p",wrapper:"_2UMdjEGcEc4jVOyQvrm43p",Image:"_1iX3tBG5vXYrekIuyCKhTe",image:"_1iX3tBG5vXYrekIuyCKhTe",Info:"_2waJskSokZXL5LuWW8VO1N",info:"_2waJskSokZXL5LuWW8VO1N",Header:"_2-m5XiDaYkqlh4osi1nYYP",header:"_2-m5XiDaYkqlh4osi1nYYP",Button:"_2tnTzKA9kkOiahL8VDoFQx",button:"_2tnTzKA9kkOiahL8VDoFQx"}},"./src/chat/components/FirstTimeUserExpPromo/index.m.less":function(e,t,n){e.exports={Wrapper:"_3jv230PJLqyvzYi6HLSGNM",wrapper:"_3jv230PJLqyvzYi6HLSGNM",Header:"_1OSc6SRgz_0qyXqscJJ81m",header:"_1OSc6SRgz_0qyXqscJJ81m",LabelText:"kPr-1VYwxZCZyCL060cvm",labelText:"kPr-1VYwxZCZyCL060cvm",TitleText:"_3ki1nL4m3gEsHslCdrmsKK",titleText:"_3ki1nL4m3gEsHslCdrmsKK",BodyText:"_3sUoTD4J2O46aAXCLOaXIg",bodyText:"_3sUoTD4J2O46aAXCLOaXIg",ChatBubbleIcon:"_3bA0NgJYJ3INjss53obrKL",chatBubbleIcon:"_3bA0NgJYJ3INjss53obrKL",Button:"_9zFuE5zPCg7R9QqIEJ3KS",button:"_9zFuE5zPCg7R9QqIEJ3KS"}},"./src/chat/components/FrameContent/index.m.less":function(e,t,n){e.exports={Main:"RaDn8d65cHW3dCPgTkSRN",main:"RaDn8d65cHW3dCPgTkSRN",Content:"_2K5FjgfpUbS22QcAEaqgts",content:"_2K5FjgfpUbS22QcAEaqgts",Modal:"Jz9-gUKS4kLBzcOh-ylJF",modal:"Jz9-gUKS4kLBzcOh-ylJF"}},"./src/chat/components/FrameContent/index.tsx":function(e,t,n){"use strict";var a=n("./node_modules/lodash/isEqual.js"),s=n.n(a),c=n("./node_modules/react/index.js"),r=n.n(c),o=n("./node_modules/react-redux/es/index.js"),i=n("./src/lib/lessComponent.tsx"),l=n("./src/chat/actions/promo/index.ts"),d=n("./node_modules/lodash/map.js"),u=n.n(d),h=n("./node_modules/lodash/sortBy.js"),m=n.n(h),b=n("./src/lib/constants/index.ts"),p=n("./src/chat/actions/channel.ts"),g=n("./src/chat/actions/message/index.ts"),O=n("./src/chat/actions/message/inboxScroller.ts"),j=n("./node_modules/reselect/es/index.js"),f=n("./node_modules/lodash/template.js"),C=n.n(f),E=n("./src/chat/models/Channel/index.ts"),_=n("./src/chat/strings/index.ts"),I=n("./src/chat/components/TypingIndicator/index.m.less"),v=n.n(I);const y=i.a.span("IndicatorText",v.a);y.displayName="IndicatorText";var x=e=>r.a.createElement(y,{className:e.className},((e,t)=>{const n=Object(_.a)("en","app.chat.typingIndicator.oneUser"),a=Object(_.a)("en","app.chat.typingIndicator.twoUsers"),s=Object(_.a)("en","app.chat.typingIndicator.severalUsers"),c=Object(_.a)("en","app.chat.typingIndicator.directChannelUser");return e===E.a.Direct?c:1===t.length?C()(n)({user:t[0]}):2===t.length?C()(a)({firstUser:t[0],secondUser:t[1]}):t.length>2?s:void 0})(e.channelType,e.usernames)),S=n("./src/chat/selectors/channels.ts");const N=Object(j.c)({typingIndicatorUsernames:e=>e.typingIndicator.usernames,channel:S.k});var w=Object(o.b)(N)(({channel:e,typingIndicatorUsernames:t})=>e&&t.length?r.a.createElement(x,{usernames:t,channelType:e.type}):r.a.createElement(r.a.Fragment,null,e&&e.memberCount," ",Object(_.a)("en","app.chat.messageList.members")));const k=(new Date).setHours(0,0,0,0),T=e=>(e=>k<e.getTime())(e)?M(e):(e=>{return k-b.w<e.getTime()})(e)?Object(_.a)("en","app.chat.message.timeStamp.yesterday"):A(e),M=new Intl.DateTimeFormat(void 0,{hour:"2-digit",minute:"2-digit"}).format,D=new Intl.DateTimeFormat(void 0,{day:"numeric",month:"short",year:"2-digit"}).format,A=new Intl.DateTimeFormat(void 0,{day:"numeric",month:"short"}).format,L=new Intl.DateTimeFormat(void 0,{month:"numeric",day:"numeric",year:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}).format;var U=n("./src/chat/components/DateSplitter/index.m.less"),B=n.n(U);const R=i.a.div("TimeWrapper",B.a),P=i.a.time("Time",B.a);var H=e=>r.a.createElement(R,null,r.a.createElement(P,null,(e=>{const t=k-b.w,n=new Date(k).setDate(1),a=new Date(n).setMonth(0),s=new Date(e);return e>=k?Object(_.a)("en","app.chat.message.timeStamp.today"):e>=t?Object(_.a)("en","app.chat.message.timeStamp.yesterday"):e>=n?A(s):e>=a?A(s):D(s)})(e.date))),F=n("./src/config.ts"),K=n("./src/chat/helpers/chatSelector.ts"),G=n("./src/chat/controls/Svg/index.tsx"),z=n("./src/chat/icons/Nsfw/index.m.less"),W=n.n(z);const V=e=>r.a.createElement(G.a,{width:e.width,height:e.height,className:e.className,viewBox:"0 0 200 200"},r.a.createElement("g",null,r.a.createElement("rect",{width:"100%",height:"100%",fill:"white"}),r.a.createElement("path",{fill:"#000000",d:"M0 100v100h200V0H0v100zm82.1-20.3c2 .4 2.9.2 2.9-.8 0-.8.3-.9.9-.4 1.2 1.4 2.2 12.5 1 12.5-.5 0-.9-.7-.9-1.6 0-.9-1.5-3.1-3.4-5C77.2 79 70 79.9 70 86c0 3 3.1 6.1 10.8 11 7.6 4.7 9.9 9.9 6.8 15.8-2.5 4.8-9.1 6.9-16.2 5.1-3.6-.9-4.8-.9-5.4.1-1.1 1.8-1.7.2-2.4-6.5-.6-5.1-.5-5.7.6-4.1 4 6 7.4 8.8 11 8.9 4.5.1 7.8-2.5 7.8-6.3 0-3.4-1.3-4.9-8.5-9.7-10-6.7-11.9-10.2-8.8-16.3 2-3.8 7.1-6.3 11.2-5.4 1.3.3 3.6.8 5.2 1.1zM39.8 93.1L51 107.3V95.4c0-12.5-.3-13.5-3.5-14.9-1.7-.8-1.6-.9 1.2-1.3 1.8-.2 5-.2 7 0l3.8.4-2.7 1.2-2.8 1.1-.2 18.8-.3 18.8-13.2-16.3L27 86.9v28l2.8 1.5c2.6 1.5 2.4 1.5-4.8 1.5-6 0-7-.2-5-1 1.3-.6 2.8-1.5 3.2-2.2.4-.7.8-8 .8-16.3 0-15.8-.3-17-5-18.7-.8-.3 1-.6 4-.6l5.5-.1 11.3 14.1zM125 83c0 4.2-1.4 5.4-2.3 2-.7-2.7-4.6-4-11.8-4H105v15.1l6.3-.3c5.3-.3 6.3-.6 7.2-2.6 1.7-3.8 2.5-2.4 2.5 4.3 0 6.7-.8 8.1-2.5 4.2-.9-1.9-1.9-2.2-7.2-2.5l-6.3-.3v8.5c0 8.3 0 8.5 2.8 9.4 2.1.8.9 1-6.3 1-6.9 0-8.4-.2-6.4-.9 3.4-1.2 3.9-3.8 3.9-18.4 0-14.6-.5-17.2-3.9-18.4-1.9-.7 2-1 13.7-1L125 79v4zm13.3-2.5l-2.2 1.6 3 8.1c1.6 4.5 3.8 10 4.8 12.2l1.7 4.1 3.1-8c3-8 3-8 1.3-12.4-.9-2.4-2.8-5-4.1-5.7-2.2-1.2-1.5-1.3 6.1-1.3 5.8 0 7.8.3 6.4.9-1.2.5-2.5 1.3-2.8 1.8-.5.9 7.3 22.4 8.6 23.7.3.3 2.5-4.7 4.9-11.1l4.3-11.7-2.3-1.8-2.3-1.9 5.8.1c5.5 0 5.8.1 3.8 1.5-1.5 1-4.2 7.1-8.5 19.4-3.5 9.9-6.7 18-7 18-.3 0-2.5-5.2-4.9-11.5-2.3-6.3-4.6-11.3-5-11-.4.2-2.4 5.3-4.5 11.2-2.1 5.9-4.1 11.2-4.5 11.6-.4.5-1.8-2.2-3-6-5.5-16.5-11.1-29.9-13.2-31.5-2.2-1.7-2.1-1.8 5.2-1.8 7 0 7.3.1 5.3 1.5z"}))),q=i.a.wrapped(V,"NSFWIcon",W.a),J=i.a.wrapped(V,"SmallNSFWIcon",W.a);var Z=["FF4500","0DD3BB","24A0ED","FFB000","FF8717","46D160","25B79F","0079D3","4856A3","C18D42","A06A42","46A508","008985","7193FF","7E53C1","FFD635","DDBD37","D4E815","94E044","FF66AC","DB0064","FF585B","EA0027","A5A4A4","545452"],Q=n("./src/chat/icons/Userpic/index.m.less"),Y=n.n(Q);const X=i.a.i("FallbackAvatar",Y.a),$=i.a.wrapped(X,"FallbackAvatarWrapper",Y.a),ee=i.a.wrapped(e=>{const t=e.className,n=e.height,a=e.width,s=e.userId,c=F.a.processingAvatarImageUrl;var o=(e=>{const t=Z.length,n=parseInt(e,36),a=n%20+1,s=Math.floor(n/20)%t;return{avatar:("0"+a).slice(-2),color:Z[s]}})((e=>e.replace(b.mb.ACCOUNT+"_",""))(s));const i=o.avatar,l=o.color,d={backgroundColor:l,backgroundImage:`url(${`${c}/avatar_default_${i}_${l}.png`})`,height:n,width:a};return r.a.createElement("i",{className:t,style:d})},"SnooIcon",Y.a);const te=i.a.wrapped(class extends r.a.Component{constructor(e){super(e),this.state={profileImgFailed:!1},this.onError=this.onError.bind(this)}onError(){this.setState({profileImgFailed:!0})}render(){var e=this.props;const t=e.className,n=e.height,a=e.width,s=e.profileImg,c=e.name,o={height:n,width:a};return this.state.profileImgFailed||!s?r.a.createElement($,{style:o,className:t,title:`${c} ${Object(_.a)("en","app.chat.user.snoovatar")}`}):r.a.createElement("img",{style:o,onError:this.onError,className:t,src:s,alt:`${c} ${Object(_.a)("en","app.chat.user.snoovatar")}`})}},"VoicesAvatar",Y.a),ne=Object(K.a)({contact:(e,t)=>e.contacts.models[t.userId],currentUser:e=>e.user.account});var ae=Object(o.b)(ne)(e=>{const t=e.className,n=e.contact,a=e.currentUser,s=e.height,c=e.width,o=e.userId,i=o===a.id;var l=i?a:n||{},d=l.profileImg;const u=void 0===d?"":d;var h=l.name;const m=void 0===h?"":h;return n&&n.isNSFW&&!i?r.a.createElement(J,{className:t,height:s,width:c}):u?r.a.createElement(te,{className:t,height:s,width:c,profileImg:u,name:m}):r.a.createElement(ee,{className:t,height:s,width:c,userId:o})}),se=n("./src/chat/components/Intro/index.m.less"),ce=n.n(se);const re=i.a.span("Wrapper",ce.a),oe=i.a.span("SubredditName",ce.a),ie=i.a.span("ChannelName",ce.a),le=i.a.div("ChannelDescription",ce.a),de=i.a.ul("Users",ce.a),ue=i.a.li("User",ce.a),he=i.a.span("UserTitle",ce.a);var me,be=({channel:e,subreddit:t,users:n})=>r.a.createElement(re,null,t?((e,t)=>{const n=e.customData&&e.customData.description;return r.a.createElement(r.a.Fragment,null,r.a.createElement(oe,null,`r/${t.name}`),r.a.createElement(ie,null,e.name),r.a.createElement(le,null,n))})(e,t):(e=>r.a.createElement(r.a.Fragment,null,r.a.createElement(de,null,e.map((e,t,n)=>r.a.createElement(ue,{key:e.id},r.a.createElement(ae,{height:"16px",width:"16px",userId:e.id}),r.a.createElement(he,null,`${e.name}${t<n.length-1?",":""}`)))),r.a.createElement(le,null,Object(_.a)("en","app.chat.intro"))))(n)),pe=n("./node_modules/uuid/v4.js"),ge=n.n(pe),Oe=n("./src/lib/classNames/index.ts"),je=n("./src/lib/linkMatchers/customLinks.ts"),fe=n("./node_modules/react-router-redux/es/index.js"),Ce=n("./src/chat/actions/tracking.ts"),Ee=n("./src/chat/constants/messages.ts");!function(e){e.Ban="ban",e.Block="block",e.Kick="kick",e.Report="report"}(me||(me={}));var _e=n("./src/chat/controls/Button/index.tsx"),Ie=n("./src/chat/helpers/urls/index.ts"),ve=n("./src/telemetry/models/Event.ts"),ye=n("./src/chat/components/Message/ActionButtonGroup.m.less"),xe=n.n(ye);const Se=i.a.span("Wrapper",xe.a),Ne=i.a.span("ActionButton",xe.a),we=Object(K.a)({channel:S.w,isMod:S.a});var ke=Object(o.b)(we,e=>({onDeleteMessage:(t,n,a)=>{e(Object(fe.b)(Object(Ie.messageActionUrl)(t,n,Ee.a.DELETE,a)))},onReportMessage:(t,n,a)=>e(Object(fe.b)(Object(Ie.messageActionUrl)(t,n,Ee.a.REPORT,a))),onKickUser:(t,n,a)=>e(Object(fe.b)(Object(Ie.userActionUrl)(t,n,me.Kick,a,{source:ve.b.ChatView}))),onBanUser:(t,n,a)=>{e(Object(fe.b)(Object(Ie.userActionUrl)(t,n,me.Ban,a))),e(Object(Ce.a)(ve.b.ChatView))}}))(e=>{const t=e.isMod,n=e.channel;var a=e.message;const s=a.messageId,c=a.sender,o=e.fromCurrentUser,i=e.onBanUser,l=e.onDeleteMessage,d=e.onKickUser,u=e.onReportMessage,h=e.subredditName,m=n&&n.channelId;return m?r.a.createElement(Se,{className:e.className},t&&!o?r.a.createElement(r.a.Fragment,null,r.a.createElement(Ne,{onClick:()=>l(m,s,h)},r.a.createElement(_e.f,null)),r.a.createElement(Ne,{onClick:()=>u(m,s,h)},r.a.createElement(_e.b,null)),r.a.createElement(Ne,{onClick:()=>c&&d(m,c.userId,h)},r.a.createElement(_e.e,null)),r.a.createElement(Ne,{onClick:()=>c&&h&&i(m,c.userId,h)},r.a.createElement(_e.c,null))):o?r.a.createElement(Ne,{onClick:()=>l(m,s,h)},r.a.createElement(_e.f,null)):r.a.createElement(Ne,{onClick:()=>u(m,s,h)},r.a.createElement(_e.b,null))):null}),Te=n("./src/chat/components/Message/FailedMenu.m.less"),Me=n.n(Te);const De=i.a.div("ButtonControls",Me.a),Ae=i.a.span("Text",Me.a),Le=i.a.wrapped(_e.a,"Button",Me.a);var Ue=Object(o.b)(void 0,(e,{channelId:t})=>({onResend:n=>e(Object(g.v)(t,n)),onDelete:t=>e(Object(g.u)({clientMessageId:t}))}))(class extends c.Component{constructor(){super(...arguments),this.handleResend=(()=>this.props.onResend(this.props.clientMessageId)),this.handleDelete=(()=>this.props.onDelete(this.props.clientMessageId))}render(){return r.a.createElement(De,null,r.a.createElement(Ae,null,Object(_.a)("en","app.chat.message.failedToSend")+":"),r.a.createElement(Le,{primaryNoBorder:!0,onClick:this.handleResend},Object(_.a)("en","app.button.resend")),r.a.createElement(Le,{warningNoBorder:!0,onClick:this.handleDelete},Object(_.a)("en","app.button.delete")))}}),Be=n("./src/chat/helpers/linkParser/index.ts"),Re=n("./src/chat/components/Message/Link.m.less"),Pe=n.n(Re);const He=i.a.wrapped(e=>r.a.createElement("a",{className:Object(Oe.a)(e.className,{[Pe.a.noUnderline]:e.noUnderline}),href:Object(Be.c)(e.href),target:e.target,rel:e.rel},e.children),"Link",Pe.a),Fe=i.a.span("LinkedText",Pe.a),Ke=i.a.span("NameWrapper",Pe.a),Ge=i.a.img("Favicon",Pe.a),ze=i.a.span("Name",Pe.a),We=i.a.span("DetailsWrapper",Pe.a),Ve=i.a.span("Title",Pe.a),qe=i.a.p("Description",Pe.a),Je=i.a.wrapped(e=>r.a.createElement("span",{className:e.className,style:{backgroundImage:`url("${e.thumbnailUrl}")`}}),"Thumbnail",Pe.a),Ze=e=>r.a.createElement(He,{noUnderline:e.noUnderline,href:Object(Be.c)(e.href),target:e.target,rel:e.rel},e.children),Qe=e=>e.isEmbed?(e=>r.a.createElement(Ze,Object.assign({},e),r.a.createElement(Ke,null,r.a.createElement(Ge,{src:e.favicon}),r.a.createElement(ze,null,e.name)),r.a.createElement(We,null,r.a.createElement("span",null,r.a.createElement(Ve,null,e.title),r.a.createElement(qe,null,e.description)),e.thumbnailUrl&&r.a.createElement(Je,{thumbnailUrl:e.thumbnailUrl}))))(e):(e=>e.href?r.a.createElement(Ze,Object.assign({},e),e.children):r.a.createElement(Fe,Object.assign({},e),e.children))(e);var Ye=n("./node_modules/lodash/isEmpty.js"),Xe=n.n(Ye),$e=n("./src/chat/icons/svgs/Trash/index.tsx"),et=n("./src/chat/components/MessageReportDialog/ActionMenu.m.less"),tt=n.n(et);const nt=i.a.wrapped(e=>r.a.createElement(G.a,{className:e.className,viewBox:"0 0 14 11"},r.a.createElement("path",{d:"M13.1656,4.55472 L12.0464,3.43472 C11.896,3.28432 11.6928,3.20032 11.4808,3.20032 C11.268,3.20032 11.0648,3.28432 10.9152,3.43472 L5.32,9.02912 L3.0856,6.79472 C2.7736,6.48192 2.2672,6.48192 1.9544,6.79472 L0.8344,7.91472 C0.5216,8.22752 0.5216,8.73392 0.8344,9.04592 L4.7544,12.96592 C4.9112,13.12192 5.1152,13.20032 5.32,13.20032 C5.5248,13.20032 5.7296,13.12192 5.8856,12.96592 L13.1656,5.68592 C13.4784,5.37312 13.4784,4.86752 13.1656,4.55472",transform:"translate(0 -3)"})),"Approve",tt.a),at=i.a.wrapped($e.a,"Trash",tt.a),st=i.a.div("ButtonControls",tt.a),ct=i.a.wrapped(_e.a,"Button",tt.a),rt=i.a.span("ButtonText",tt.a);var ot=Object(o.b)(void 0,e=>({onDelete:(t,n)=>e(Object(g.w)(t,n)),onIgnore:(t,n)=>e(Object(g.x)(t,n))}))(class extends c.Component{render(){var e=this.props;const t=e.onDelete,n=e.onIgnore,a=e.reportedChannelId,s=e.reportedMessageId;return r.a.createElement(st,null,r.a.createElement(ct,{primaryNoBorder:!0,onClick:()=>t(s,a)},r.a.createElement(at,null),r.a.createElement(rt,null,Object(_.a)("en","app.chat.reportedMessage.button.delete"))),r.a.createElement(ct,{primaryNoBorder:!0,onClick:()=>n(s,a)},r.a.createElement(nt,null),r.a.createElement(rt,null,Object(_.a)("en","app.chat.reportedMessage.button.ignore"))))}}),it=n("./node_modules/lodash/difference.js"),lt=n.n(it),dt=n("./node_modules/lodash/noop.js"),ut=n.n(dt),ht=n("./src/higherOrderComponents/asTooltip.tsx"),mt=n("./src/chat/actions/tooltip.ts"),bt=n("./src/chat/selectors/platform.ts");const pt=me.Ban,gt=me.Block,Ot=me.Report,jt=me.Kick,ft=e=>async(t,n)=>{const a=n(),s=Object(bt.d)(a),c=Object(bt.e)(a);s&&t(Object(fe.b)(Object(Ie.userActionUrl)(s,e,gt,c)))};var Ct;!function(e){e.AddToRoom="addToRoom",e.AddToGroup="addToGroup",e.Ban="ban",e.Block="block",e.CopyLink="copyLink",e.Kick="kick",e.Leave="leave",e.LeaveRoom="leaveRoom",e.LockRoom="lockRoom",e.MuteChannel="muteChannel",e.Profile="profile",e.Report="report",e.RenameGroup="renameGroup",e.UnlockRoom="unlockRoom",e.UnmuteChannel="unmuteChannel",e.ViewMembers="members"}(Ct||(Ct={}));var Et=Ct;const _t=Et.AddToGroup,It=Et.AddToRoom,vt=Et.Ban,yt=Et.Block,xt=Et.CopyLink,St=Et.Kick,Nt=Et.Leave,wt=Et.LeaveRoom,kt=Et.LockRoom,Tt=Et.MuteChannel,Mt=Et.Profile,Dt=Et.Report,At=Et.RenameGroup,Lt=Et.UnlockRoom,Ut=Et.UnmuteChannel,Bt=Et.ViewMembers,Rt={directChannel:[Mt,yt,Tt,Ut],groupChannel:[At,Bt,_t,Nt,Tt,Ut],subredditChannel:[It,xt,wt,kt,Tt,Lt,Ut,Bt],members:[yt,Dt,St,vt]},Pt={lockRoom:(e,t,n)=>!(e===kt&&(!t||n)),unlockRoom:(e,t,n)=>!!(e!==Lt||t&&n),copyLink:(e,t)=>!(e===xt&&!t),muteChannel:(e,t)=>!(e===Tt&&t),unmuteChannel:(e,t)=>!(e===Ut&&!t)},Ht="dropdown-container";var Ft=n("./src/chat/controls/Dropdown/index.tsx"),Kt=n("./src/chat/controls/Dropdown/Row.tsx"),Gt=n("./src/chat/helpers/dom.ts"),zt=e=>r.a.createElement(G.a,Object.assign({},e,{viewBox:"0 0 14 4"}),r.a.createElement("g",{transform:"translate(-475.000000, -286.000000)"},r.a.createElement("path",{d:"M485.479375,287.804009 C485.479375,288.796214 486.265328,289.608018 487.225938,289.608018 C488.186547,289.608018 488.9725,288.796214 488.9725,287.804009 C488.9725,286.811804 488.186547,286 487.225938,286 C486.265328,286 485.479375,286.811804 485.479375,287.804009 M480.239688,287.804009 C480.239688,288.796214 481.025641,289.608018 481.98625,289.608018 C482.946859,289.608018 483.732813,288.796214 483.732813,287.804009 C483.732813,286.811804 482.946859,286 481.98625,286 C481.025641,286 480.239688,286.811804 480.239688,287.804009 M478.493125,287.804009 C478.493125,286.811804 477.707172,286 476.746563,286 C475.785953,286 475,286.811804 475,287.804009 C475,288.796214 475.785953,289.608018 476.746563,289.608018 C477.707172,289.608018 478.493125,288.796214 478.493125,287.804009"}))),Wt=n("./src/chat/components/MemberActionDropdown/index.m.less"),Vt=n.n(Wt);const qt=i.a.wrapped(e=>r.a.createElement("span",{className:Object(Oe.a)({[Vt.a.active]:e.id===e.dropdownId},e.className)},e.children),"Wrapper",Vt.a),Jt=Object(ht.a)(i.a.wrapped(Ft.a,"Component",Vt.a)),Zt=i.a.wrapped(Kt.a,"DropdownRow",Vt.a),Qt=i.a.wrapped(_e.d,"IconButton",Vt.a),Yt=e=>r.a.createElement("span",{className:e.className,id:e.id,onClick:e.onClick,role:"button"},r.a.createElement(Qt,null,r.a.createElement(zt,null))),Xt=Object(K.a)({dropdownId:e=>e.tooltipId||"",currentUserIsChannelMod:S.a});var $t=Object(o.b)(Xt,(e,t)=>({onOpenDropdown:()=>e((e=>async(t,n)=>{t(Object(mt.c)({tooltipId:e})),t(Object(Ce.A)())})(t.id)),onBlockUser:t=>e(ft(t)),onReportUser:t=>e((e=>async(t,n)=>{const a=n(),s=Object(bt.d)(a),c=Object(bt.e)(a);s&&t(Object(fe.b)(Object(Ie.userActionUrl)(s,e,Ot,c)))})(t)),onBanUser:t=>{e((e=>async(t,n)=>{const a=n(),s=Object(S.x)(a),c=Object(bt.e)(a);s&&t(Object(fe.b)(Object(Ie.userActionUrl)(s,e,pt,c)))})(t)),e(Object(Ce.a)(ve.b.ChatSettings))},onKickUser:t=>e((e=>async(t,n)=>{const a=n(),s=Object(bt.d)(a),c=Object(bt.e)(a);s&&t(Object(fe.b)(Object(Ie.userActionUrl)(s,e,jt,c,{source:ve.b.ChatSettings})))})(t))}))(class extends c.Component{constructor(){super(...arguments),this.onOptionClick=(e=>{switch(e){case Ct.Block:return this.props.onBlockUser(this.props.userId);case Ct.Report:return this.props.onReportUser(this.props.userId);case Ct.Kick:return this.props.onKickUser(this.props.userId);case Ct.Ban:return this.props.onBanUser(this.props.userId);default:return ut.a}}),this.getContainer=(e=>document.getElementsByClassName(this.props.containerClassName||Ht)[e]),this.getDropdownOptions=(()=>{var e=this.props;const t=e.isBlockedUser,n=e.currentUserIsChannelMod,a=Ct.Ban,s=Ct.Block,c=Ct.Kick;return t&&!n?lt()(Rt.members,[s,a,c]):n?t?lt()(Rt.members,[s]):Rt.members:lt()(Rt.members,[a,c])})}render(){var e=this.props;const t=e.className,n=e.dropdownId,a=e.dropdownIndex,s=e.id,c=e.onOpenDropdown,o=this.getDropdownOptions,i=this.getContainer,l=o();return r.a.createElement(qt,{className:t,id:s,dropdownId:n},r.a.createElement(Yt,{id:s,menu:!0,onClick:Object(Gt.b)(c)}),r.a.createElement(Jt,{tooltipId:s,isOpen:n===s,container:i(a),closeOnClickOutside:!0},l.map((e,t)=>r.a.createElement(Zt,{key:t,displayText:Object(_.a)("en",`app.chat.members.dropdown.options.${e}`),onClick:Object(Gt.b)(()=>this.onOptionClick(e))}))))}}),en=n("./src/chat/components/ChatIcon/index.m.less"),tn=n.n(en);const nn=i.a.wrapped(ae,"Userpic",tn.a),an=i.a.wrapped(nn,"TopUserpic",tn.a),sn=i.a.wrapped(nn,"BottomUserpic",tn.a);var cn=i.a.wrapped(e=>r.a.createElement("span",{className:e.className},e.secondUserId?r.a.createElement(r.a.Fragment,null,r.a.createElement(an,{userId:e.userId}),",",r.a.createElement(sn,{userId:e.secondUserId})):r.a.createElement(nn,{userId:e.userId})),"IconWrapper",tn.a),rn=n("./src/chat/controls/TimeStamp/index.m.less"),on=n.n(rn);var ln=i.a.wrapped(e=>{const t="number"==typeof e.date?new Date(e.date):e.date;return r.a.createElement("time",{className:e.className,dateTime:(e=>e.toISOString())(t),title:L(t)},e.children)},"TimeStamp",on.a),dn=n("./src/chat/components/MessageHeader/index.m.less"),un=n.n(dn);const hn=i.a.wrapped(ln,"TimeStamp",un.a),mn=i.a.span("UserName",un.a);var bn=i.a.wrapped(e=>r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",className:e.className,href:`${F.a.redditUrl}/user/${e.nickname}`},r.a.createElement(cn,{userId:e.userId}),r.a.createElement("span",null,r.a.createElement(mn,null,e.nickname),r.a.createElement(hn,{date:e.createdAt},M(new Date(e.createdAt))),e.children)),"UserHeader",un.a),pn=e=>r.a.createElement(G.a,{className:e.className,disable:!0,viewBox:"0 0 16 16"},r.a.createElement("g",{transform:"translate(-26.000000, -37.000000)"},r.a.createElement("path",{d:"M30.7205152,44.3911599 L31.8223802,44.3911599 C32.9364596,44.3911599 33.8428946,45.2673804 33.8428946,46.3443238 C33.8428946,46.6873548 33.5548926,46.9657568 33.2000329,46.9657568 L29.3428625,46.9657568 C28.9880028,46.9657568 28.7000008,46.6873548 28.7000008,46.3443238 C28.7000008,45.2673804 29.6064358,44.3911599 30.7205152,44.3911599 Z M32.7044508,42.3845527 C32.7044508,43.1482939 32.0615891,43.7697269 31.271512,43.7697269 C30.4814349,43.7697269 29.8385732,43.1482939 29.8385732,42.3845527 C29.8385732,41.6208116 30.4814349,41 31.271512,41 C32.0615891,41 32.7044508,41.6208116 32.7044508,42.3845527 Z M35.8634091,47.1254029 L36.9652741,47.1254029 C38.0793535,47.1254029 38.9857885,48.0016234 38.9857885,49.0785668 C38.9857885,49.4215978 38.6977865,49.6999998 38.3429268,49.6999998 L34.4857564,49.6999998 C34.1308967,49.6999998 33.8428946,49.4215978 33.8428946,49.0785668 C33.8428946,48.0016234 34.7493297,47.1254029 35.8634091,47.1254029 Z M37.8473447,45.1187958 C37.8473447,45.8825369 37.2044829,46.5039699 36.4144059,46.5039699 C35.6243288,46.5039699 34.9814671,45.8825369 34.9814671,45.1187958 C34.9814671,44.3550546 35.6243288,43.734243 36.4144059,43.734243 C37.2044829,43.734243 37.8473447,44.3550546 37.8473447,45.1187958 Z"}))),gn=e=>r.a.createElement(G.a,Object.assign({},e,{viewBox:"0 0 16 16"}),r.a.createElement("path",{d:"M10.224 7.109c-.623.623-1.709.623-2.332 0a1.652 1.652 0 0 1 0-2.332 1.64 1.64 0 0 1 1.166-.483c.44 0 .855.172 1.166.483a1.652 1.652 0 0 1 0 2.332m.915-3.247A2.923 2.923 0 0 0 9.06 3c-.787 0-1.525.306-2.082.862a2.946 2.946 0 0 0-.403 3.65l-1.76 1.761-.812.811v.001L4 10.087l-.81.81a.646.646 0 0 0 0 .915l.81.811h.001l.27.27a.643.643 0 0 0 .916 0 .648.648 0 0 0 0-.914l-.271-.27a.502.502 0 0 1 0-.708.512.512 0 0 1 .709 0l.27.27a.648.648 0 0 0 .915-.915l-.624-.625L7.49 8.427a2.924 2.924 0 0 0 3.65-.403 2.945 2.945 0 0 0 0-4.162"})),On=n("./src/chat/components/MessageReportDialog/Header.m.less"),jn=n.n(On);const fn=i.a.wrapped(pn,"Group",jn.a),Cn=i.a.wrapped(gn,"Key",jn.a),En=i.a.wrapped($t,"MemberActionDropdown",jn.a),_n=i.a.wrapped(bn,"MessageHeaderLink",jn.a),In=i.a.h5("ChannelName",jn.a),vn=i.a.span("TextOverflow",jn.a),yn=i.a.wrapped(_e.d,"IconButton",jn.a),xn=i.a.div("Header",jn.a);var Sn=e=>{const t=e.channelId,n=e.channelIsPublic,a=e.channelName,s=e.messageCreatedAt,c=e.messageId,o=e.reportedUserId,i=e.reportedUserName,l=`UserAction--Item-${c}`;return r.a.createElement(xn,null,r.a.createElement(_n,{createdAt:s,nickname:i,userId:o},r.a.createElement(In,null,n?r.a.createElement(fn,null):r.a.createElement(Cn,null),r.a.createElement(vn,null,a))),r.a.createElement(En,{channelId:t,containerClassName:l,className:l,dropdownIndex:0,id:`UserAction--Select-${c}`,isBlockedUser:!1,userId:o},r.a.createElement(yn,null,r.a.createElement(zt,null))))},Nn=n("./src/chat/components/MessageReportDialog/index.m.less"),wn=n.n(Nn);const kn=i.a.p("ReasonText",wn.a),Tn=i.a.p("DeleteText",wn.a),Mn=i.a.p("AcceptText",wn.a);var Dn=e=>{var t=e.report;const n=t.actions,a=t.channelId,s=t.channelIsPublic,c=t.channelName,o=t.messageCreatedAt,i=t.messageValue,l=t.messageId,d=t.reason,u=t.reportedUserId,h=t.reportedUserName;return r.a.createElement(r.a.Fragment,null,a&&c&&s&&l&&o&&u&&h&&r.a.createElement(Sn,{channelId:a,channelIsPublic:s,channelName:c,messageCreatedAt:o,messageId:l,reportedUserId:u,reportedUserName:h}),i,r.a.createElement(kn,null,C()(Object(_.a)("en","app.chat.reportedMessage.action.report"))({reason:d})),n&&n.deleted&&r.a.createElement(Tn,null,C()(Object(_.a)("en","app.chat.reportedMessage.action.delete"))({username:n.deleted.userName})),n&&n.ignored&&r.a.createElement(Mn,null,C()(Object(_.a)("en","app.chat.reportedMessage.action.approve"))({username:n.ignored.userName})),Xe()(n)&&r.a.createElement(ot,{reportedMessageId:e.message.messageId,reportedChannelId:e.message.channelId}))};const An=["snoo_heart_eyes_pride","snoo_give_upvote_pride","upvote_pride","snoo","snoo_simple_smile","snoo_smile","snoo_joy","snoo_tongue","snoo_wink","snoo_sad","snoo_biblethump","snoo_angry","snoo_disapproval","snoo_trollface","snoo_dealwithit","snoo_facepalm","snoo_shrug","snoo_scream","snoo_thoughtful","snoo_surprised","snoo_hearteyes","snoo_hug","snoo_feelsbadman","snoo_feelsgoodman","snoo_putback","snoo_tableflip","upvote","downvote","karma","cake","redditgold","illuminati","kappa","sloth","cat_blep","pupper","partyparrot","orly","hamster","doge"];var Ln={simple_smile:`${F.a.assetPath}/img/snoomoji/snoo_simple_smile.png`,smile:`${F.a.assetPath}/img/snoomoji/snoo_smile.png`,joy:`${F.a.assetPath}/img/snoomoji/snoo_joy.png`,tongue:`${F.a.assetPath}/img/snoomoji/snoo_tongue.png`,wink:`${F.a.assetPath}/img/snoomoji/snoo_wink.png`,sad:`${F.a.assetPath}/img/snoomoji/snoo_sad.png`,biblethump:`${F.a.assetPath}/img/snoomoji/snoo_cry.png`,angry:`${F.a.assetPath}/img/snoomoji/snoo_angry.png`,disapproval:`${F.a.assetPath}/img/snoomoji/snoo_disapproval.png`,trollface:`${F.a.assetPath}/img/snoomoji/snoo_trollface.png`,dealwithit:`${F.a.assetPath}/img/snoomoji/snoo_dealwithit.png`,facepalm:`${F.a.assetPath}/img/snoomoji/snoo_facepalm.png`,shrug:`${F.a.assetPath}/img/snoomoji/snoo_shrug.png`,scream:`${F.a.assetPath}/img/snoomoji/snoo_scream.png`,thoughtful:`${F.a.assetPath}/img/snoomoji/snoo_thoughtful.png`,surprised:`${F.a.assetPath}/img/snoomoji/snoo_surprised.png`,hearteyes:`${F.a.assetPath}/img/snoomoji/snoo_hearteyes.png`,tableflip:`${F.a.assetPath}/img/snoomoji/snoo_tableflip.png`,putback:`${F.a.assetPath}/img/snoomoji/snoo_putback.png`,hug:`${F.a.assetPath}/img/snoomoji/snoo_hug.png`,feelsbadman:`${F.a.assetPath}/img/snoomoji/snoo_feelsbadman.png`,feelsgoodman:`${F.a.assetPath}/img/snoomoji/snoo_feelsgoodman.png`,snoo:`${F.a.assetPath}/img/snoomoji/snoo.png`,snoo_simple_smile:`${F.a.assetPath}/img/snoomoji/snoo_simple_smile.png`,slightly_smiling:`${F.a.assetPath}/img/snoomoji/snoo_simple_smile.png`,snoo_smile:`${F.a.assetPath}/img/snoomoji/snoo_smile.png`,snoo_joy:`${F.a.assetPath}/img/snoomoji/snoo_joy.png`,snoo_tongue:`${F.a.assetPath}/img/snoomoji/snoo_tongue.png`,stuck_out_tongue:`${F.a.assetPath}/img/snoomoji/snoo_tongue.png`,snoo_wink:`${F.a.assetPath}/img/snoomoji/snoo_wink.png`,snoo_sad:`${F.a.assetPath}/img/snoomoji/snoo_sad.png`,snoo_biblethump:`${F.a.assetPath}/img/snoomoji/snoo_cry.png`,cry:`${F.a.assetPath}/img/snoomoji/snoo_cry.png`,snoo_angry:`${F.a.assetPath}/img/snoomoji/snoo_angry.png`,snoo_disapproval:`${F.a.assetPath}/img/snoomoji/snoo_disapproval.png`,snoo_trollface:`${F.a.assetPath}/img/snoomoji/snoo_trollface.png`,snoo_dealwithit:`${F.a.assetPath}/img/snoomoji/snoo_dealwithit.png`,sunglasses:`${F.a.assetPath}/img/snoomoji/snoo_dealwithit.png`,snoo_facepalm:`${F.a.assetPath}/img/snoomoji/snoo_facepalm.png`,snoo_shrug:`${F.a.assetPath}/img/snoomoji/snoo_shrug.png`,snoo_scream:`${F.a.assetPath}/img/snoomoji/snoo_scream.png`,snoo_thoughtful:`${F.a.assetPath}/img/snoomoji/snoo_thoughtful.png`,snoo_surprised:`${F.a.assetPath}/img/snoomoji/snoo_surprised.png`,flushed:`${F.a.assetPath}/img/snoomoji/snoo_surprised.png`,snoo_hearteyes:`${F.a.assetPath}/img/snoomoji/snoo_hearteyes.png`,heart_eyes:`${F.a.assetPath}/img/snoomoji/snoo_hearteyes.png`,snoo_tableflip:`${F.a.assetPath}/img/snoomoji/snoo_tableflip.png`,table_flip:`${F.a.assetPath}/img/snoomoji/snoo_tableflip.png`,snoo_putback:`${F.a.assetPath}/img/snoomoji/snoo_putback.png`,table:`${F.a.assetPath}/img/snoomoji/snoo_putback.png`,snoo_hug:`${F.a.assetPath}/img/snoomoji/snoo_hug.png`,snoo_feelsbadman:`${F.a.assetPath}/img/snoomoji/snoo_feelsbadman.png`,feels_bad_man:`${F.a.assetPath}/img/snoomoji/snoo_feelsbadman.png`,snoo_feelsgoodman:`${F.a.assetPath}/img/snoomoji/snoo_feelsgoodman.png`,feels_good_man:`${F.a.assetPath}/img/snoomoji/snoo_feelsgoodman.png`,upvote:`${F.a.assetPath}/img/snoomoji/upvote.png`,downvote:`${F.a.assetPath}/img/snoomoji/downvote.png`,karma:`${F.a.assetPath}/img/snoomoji/karma.png`,cake:`${F.a.assetPath}/img/snoomoji/cake.png`,redditgold:`${F.a.assetPath}/img/snoomoji/redditgold.png`,gold:`${F.a.assetPath}/img/snoomoji/redditgold.png`,illuminati:`${F.a.assetPath}/img/snoomoji/illuminati.png`,kappa:`${F.a.assetPath}/img/snoomoji/kappa.png`,sloth:`${F.a.assetPath}/img/snoomoji/sloth.png`,cat_blep:`${F.a.assetPath}/img/snoomoji/cat_blep.png`,pupper:`${F.a.assetPath}/img/snoomoji/pupper.png`,partyparrot:`${F.a.assetPath}/img/snoomoji/partyparrot.gif`,party_parrot:`${F.a.assetPath}/img/snoomoji/partyparrot.gif`,orly:`${F.a.assetPath}/img/snoomoji/orly.png`,o_rly_owl:`${F.a.assetPath}/img/snoomoji/orly.png`,party_pigeon:`${F.a.assetPath}/img/snoomoji/orly.png`,partypigeon:`${F.a.assetPath}/img/snoomoji/orly.png`,hamster:`${F.a.assetPath}/img/snoomoji/hamster.png`,doge:`${F.a.assetPath}/img/snoomoji/doge.png`,upvote_pride:`${F.a.assetPath}/img/snoomoji/upvote_pride.png`,snoo_heart_eyes_pride:`${F.a.assetPath}/img/snoomoji/heart_eyes_pride.png`,snoo_give_upvote_pride:`${F.a.assetPath}/img/snoomoji/give_upvote_pride.png`};const Un=e=>e.emojis&&e.emojis.snoomojis;var Bn=n("./src/chat/components/Snoomoji/index.m.less"),Rn=n.n(Bn);const Pn=i.a.img("SnooImg",Rn.a),Hn=Object(K.a)({snoomojis:Un});var Fn=Object(o.b)(Hn)(e=>{const t=e.className,n=e.iconName,a=n&&Ln[n]||Ln.smile;return r.a.createElement(Pn,{className:t,src:a})}),Kn=n("./src/chat/components/Message/Bubble.m.less"),Gn=n.n(Kn);const zn=Ee.c.PENDING,Wn=Ee.b.TEXT,Vn=Ee.b.POST,qn=Ee.b.EMBED,Jn=Ee.b.SNOOMOJI,Zn=i.a.wrapped(ke,"ActionButtonGroup",Gn.a),Qn=i.a.wrapped(e=>r.a.createElement("div",{className:Object(Oe.a)(e.className,{[Gn.a.dark]:e.darkBackground,[Gn.a.disabled]:e.disabled,[Gn.a.withBorder]:e.withBorder})},e.children,e.withButton&&e.message.messageType!==zn&&r.a.createElement(Zn,{message:e.message,subredditName:e.subredditName,fromCurrentUser:e.fromCurrentUser})),"MessageBubble",Gn.a),Yn=(e,t,n,a)=>r.a.createElement(Qe,{key:ge()(),href:e,target:n,rel:"noopener noreferrer",noUnderline:a===je.c.mention||a===je.c.profile||a===je.c.profileFull||a===je.c.subreddit||a===je.c.subredditFull},t),Xn=e=>{const t=e.value,n=e.highlighMentionGroupLinks,a=!(!n||!n.length),s=Object(Be.a)(t,a,Yn);return r.a.createElement($n,null,s)},$n=i.a.pre("MessageText",Gn.a),ea=i.a.div("Snoo",Gn.a);var ta=i.a.wrapped(e=>{const t=e.className,n=e.embedText,a=e.darkBackground,s=e.fromCurrentUser,c=e.message,o=e.withButton,i=e.inPreview,l=e.subredditName;if(c){var d=c.messageData;const e=d.type,u=d.report,h=((e,t,n)=>{const a=e.messageType,s=e.messageData;var c=e.messageData;const o=c.highlights,i=c.value;if(n)return i;switch(s.type){case qn:const e=s.embed;return t||a===zn||!e?r.a.createElement(Xn,{value:i,highlighMentionGroupLinks:o}):r.a.createElement(Qe,{isEmbed:!0,name:e.name,title:e.title,description:e.description,favicon:e.faviconUrl,thumbnailUrl:e.imageUrl,href:e.url,target:"_blank",rel:"noopener noreferrer"});case Vn:return r.a.createElement(Qe,{href:i},i);case Wn:return r.a.createElement(Xn,{value:i,highlighMentionGroupLinks:o});case Jn:return r.a.createElement(ea,null,r.a.createElement(Fn,{iconName:i}));default:return i}})(c,n,i),m=c.messageType===zn&&c.error&&c.clientMessageId;return r.a.createElement("div",{className:t},r.a.createElement(Qn,{darkBackground:a,fromCurrentUser:s,withButton:o&&!m&&!u,withBorder:e!==Jn,message:c,disabled:!!m,subredditName:l},u&&c.messageType!==zn?r.a.createElement(Dn,{report:u,message:c}):h),m&&r.a.createElement(Ue,{channelId:c.channelId,clientMessageId:m}))}return null},"MessageItemBubble",Gn.a),na=n("./node_modules/react-dom/index.js"),aa=n("./src/chat/actions/channel/subreddit.ts"),sa=n("./src/chat/components/MessageInput/locker.m.less"),ca=n.n(sa);const ra=i.a.div("LockPanel",ca.a),oa=i.a.wrapped(_e.d,"IconButton",ca.a),ia=i.a.wrapped(e=>r.a.createElement(G.a,Object.assign({},e,{viewBox:"0 0 12 12"}),r.a.createElement("g",{fill:"#FFD635",fillRule:"evenodd"},r.a.createElement("path",{d:"M3.857 3.571C3.857 2.39 4.82 1.43 6 1.43c1.181 0 2.143.961 2.143 2.142V5H3.857V3.571zM10.286 5H9.57V3.571A3.575 3.575 0 0 0 6 0a3.575 3.575 0 0 0-3.571 3.571V5h-.715A.714.714 0 0 0 1 5.714v5c0 .395.32.715.714.715h8.572c.394 0 .714-.32.714-.715v-5A.714.714 0 0 0 10.286 5z"}))),"LockIcon",ca.a);var la=Object(o.b)(void 0,(e,t)=>({onUnlockChannel:()=>e(Object(aa.v)(!1,!1))}))(class extends r.a.Component{constructor(e){super(e),this.toggleSubmitButton=this.toggleSubmitButton.bind(this),this.onUnlockChannel=this.onUnlockChannel.bind(this),this.state={isSubmitDisabled:!1}}toggleSubmitButton(e){this.setState({isSubmitDisabled:e})}onUnlockChannel(){this.toggleSubmitButton(!0),this.props.onUnlockChannel().catch(()=>{this.toggleSubmitButton(!1)})}render(){const e=Object(_.a)("en","app.chat.message.dropdown.options.unlockRoom");return r.a.createElement(ra,null,r.a.createElement(ia,null),Object(_.a)("en","app.chat.lock.lockerText"),this.props.isModerator&&r.a.createElement(oa,{primary:!0,disabled:this.state.isSubmitDisabled,onClick:this.onUnlockChannel,title:e},e))}}),da=n("./src/chat/components/MessageInput/muted.m.less"),ua=n.n(da);const ha=i.a.div("Panel",ua.a),ma=i.a.wrapped(e=>r.a.createElement(G.a,Object.assign({},e,{viewBox:"0 0 24 20"}),r.a.createElement("defs",null,r.a.createElement("path",{id:"chatMuted",d:"M13.03 10.46a.75.75 0 1 1-1.06 1.06L10 9.55l-1.97 1.97a.75.75 0 0 1-1.06 0 .75.75 0 0 1 0-1.06L8.94 8.5 6.97 6.52a.75.75 0 1 1 1.06-1.06L10 7.43l1.97-1.97a.75.75 0 1 1 1.06 1.06L11.06 8.5l1.97 1.97zM16 2H4a2 2 0 0 0-2 2v9.24c0 1.1.9 2 2 2h3.63l1.54 2.3a1 1 0 0 0 1.66 0l1.54-2.3H16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2z"})),r.a.createElement("g",{fill:"none",fillRule:"evenodd",transform:"translate(2)"},r.a.createElement("mask",{id:"chatMutedMask",fill:"#fff"},r.a.createElement("use",{xlinkHref:"#chatMuted"})),r.a.createElement("g",{fill:"#A4A7A8",mask:"url(#chatMutedMask)"},r.a.createElement("path",{d:"M0 0h20v20H0z"})))),"Icon",ua.a);var ba=()=>r.a.createElement(ha,null,r.a.createElement(ma,null),Object(_.a)("en","app.chat.muted.mutedText")),pa=n("./node_modules/lodash/debounce.js"),ga=n.n(pa),Oa=n("./src/chat/components/Scroller/index.m.less"),ja=n.n(Oa);const fa=i.a.div("Scroller",ja.a);fa.displayName="Scroller";var Ca=class extends r.a.Component{constructor(e){super(e),this.isUserScrolling=!1,this.list=null,this.previousScrollHeight=0,this.scrollHandlers=[],this._isBatchLoading=!1,this.debounceScrollToBottom=ga()(()=>this.scrollToBottom(!0),1,{leading:!1,trailing:!0}),this.debounceScrollToTop=ga()(()=>this.scrollToTop(!0),1,{leading:!1,trailing:!0}),this.addScrollHandlers=this.addScrollHandlers.bind(this),this.preventParentScroll=this.preventParentScroll.bind(this),this.paginateContent=this.paginateContent.bind(this),this.scrollHandlers=[this.preventParentScroll,this.paginateContent]}get isBatchLoading(){return this.props.isLoadMoreRowsComplete?this.props.isLoadMoreRowsComplete():this._isBatchLoading}shouldComponentUpdate(e,t){return!s()(this.props,e)||!s()(this.state,t)}componentDidMount(){this.props.autoScrollBottom&&this.scrollToBottom(),this.addScrollListener()}componentWillUnmount(){this.removeScrollListener()}componentDidUpdate(){this.paginateContentUpdate(),this.autoScrollByContentUpdate()}addScrollListener(){this.list&&this.list.addEventListener("wheel",this.addScrollHandlers,!1)}removeScrollListener(){this.list&&this.list.removeEventListener("wheel",this.addScrollHandlers,!1)}addScrollHandlers(e){this.scrollHandlers.length&&(this.isUserScrolling=!0,this.scrollHandlers.forEach(t=>t(e)))}preventParentScroll(e){if(this.list){const t=this.list.scrollTop,n=e.deltaY,a=n>0;a&&this.isScrolledToBottom(n)?(this.debounceScrollToBottom(),e.preventDefault()):!a&&-n>t&&(this.debounceScrollToTop(),e.preventDefault())}}paginateContent(){if(this.list){const t=this.list.scrollHeight;var e=this.props;const n=e.autoScrollBottom,a=e.loadMoreRows;if(a){const e=n&&this.isScrolledToTop(1),s=!n&&this.isScrolledToBottom(1);!e&&!s||this.isBatchLoading||(this._isBatchLoading=!0,this.previousScrollHeight=t,a())}}}paginateContentUpdate(){if(this.list){var e=this.list;const t=e.scrollHeight,n=e.scrollTop;this.props.autoScrollBottom&&this.isBatchLoading&&(this.list.scrollTop=n+(t-this.previousScrollHeight),this._isBatchLoading=!1)}}autoScrollByContentUpdate(){this.list&&this.props.autoScrollBottom&&(this.isScrolledToBottom()||!this.isUserScrolling)&&this.scrollToBottom()}safeScrollPadding(){return this.list?10*this.list.scrollHeight/100:0}scrollToTop(e){this.list&&(this.list.scrollTop=0,this.isUserScrolling=e||!1)}scrollToBottom(e){this.list&&(this.list.scrollTop=this.list.scrollHeight,this.isUserScrolling=e||!1)}isScrolledToBottom(e){if(this.list){var t=this.list;const n=t.clientHeight,a=t.scrollHeight,s=t.scrollTop;return(e||this.safeScrollPadding())>a-n-s}return!1}isScrolledToTop(e){if(this.list){const t=this.list.scrollTop;return(e||this.safeScrollPadding())>t}return!1}render(){var e=this.props;const t=e.children,n=e.className;return r.a.createElement(fa,{className:n,innerRef:e=>this.list=e},t)}},Ea=n("./src/chat/constants/container.ts"),_a=n("./src/chat/constants/page.ts"),Ia=n("./src/chat/icons/svgs/NavClose/index.tsx"),va=n("./src/chat/components/MessageTooltip/index.m.less"),ya=n.n(va);const xa="MessageInputTooltip--Container",Sa=i.a.wrapped(Object(ht.a)(Ft.a),"Dropdown",ya.a),Na=i.a.div("DropdownWrapper",ya.a),wa=i.a.div("Picker",ya.a),ka=i.a.h4("PickerHeader",ya.a),Ta=i.a.wrapped(_e.d,"IconButton",ya.a),Ma=i.a.wrapped(e=>r.a.createElement(Ca,{className:Object(Oe.a)(e.className,{[ya.a.embedded]:e.isEmbedded})},e.children),"PickerWrapper",ya.a);Ma.displayName="PickerWrapper";const Da=Object(K.a)({dropdownIsOpen:(e,t)=>e.tooltipId===t.id,isEmbedded:e=>!(!e.container||e.container.size!==Ea.a.EMBED)});var Aa=Object(o.b)(Da,e=>({closeTooltip:()=>e(Object(mt.d)())}))(e=>r.a.createElement(Sa,{tooltipId:xa,container:document.getElementById(_a.a),isOpen:e.isOpen||e.dropdownIsOpen,targetPosition:["left","top"],excludeContainerPosition:!0,closeOnClickOutside:!0,isOverlayOff:!0},r.a.createElement(Na,{onClick:()=>e.closeTooltip()},r.a.createElement(wa,null,r.a.createElement(ka,null,e.title,r.a.createElement(Ta,null,r.a.createElement(Ia.a,null))),r.a.createElement(Ma,{isEmbedded:e.isEmbedded},e.children))))),La=n("./node_modules/lodash/times.js"),Ua=n.n(La),Ba=n("./src/chat/components/MessageTooltip/Picker/Snoomoji.m.less"),Ra=n.n(Ba);const Pa=15,Ha=i.a.div("IconWrapper",Ra.a);Ha.displayName="IconWrapper";const Fa=i.a.span("EmptyIcons",Ra.a),Ka=i.a.div("LoadingIndicator",Ra.a),Ga=i.a.div("Wrapper",Ra.a),za=Object(K.a)({snoomojis:Un});var Wa=Object(o.b)(za)(class extends c.Component{constructor(e){super(e),this.loadCounter=0,this.snooIcons=Ln,this.snoomojiIconOrder=this.getSnoomojiPickerOrder(),this.state={isReady:!!this.props.isReady}}componentDidMount(){this.preloadIcons()}getSnoomojiPickerOrder(){const e=this.props.snoomojis,t=e?Object.keys(e):[];return[...lt()(t,An),...An]}preloadIcons(){!this.state.isReady&&this.snooIcons&&Promise.all(this.snoomojiIconOrder.map(e=>new Promise(t=>{const n=new Image;n.onload=(()=>t()),n.src=this.snooIcons[e]}))).then(()=>{this.setState({isReady:!0})})}renderSnooIcons(){return this.snoomojiIconOrder.map((e,t)=>r.a.createElement(Ha,{key:`icon-${t}`,onClick:()=>this.props.onPickSnoomoji(e)},r.a.createElement(Fn,{iconName:e})))}renderBlankItems(){return this.snoomojiIconOrder&&Ua()(Math.ceil(100/Pa),e=>r.a.createElement(Fa,{key:`empty-${e}`}))}render(){return this.state.isReady?r.a.createElement(Ga,null,this.renderSnooIcons(),this.renderBlankItems()):r.a.createElement(Ka,null,Object(_.a)("en","app.chat.message.pickers.snoomojiLoading"))}}),Va=n("./src/chat/actions/members.ts"),qa=n("./src/chat/controls/Title/index.m.less"),Ja=n.n(qa);const Za=i.a.wrapped(({bold:e,children:t,className:n})=>r.a.createElement("h4",{className:Object(Oe.a)({[Ja.a.bold]:e},n)},t),"Title",Ja.a);var Qa=n("./src/chat/selectors/members.ts"),Ya=n("./src/chat/selectors/user.ts"),Xa=n("./src/chat/components/ChatMemberList/index.m.less"),$a=n.n(Xa);const es=i.a.wrapped($t,"MemberActionDropdown",$a.a),ts=i.a.wrapped(e=>r.a.createElement("li",{onClick:e.onClick,className:Object(Oe.a)(e.className,{[$a.a.selected]:e.isSelected})},e.children),"ListItem",$a.a),ns=i.a.span("IconContainer",$a.a),as=i.a.wrapped(Za,"Title",$a.a),ss=i.a.span("Warning",$a.a),cs=Object(K.a)({channelType:e=>Object(S.A)(e,"type"),contacts:e=>e.contacts.models,members:(e,t)=>t.members||Object(Qa.b)(e,t.channelId)||[],currentUserId:Ya.a}),rs=Object(o.b)(cs,e=>({onViewProfile:t=>{e(Object(Ce.m)()),e(Object(Ce.p)()).then(()=>{window.open(`${F.a.redditUrl}/user/${t}`)})}})),os=({className:e,channelId:t,currentUserId:n,members:a,minimal:s,onClick:c,onSelectName:o,onViewProfile:i,selectIndex:l,useNSFWIcons:d})=>(((e,t,n)=>{if(n&&void 0!==t&&e.length>=t){const a=e[t];a&&n(a.name)}})(a,l,o),r.a.createElement("ul",{className:e},a&&a.map((e,a)=>r.a.createElement(ts,{key:e.name,isSelected:l===a,className:Ht,onClick:()=>{c?c(e.name):i(e.name)}},r.a.createElement(ns,null,d&&e.isNSFW?r.a.createElement(J,null):r.a.createElement(ae,{userId:e.id})),r.a.createElement(as,null,e.name),e.isNSFW&&r.a.createElement(ss,null,Object(_.a)("en","app.chat.request.nsfw")),e.isBlockedByMe&&r.a.createElement(ss,null,Object(_.a)("en","app.chat.request.blocked.label")),!s&&e.id!==n&&r.a.createElement(es,{channelId:t,containerClassName:Ht,dropdownIndex:a,id:`MemberAction--Select-${a}`,userId:e.id,isBlockedUser:e.isBlockedByMe})))));os.displayName="ChatMemberList";var is=rs(os),ls=n("./src/chat/components/MessageTooltip/Picker/Userlist.m.less"),ds=n.n(ls);const us=i.a.div("LoadingIndicator",ds.a),hs=i.a.wrapped(is,"ChatMemberList",ds.a),ms=i.a.div("Wrapper",ds.a),bs=Object(K.a)({channelId:S.x,channelMembers:Qa.f,hasMoreMembers:Qa.d,fetchingMembers:Qa.a});var ps=Object(o.b)(bs,e=>({fetchSubredditChannelUsers:t=>e(Object(Va.e)(t))}))(class extends c.Component{constructor(e){super(e),this.fetchedFilter="",this.isMount=!1,this.fetchSubredditChannelUsers=ga()((e="")=>{this.props.fetchSubredditChannelUsers(e)},b.Db,{leading:!0,trailing:!1}),this.onKeyUpListener=(e=>{this.isMount&&(this.setState({selectIndex:Math.max(this.state.selectIndex-1,0)}),e.preventDefault(),e.stopPropagation())}),this.onKeyDownListener=(e=>{this.isMount&&void 0!==this.members&&(this.setState({selectIndex:Math.min(this.state.selectIndex+1,this.members.length-1)}),e.preventDefault(),e.stopPropagation())}),this.props.bindKeyUp(this.onKeyUpListener),this.props.bindKeyDown(this.onKeyDownListener),this.state={selectIndex:0,userName:this.props.inputUserName||""}}componentDidMount(){this.isMount=!0;const e=this.props.channelMembers;e&&e&&e.length||this.fetchSubredditChannelUsers()}componentWillReceiveProps(e){this.props.bindKeyUp!==e.bindKeyUp&&e.bindKeyUp(this.onKeyUpListener),this.props.bindKeyDown!==e.bindKeyDown&&e.bindKeyDown(this.onKeyDownListener),this.props.inputUserName!==e.inputUserName&&this.setState({userName:e.inputUserName})}componentWillUnmount(){this.isMount=!1}filterMembers(){const e=this.state.userName;var t=this.props;const n=t.channelMembers,a=t.fetchingMembers;if(!e.length)return n||[];const s=n&&n.length&&n.filter(t=>t.name.toLowerCase().startsWith(e.toLowerCase()))||n||[];return s.length||a||this.fetchedFilter===e||(this.fetchedFilter=e,this.fetchSubredditChannelUsers(e)),s||[]}render(){var e=this.props;const t=e.channelId,n=e.onPickUserName,a=e.onSelectUserName,s=e.fetchingMembers;return this.members=this.filterMembers(),this.members&&this.members.length&&t?r.a.createElement(ms,null,r.a.createElement(hs,{minimal:!0,channelId:t,members:this.members,onClick:n,onSelectName:a,selectIndex:this.state.selectIndex,useNSFWIcons:!0})):s||this.members&&this.members.length?r.a.createElement(us,null,Object(_.a)("en","app.chat.message.pickers.userlistLoading")):r.a.createElement(us,null,Object(_.a)("en","app.chat.message.pickers.memberNotFound"))}});const gs="Backspace",Os="Enter",js="ArrowLeft",fs="ArrowUp",Cs="ArrowRight",Es="ArrowDown",_s="Delete";var Is=n("./src/chat/singleton/SendbirdSDK.ts"),vs=n("./src/chat/controls/ContentEditable/index.m.less"),ys=n.n(vs);const xs=i.a.textarea("Textarea",ys.a);var Ss=e=>r.a.createElement(G.a,Object.assign({},e,{viewBox:"0 0 330 330"}),r.a.createElement("path",{d:"M165 0a165 165 0 1 0 0 330 165 165 0 0 0 0-330zM81 133a20 20 0 0 1 20-20 20 20 0 0 1 20 20 20 20 0 0 1-20 20 20 20 0 0 1-20-20zm146 94a86 86 0 0 1-124 0 15 15 0 0 1 11-26h102a15 15 0 0 1 11 26zm16-80a20 20 0 0 1-28 0 20 20 0 0 1 0-28 20 20 0 0 1 28 0 20 20 0 0 1 0 28z"})),Ns=n("./src/chat/components/MessageInput/index.m.less"),ws=n.n(Ns);const ks="MessageInputTooltip--Snoomoji",Ts="MessageInputTooltip--Userlist",Ms=i.a.wrapped(_e.d,"SubmitButton",ws.a);Ms.displayName="SubmitButton";const Ds=i.a.wrapped(e=>r.a.createElement(G.a,Object.assign({},e,{viewBox:"0 0 18 18"}),r.a.createElement("path",{d:"M17.98 8.87c-.012-.093-.03-.182-.062-.27-.017-.043-.034-.085-.055-.126-.013-.026-.02-.057-.034-.082l-.07-.1c-.018-.02-.04-.03-.055-.046-.073-.083-.158-.145-.252-.204-.032-.02-.053-.055-.088-.072L3.88 1.12c-.35-.176-.764-.158-1.096.05-.332.208-.534.576-.534.973V5c0 .507.33.954.81 1.097L9 7.857H3.375c-.175 0-.347.04-.503.12L.622 9.12c-.48.243-.724.8-.582 1.325.135.5.582.84 1.085.84.027 0 .054 0 .08-.003l1.045-.075v4.65c0 .396.202.764.534.972.18.112.386.17.59.17.173 0 .346-.04.505-.12l13.483-6.85c.08-.044.134-.075.184-.113.05-.038.092-.085.136-.13.012-.013.026-.022.037-.036.092-.107.147-.21.19-.32.013-.03.02-.06.03-.09.013-.045.033-.086.042-.132.008-.046.013-.09.017-.138 0-.023-.008-.043-.008-.063 0-.017.008-.03.008-.048 0-.032-.017-.058-.02-.09z"})),"SendIcon",ws.a),As=i.a.form("Form",ws.a),Ls=i.a.div("Wrapper",ws.a),Us=i.a.div("Icons",ws.a),Bs=i.a.wrapped(class extends r.a.Component{constructor(e){super(e),this.offset=0,this._ref=r.a.createRef(),this.emitChange=this.emitChange.bind(this),this.emitChangeOnce=this.emitChangeOnce.bind(this),this.handleKeyPress=this.handleKeyPress.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleSizing=this.handleSizing.bind(this)}get textarea(){return this._ref.current}componentDidMount(){if(this.textarea){const e=this.textarea;this.offset=e.offsetHeight-e.clientHeight,this.handleSizing()}}componentWillReceiveProps(e){this.props.channelId!==e.channelId&&this.textarea&&(this.textarea.value=""),this.textarea&&this.textarea.value.length?Is.b.startTypingIndicator():Is.b.endTypingIndicator(),this.textarea&&e.textUpdate&&e.textUpdate.length&&(this.textarea.value=e.textUpdate,this.props.onChangeOnce(this.textarea.value),this.handleSizing())}componentDidUpdate(){this.textarea&&this.textarea.focus()}emitChange(e){const t=e.currentTarget.value;this.props.onChange(t),this.handleSizing()}emitChangeOnce(e){const t=e.currentTarget.value;this.props.onChangeOnce(t)}handleKeyPress(e){e.key!==Os||e.shiftKey||(e.preventDefault(),this.props.onSubmit()),this.handleSizing()}handleKeyDown(e){e.key===fs&&this.props.onKeyUp(e),e.key===Es&&this.props.onKeyDown(e),this.handleSizing()}handleSizing(){if(this.textarea){const e=this.textarea;e.style.height="auto",e.style.height=e.scrollHeight+this.offset+"px"}}render(){return r.a.createElement(xs,{innerRef:this._ref,rows:1,className:this.props.className,"aria-label":"Message #chat","aria-multiline":!0,"aria-haspopup":!0,autoCorrect:"off",autoComplete:"off",role:"textbox",placeholder:Object(_.a)("en","app.chat.message.placeholder"),onKeyPress:this.handleKeyPress,onKeyDown:this.handleKeyDown,onInput:this.emitChange,onBlur:this.emitChange,onChange:e=>{this.emitChange(e),this.emitChangeOnce(e)}})}},"ContentEditable",ws.a),Rs=i.a.wrapped(e=>r.a.createElement("div",{className:Object(Oe.a)({[ws.a.active]:e.active},e.className),onClick:e.onClick},e.children),"IconButton",ws.a),Ps=Object(K.a)({activeDropdownId:e=>e.tooltipId||void 0});var Hs=Object(o.b)(Ps,(e,{channelId:t})=>({onSubmitText:n=>e(Object(g.n)(t,n,Ee.b.TEXT)),onSubmitSnoo:n=>e(Object(g.n)(t,n,Ee.b.SNOOMOJI)),toggleSnoomojiTooltip:t=>{e(Object(Ce.C)(t)),e(Object(mt.c)({tooltipId:t}))},toggleUserlistTooltip:t=>{e(Object(mt.c)({tooltipId:t}))}}))(class extends c.PureComponent{constructor(e){super(e),this.editableContent=null,this.selectUserName="",this.handleChangeText=(e=>{this.setState({text:e.trim()})}),this.handleChangeOnce=(e=>{this.toggleUserlistTooltipByTextChange(e),this.cleanTextUpdate()}),this.sendEnabled=(()=>!!this.state.text),this.onKeyUpUserlistListener=ut.a,this.onKeyDownUserlistListener=ut.a,this.handleSubmitText=this.handleSubmitText.bind(this),this.handleSubmitSnoo=this.handleSubmitSnoo.bind(this),this.state={text:"",textUpdate:"",inputUserName:""}}componentWillReceiveProps(e){this.props.channelId!==e.channelId&&this.clearText()}cleanTextUpdate(){this.setState({textUpdate:""})}clearText(){if(!this.editableContent)return;const e=Object(na.findDOMNode)(this.editableContent);e&&(e.value="",e.style.height="auto",this.setState({text:""}),this.cleanTextUpdate())}handleSubmitText(){this.sendEnabled()&&(this.props.activeDropdownId===Ts?this.onPickUserName(this.selectUserName||this.state.inputUserName):(this.props.onSubmitText(this.state.text),this.props.onSubmit&&this.props.onSubmit(),this.clearText()))}handleSubmitSnoo(e){this.props.onSubmitSnoo(e),this.props.onSubmit&&this.props.onSubmit()}addPrefixToValue(e){const t=/^$/.test(this.state.text)?"":" ",n=`${this.state.text}${t}${e}`;this.setState({textUpdate:n})}onPickUserName(e,t=!1){const n=t?"":" ",a=this.state.text.replace(/(@|u\/)(?:[A-Za-z0-9_-]+)?$/i,`$1${e}${n}`);this.setState({textUpdate:a})}toggleUserlistTooltipByTextChange(e){const t=this.props.activeDropdownId===Ts,n=/(?:^|\s)(?:@|\/?u\/)([A-Za-z0-9_-]{0,20})$/i.exec(e),a=n&&n[1];return null!==a&&e.trim().length?(t||this.props.toggleUserlistTooltip(Ts),this.setState({text:e,inputUserName:a})):(t&&this.props.toggleUserlistTooltip(Ts),this.setState({text:e,inputUserName:""}))}render(){var e=this.props;const t=e.activeDropdownId,n=e.className,a=e.channelId,s=e.isLocked,c=e.isMuted,o=e.isModerator,i=e.toggleSnoomojiTooltip;return c?r.a.createElement(ba,null):s?r.a.createElement(la,{isModerator:o}):r.a.createElement(As,{className:n,id:xa,onSubmit:Object(Gt.b)(this.handleSubmitText)},r.a.createElement(Bs,{channelId:a,ref:e=>this.editableContent=e,onSubmit:this.handleSubmitText,onChange:this.handleChangeText,onChangeOnce:this.handleChangeOnce,textUpdate:this.state.textUpdate,onKeyUp:e=>this.onKeyUpUserlistListener(e),onKeyDown:e=>this.onKeyDownUserlistListener(e)}),r.a.createElement(Ls,null,r.a.createElement(Us,null,r.a.createElement(Rs,{onClick:()=>i(ks),active:t===ks},r.a.createElement(Ss,null)),r.a.createElement(Aa,{id:ks,title:Object(_.a)("en","app.chat.message.pickers.snoomoji")},r.a.createElement(Wa,{onPickSnoomoji:this.handleSubmitSnoo})),r.a.createElement(Rs,{active:t===Ts,onClick:()=>t!==Ts&&this.addPrefixToValue("u/")},"u/"),r.a.createElement(Aa,{id:Ts,title:`u/${this.state.inputUserName}`},r.a.createElement(ps,{inputUserName:this.state.inputUserName,onPickUserName:e=>this.onPickUserName(e),onSelectUserName:e=>this.selectUserName=e,bindKeyUp:e=>this.onKeyUpUserlistListener=e,bindKeyDown:e=>this.onKeyDownUserlistListener=e})),r.a.createElement(Rs,{active:!1,onClick:()=>this.addPrefixToValue("r/")},"r/")),r.a.createElement(Ms,{type:"submit",disabled:!this.sendEnabled()},r.a.createElement(Ds,{active:!0}))))}}),Fs=n("./src/chat/actions/container.ts"),Ks=n("./src/lib/copyToClipboard/index.ts"),Gs=n("./src/chat/actions/channel/dropdown.ts"),zs=n("./src/chat/actions/theme.ts"),Ws=e=>r.a.createElement(G.a,Object.assign({},e,{viewBox:"0 0 59.077 59.077"}),r.a.createElement("g",null,r.a.createElement("path",{d:"M55.906,28.463c-0.235,0.129-0.469,0.258-0.711,0.379c-11.339,5.68-25.186,1.072-30.864-10.268   C21.8,13.517,21.22,7.726,22.699,2.268L23.315,0l-2.061,1.129C9.807,7.402,5.107,21.605,10.554,33.464   c0.231,0.501,0.826,0.722,1.326,0.491c0.502-0.23,0.723-0.824,0.492-1.326C7.684,22.424,11.164,10.333,20.253,4.09   c-0.891,5.221-0.102,10.602,2.289,15.379c5.952,11.884,20.155,16.965,32.216,11.78c-2.045,5.346-6.026,9.775-11.183,12.357   c-3.167,1.586-6.557,2.407-10.074,2.438c-0.638,0.007-1.285-0.016-1.917-0.063c-0.551-0.05-1.031,0.371-1.072,0.922   c-0.041,0.551,0.371,1.031,0.922,1.072c0.617,0.046,1.244,0.07,1.867,0.07c0.073,0,0.146,0,0.218-0.001   c3.825-0.034,7.51-0.926,10.952-2.65c6.357-3.183,11.071-8.95,12.935-15.822l0.562-2.239L55.906,28.463z"}),r.a.createElement("path",{d:"M31.271,43.412c0.157,0.091,0.329,0.134,0.499,0.134c0.346,0,0.682-0.179,0.867-0.5c0.276-0.479,0.112-1.09-0.366-1.366   l-2.83-1.634l2.83-1.634c0.479-0.276,0.643-0.888,0.366-1.366c-0.277-0.479-0.89-0.642-1.366-0.366l-2.83,1.634v-3.268   c0-0.552-0.447-1-1-1s-1,0.448-1,1v3.268l-2.83-1.634c-0.478-0.276-1.09-0.113-1.366,0.366c-0.276,0.479-0.112,1.09,0.366,1.366   l2.83,1.634l-2.83,1.634c-0.479,0.276-0.643,0.888-0.366,1.366c0.186,0.321,0.521,0.5,0.867,0.5c0.17,0,0.342-0.043,0.499-0.134   l2.83-1.634v3.268c0,0.552,0.447,1,1,1s1-0.448,1-1v-3.268L31.271,43.412z"}),r.a.createElement("path",{d:"M11.637,37.046c-0.277-0.479-0.89-0.642-1.366-0.366l-2.83,1.634v-3.268c0-0.552-0.447-1-1-1s-1,0.448-1,1v3.268   l-2.83-1.634c-0.478-0.276-1.09-0.113-1.366,0.366c-0.276,0.479-0.112,1.09,0.366,1.366l2.83,1.634l-2.83,1.634   c-0.479,0.276-0.643,0.888-0.366,1.366c0.186,0.321,0.521,0.5,0.867,0.5c0.17,0,0.342-0.043,0.499-0.134l2.83-1.634v3.268   c0,0.552,0.447,1,1,1s1-0.448,1-1v-3.268l2.83,1.634c0.157,0.091,0.329,0.134,0.499,0.134c0.346,0,0.682-0.179,0.867-0.5   c0.276-0.479,0.112-1.09-0.366-1.366l-2.83-1.634l2.83-1.634C11.749,38.136,11.913,37.524,11.637,37.046z"}),r.a.createElement("path",{d:"M22.637,50.077c-0.277-0.479-0.89-0.642-1.366-0.366l-2.83,1.634v-3.268c0-0.552-0.447-1-1-1s-1,0.448-1,1v3.268   l-2.83-1.634c-0.478-0.276-1.09-0.112-1.366,0.366s-0.112,1.09,0.366,1.366l2.83,1.634l-2.83,1.634   c-0.479,0.276-0.643,0.888-0.366,1.366c0.186,0.321,0.521,0.5,0.867,0.5c0.17,0,0.342-0.043,0.499-0.134l2.83-1.634v3.268   c0,0.552,0.447,1,1,1s1-0.448,1-1v-3.268l2.83,1.634c0.157,0.091,0.329,0.134,0.499,0.134c0.346,0,0.682-0.179,0.867-0.5   c0.276-0.479,0.112-1.09-0.366-1.366l-2.83-1.634l2.83-1.634C22.749,51.167,22.913,50.556,22.637,50.077z"}))),Vs=n("./src/chat/components/ThemeSwitcher/index.m.less"),qs=n.n(Vs);const Js=Object(K.a)({theme:e=>e.user.prefs.globalTheme}),Zs=Object(o.b)(Js,(e,t)=>({changeModeClicked:()=>e(Object(zs.themeToggle)())})),Qs=i.a.div("Wrapper",qs.a);Zs(({changeModeClicked:e,theme:t})=>r.a.createElement(Qs,{onClick:e},r.a.createElement(Ws,{active:!0})));var Ys=n("./src/chat/constants/channels.ts"),Xs=e=>r.a.createElement(G.a,Object.assign({},e,{viewBox:"0 0 20 20"}),r.a.createElement("path",{d:"M7.69 10A2.312 2.312 0 0 1 10 7.69 2.311 2.311 0 0 1 12.308 10 2.311 2.311 0 0 1 10 12.31 2.312 2.312 0 0 1 7.69 10m7.29-1.173a5.068 5.068 0 0 0-.631-1.515l.725-1.148a.898.898 0 0 0-1.238-1.238l-1.148.725a5.046 5.046 0 0 0-1.515-.63L10.875 3.7a.898.898 0 0 0-1.75 0l-.298 1.32a5.081 5.081 0 0 0-1.516.63l-1.147-.724a.898.898 0 0 0-1.238 1.238L5.65 7.31a5.106 5.106 0 0 0-.63 1.516l-1.32.298a.898.898 0 0 0 0 1.75l1.32.298c.129.545.344 1.054.63 1.516l-.724 1.147a.898.898 0 0 0 1.238 1.238l1.147-.724c.462.286.971.501 1.516.63l.298 1.32a.898.898 0 0 0 1.75 0l.298-1.32a5.046 5.046 0 0 0 1.515-.631l1.148.725a.896.896 0 0 0 1.238-1.238l-.725-1.148c.287-.461.501-.97.63-1.515l1.321-.298a.898.898 0 0 0 0-1.75l-1.32-.298z",fillRule:"evenodd"})),$s=n("./src/chat/components/ChannelHeaderDropdown/index.m.less"),ec=n.n($s);const tc=i.a.wrapped(Object(ht.a)(Ft.a),"Dropdown",ec.a);tc.displayName="Dropdown";const nc=i.a.wrapped(Kt.a,"DropdownRow",ec.a),ac=i.a.wrapped(_e.d,"DropdownTrigger",ec.a),sc=Object(K.a)({currentUserId:Ya.a,channelId:e=>Object(S.x)(e),dropdownIsOpen:(e,t)=>e.tooltipId===t.dropdownId||"OverlayNavTooltip--Default"===e.tooltipId,selectedChannel:e=>Object(S.w)(e),isModerator:e=>Object(S.a)(e),isChannelLocked:e=>Object(S.M)(e),isChannelMuted:S.N}),cc=Object(o.b)(sc,(e,t)=>({onInviteToChannel:()=>e(Object(Gs.b)()),onLeaveChannel:()=>e(Object(Gs.c)()),onLockChannel:()=>e(Object(Gs.d)()),onUnlockChannel:()=>e(Object(aa.v)(!1,!0)),onViewMembers:()=>e(Object(Gs.i)()),onBlockUser:t=>e(ft(t)),onViewProfile:t=>e(Object(Gs.j)(t)),onOpenDropdown:t=>e(Object(Gs.g)(t)),onMuteChannel:()=>e(Object(Gs.e)()),onUnmuteChannel:()=>e(Object(Gs.f)()),closeTooltip:()=>e(Object(mt.d)())}));class rc extends c.Component{constructor(){super(...arguments),this.getDropdownGroupOptions=(()=>{var e=this.props;const t=e.isModerator,n=e.isChannelLocked,a=e.isChannelMuted,s=e.selectedChannel;if(s)switch(s.type){case E.a.Direct:return Rt.directChannel.filter(e=>Pt.muteChannel(e,a)).filter(e=>Pt.unmuteChannel(e,a));case E.a.Group:return Rt.groupChannel.filter(e=>Pt.muteChannel(e,a)).filter(e=>Pt.unmuteChannel(e,a));case E.a.Subreddit:return Rt.subredditChannel.filter(e=>Pt.lockRoom(e,t,n)).filter(e=>Pt.unlockRoom(e,t,n)).filter(e=>Pt.copyLink(e,!!s.isPublic)).filter(e=>Pt.muteChannel(e,a)).filter(e=>Pt.unmuteChannel(e,a))}}),this.getBlockedUser=(()=>{var e=this.props;const t=e.selectedChannel,n=e.currentUserId;return t&&t.members.find(e=>e.id!==n)}),this.onOptionClick=(e=>{switch(e){case Ct.AddToGroup:case Ct.AddToRoom:return this.props.onInviteToChannel();case Ct.Block:{const e=this.getBlockedUser();return e&&this.props.onBlockUser(e.id)}case Ct.Leave:case Ct.LeaveRoom:return this.props.onLeaveChannel();case Ct.Profile:return this.onProfileClick();case Ct.RenameGroup:return this.props.toggleChannelNameInput();case Ct.ViewMembers:return this.props.onViewMembers();case Ct.LockRoom:return this.props.onLockChannel();case Ct.UnlockRoom:return this.props.onUnlockChannel();case Ct.CopyLink:{const e=this.props.channelId;if(e){const t=Object(Ie.getShortChannelUrl)(e);Object(Ks.a)(t)}return}case Ct.MuteChannel:return this.props.onMuteChannel();case Ct.UnmuteChannel:return this.props.onUnmuteChannel();default:return ut.a}})}onProfileClick(){const e=this.props.selectedChannel;if(e&&e.channelState===Ys.b.JOINED){const t=e.members.find(e=>e.id!==this.props.currentUserId);if(t&&t.name)return this.props.onViewProfile(t.name)}return this.props.inviterName&&this.props.onViewProfile(this.props.inviterName)}render(){var e=this.props;const t=e.dropdownId,n=e.dropdownIsOpen,a=e.onOpenDropdown,s=this.getDropdownGroupOptions();return r.a.createElement(r.a.Fragment,null,!1,r.a.createElement(ac,{id:t,onClick:()=>a(t)},r.a.createElement(Xs,null)),r.a.createElement(tc,{isOpen:n,tooltipId:t,container:document.getElementById(_a.a),excludeContainerPosition:!0,closeOnClickOutside:!0},s&&s.map((e,t)=>r.a.createElement(nc,{key:t,displayText:Object(_.a)("en",`app.chat.message.dropdown.options.${e}`),onClick:()=>{this.onOptionClick(e),this.props.closeTooltip()}}))))}}rc.defaultProps={dropdownId:"OverlayNavTooltip--Default"};var oc=cc(rc),ic=n("./src/chat/components/CloseIcon/index.tsx");const lc=e=>r.a.createElement(G.a,Object.assign({},e,{viewBox:"0 0 20 20"}),r.a.createElement("path",{id:"a",d:"M10 15a.997.997 0 0 1-.707-.293l-6-6a1 1 0 1 1 1.414-1.415L10 12.588l5.293-5.294a1 1 0 0 1 1.415 1.415l-6 6A.997.997 0 0 1 10 15"}));lc.displayName="NavMinimize";const dc=e=>r.a.createElement(G.a,Object.assign({},e,{viewBox:"0 0 20 20"}),r.a.createElement("path",{d:"M14.398 11.016c.443 0 .802.359.802.8v1.782A2.406 2.406 0 0 1 12.795 16h-6.39A2.406 2.406 0 0 1 4 13.598V7.202A2.406 2.406 0 0 1 6.405 4.8h1.784a.801.801 0 1 1 0 1.602H6.405a.803.803 0 0 0-.802.8v6.396c0 .441.36.801.802.801h6.39c.442 0 .802-.36.802-.8v-1.782c0-.442.359-.8.801-.8zm1.54-6.516c.04.1.061.204.061.31v3.236a.809.809 0 1 1-1.618 0V6.763l-4.2 4.2a.808.808 0 1 1-1.144-1.144l4.2-4.2h-1.284a.809.809 0 1 1 0-1.619h3.237a.814.814 0 0 1 .747.5z",fillRule:"evenodd"}));dc.displayName="NavPopout";var uc=n("./src/chat/selectors/app.ts"),hc=n("./src/chat/components/OverlayNavButtonGroup/index.m.less"),mc=n.n(hc);const bc=i.a.wrapped(_e.d,"IconButton",mc.a),pc=i.a.wrapped(ic.a,"CloseButton",mc.a);pc.displayName="CloseButton";const gc=i.a.span("Wrapper",mc.a);var Oc=Object(o.b)(()=>Object(K.a)({containerSize:e=>e.container.size,inviterName:S.H,isReady:uc.f}),e=>({close:()=>e(Object(Fs.sizeChanged)(Ea.a.HIDDEN)),minimize:()=>{e(Object(Fs.sizeChanged)(Ea.a.MINIMIZED)),e(Object(Ce.o)())},popout:()=>e(Object(Fs.popoutOpened)())}))(({containerSize:e,close:t,dropdownId:n,showMenu:a,inviterName:s,isReady:c,minimize:o,popout:i,toggleChannelNameInput:l})=>{const d=c&&e===Ea.a.EMBED;return r.a.createElement(gc,null,a&&r.a.createElement(oc,{dropdownId:n,inviterName:s,toggleChannelNameInput:l}),d&&r.a.createElement(r.a.Fragment,null,r.a.createElement(bc,{onClick:i,title:Object(_.a)("en","app.layout.header.popout")},r.a.createElement(dc,null)),r.a.createElement(bc,{onClick:o,title:Object(_.a)("en","app.layout.header.minimize")},r.a.createElement(lc,null)),r.a.createElement(pc,null)))}),jc=n("./src/chat/controls/ChannelNameInput/index.m.less"),fc=n.n(jc);const Cc=i.a.input("Input",fc.a),Ec=i.a.wrapped(e=>r.a.createElement("label",{className:e.className},r.a.createElement(Cc,{placeholder:e.placeholder,onChange:e.onChange,value:e.value}),e.children),"NameInput",fc.a);class _c extends r.a.Component{constructor(){super(...arguments),this.onChange=(e=>{const t=e.currentTarget.value;this.props.handleChannelNameInput(t)})}render(){return r.a.createElement(Ec,Object.assign({withBackground:this.props.withBackground,onChange:this.onChange},this.props),this.props.children)}}var Ic=n("./src/chat/controls/Counter/index.tsx"),vc=n("./src/chat/components/RenameGroupInput/index.m.less"),yc=n.n(vc);const xc=i.a.wrapped(e=>r.a.createElement("span",{className:Object(Oe.a)({[yc.a.visible]:e.isVisible},e.className)},e.children),"InputWrapper",yc.a),Sc=i.a.div("InputContent",yc.a),Nc=i.a.span("InputControls",yc.a),wc=i.a.wrapped(_e.a,"CancelButton",yc.a),kc=i.a.wrapped(_e.a,"SaveButton",yc.a);var Tc=Object(o.b)(void 0,(e,t)=>({onUpdateChannelName:t=>e(Object(Gs.h)(t))}))(class extends c.Component{constructor(){super(...arguments),this.displayName="RenameGroupInput",this.state={groupName:this.props.name||""},this.getAvailableCharacters=(()=>Ys.d-this.state.groupName.length),this.handleChannelNameInput=(e=>this.setState({groupName:e})),this.submitGroupName=(()=>{this.props.onUpdateChannelName(this.state.groupName.trim()),this.props.hideChannelNameInput()})}componentWillReceiveProps(e){this.props.channelId!==e.channelId&&(this.setState(t=>({groupName:e.name})),this.props.hideChannelNameInput()),this.props.name===e.name||this.props.isVisible||this.setState(t=>({groupName:e.name}))}render(){var e=this.props;const t=e.hideChannelNameInput,n=e.isVisible,a=this.state.groupName,s=this.handleChannelNameInput,c=this.submitGroupName,o=this.getAvailableCharacters();return r.a.createElement(xc,{isVisible:n},r.a.createElement(Sc,null,r.a.createElement(_c,{handleChannelNameInput:s,placeholder:Object(_.a)("en","app.chat.channels.groupRename"),withBackground:!0,value:a},r.a.createElement(Ic.a,{count:o})),r.a.createElement(Nc,null,r.a.createElement(wc,{secondaryNoBorder:!0,onClick:t},Object(_.a)("en","app.button.cancel")),r.a.createElement(kc,{primaryNoBorder:!0,disabled:o<0||o>=Ys.d,onClick:c},Object(_.a)("en","app.button.save")))))}}),Mc=n("./src/chat/actions/sendbird/sdk.ts"),Dc=n("./src/chat/constants/toast.ts"),Ac="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KTMInWQAAB/FJREFUWAnFWFtolUcQ/nMxprUp9MFGUZJgSaqlahSRNm2KTUoetD4oKppWxBJsfbAiRQhY0SL4EA2WoJRCrVYMwVta8IJVo9LEaC410ZpYxcQ7ao0arTEn57b9vjn//Oc/yUmiEu3A/Du7Ozvz7ezO7p4TY708ioGrONsd5SA4YNf/94KAopECjtYnbb0N7HXAc3TEYgyjRfocnAVuB5eCm8DuflRfDtFpvM0ahPJVq1aZU6dOmd27dxv0EXQOmNRvJENqA/ON5uyjefPmGa/X6zPGeMGdx48fJ8hjtktOKCpxlgNJjBY3/kjwDPCElJSUtGvXrmUmJSVZgwYNigkEAvFxcXGxw4YNQ7f1Oj8ggn3hpJErgKc2cAP4GMD8lJGR8Q3khydPnkTwjCcYDHauWbOGoIrApIEOVMiq66tLlIS2J+B8V5+KX0EwJSUlZtmyZQTXvGTJEo2gjlfdAS81etz018GaGIMgK1sjRozIRf17cOHixYvfQEl64eDohCBIheBqkUJtCpRN0YBEa7OHh4p+FSK0Iyscy70Tt3r1atnk2PjpiJIC9KGP7apHmZHmGDLB6/kI8fmIRpTVAp24I6Ptr0GoAm8Bp4PTADwRpZsUmLutTzmaIw4gCJL7rmQbo6CzzoD8AZg3w4TMzMyMoUOHJg0ePNh68uSJ1dra2nHlypV/0Mds/tXmDpQkAqUt+neXbn/o6kkcoOCkF8dC921AQL/Pnj07UFpaas6ePWtu375tHj16ZDo6OoIAF3z8+LG5f/++AUBz4sQJU1xcbIYPH34d43jcJIjh6B/66i1o4U2cmJiYDcXN4Dow78tqROZHlL8tXbrUNDU1ma6uLp5pejP4IQfYYFMQJetsp46vvb3d7Nu3z6Smpv4NO19Onz49D+V34B3gkvHjx3+IUqkHSHeUNkHLbN261TQ2NhrcAmblypVcBokGDln4k+sqiFvBKLO9O7v7MIZgvQ8fPjTr168Xe7yTKysrzYYNG6QOH8WKEKUDkoJWSvPz883NmzfFGI1WVFT4586d67tx4wbvUEZDgNlAUX06UrDQlqiWl5f7161bpza7sCp+XIsE+q0NkvtUSIVlWVlZ5sGDB1w7CZP96pD9RBh+v1+iRPl5iUB1cvv37zdbtmxRU/6GhgYC9EydOjXVxhZa2cLCQp7qbTU1NVSWvXThwgUJ+71798QAwQ0UESCBkg4ePGjOnDmjpn32mfq1DVAvAOvTmTNncuM7KLZt22ZOnz4tA93gNAJuJ2q9r1KX2D1e9flG7OzsZNV39OhRBoZ5QIrX5R0+adIkKyEhgUpWTEyMhWPEQjZbrONFIiVHxMaG84l6qs++vsg9jnocp2MnTpxo+Xy8eCyLzzKQlx9QjAL8FxGRBjrFOWbxwFVSQ6xfvHjRqqqqkq7s7GwrPZ2XRv907tw5C49UC+ehlZeXJ0AUJN6JfCvSSMzVq1dZVvIDYjSF3p02bVoAhyzGmOChQ4cMD1uphI4VkcvKymRfzpkzx+Tm5orMJemuJw346D7bs2eP6HJ/paWlmfnz5zuJogkDXT8mbsaNG8ezV0lOFz1iqplF2IdenoHqVJ3U1dWJE5ZKBw4cMJi57h/HqY5liaUzGzduNIiMDKM9HmWHDx+WOvtJSEY/UNHHZzY6J0F0mXNmzJghaY8ZS4rRmM5w4cKFZvPmzWJM21jBmSkgpCPKRyfILk02XoNuwOgK3L1714wcOfJ+cnLymzbA8GZHg9y/o0aN+gKy2bFjB+3JgUyBhL0XESmCdAMNaUX/Uk+Buse42v28z+G7xgbHQlZWUfIVEd/a2vozyl8wGyr4mTBKTAbNarZrH5yoSp+l6rPENJwMtgfxgqB4kx/sVeIi4PADAbKiaaytrbUwYwFBY6QoRqWfx0dfINnnnhBtda/TPILDrr/4sQFSjCBZ5rFjx36CVg5w9mH0hQtnqfZzGbsz+5gIiJCqOSWXGIQiGMQPKEbiPRuRYIlAh4pEcOfOna9AvmJnsl/3jmM1ZFGqe/fuNUwePr9sZ241kW/dumWYfBUVFVJ369m2vZcvXya4P1yAdDWdZdU+ZrQ/Pj5+OTKuCBvXi6xKgCG5TVQJnmSZ+HKurq628KiwhgwZYuFNx19uIrOPh25zc7PcSpMnT9bhUto2CMysWLEidu3atR9DPg5m9Hp9WQtyDGb55/LlyzlrDz96RFCORoxUfX294SHPBwAP3ZaWlv6y12PfvfwpSoq6tKGu8FeUFi1alIKmu0VFRXRCkM4DVQFyuaJtAe3X0q1jy9x8Hvt5dTTsuseKuroiRTm8FyxY8BaaWwoKCpg0NOo8WOnIvZ8ULNvdzHbts/VpI3DkyBHZd1OmTNFffnrkRSLpoyYgN23axJ+T/H1itm/fbtra2giUL2E+zeAzFEUF1b1OHZsJzMebB3uO4Da6fD/V0rr0HdEZOHr0aP6aO4iflvJ7hfvL45HtyeNInPdSBvgD69KlS/K/DGzUg3McD5Fnsas5JDrp3KMn3MDQU08z633IvNBzZ82alZ6TkxM3ZswYC/8qSPbiTSlvO2bxnTt3rPPnz1tYzq5du3bVYswP4DIwiZPnNcRo9kpPA1AHRxhEtGJxI7yNznfAb4GTwa+C+SrxgB+D74GvgvnTVa4KlCQ5zkLiwH8JVPbnM5pmMDjuWYLybMrdANGRLj9lg4x0VPB6ViBcQi4l+ZnpP8ZJaQD2wM13AAAAAElFTkSuQmCC",Lc="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KTMInWQAACPtJREFUWAm9WHtQVscVX+DjIVAzRqStVAnUCc7UBx2jKEarFeNYJrHVxvQPtSPTaDL1UbWVf4IZJ6Rm1DQdH4Dji1oZJ1BHJiMyU3V8iw98piWjOID4accCWhEEvtf299vvnpvL55c0NDFn5tzdPXvuOb89u3t2741S3xxFwpQOMedCO8Li0L4Q1fDNqPDi/0tKABPAueDvgJvAATDlZIJl+1snGeS7hYWFurm5WR8/fpyADoAnDBw48Kcon7dQMZrfKnFaSemLFy/2eb1eDfKA/Xv37iVIz7Bhw5pRPgS/Ayb1CaQ4CL7a96e8nzJy5Mgol8tFcJR509LSaK3q1q1bQ1G+Al4J/i1YphvVZ08SjWi4ulpbW6v9fr9ub2/Xq1atIpA8B4SFqLsdbXnXIXo2VYni92D+L7Nnz67PzMysQ/0PlrsEq5yKsgecbLXlPav5bAunM0bT2RbPFajclQbKrxRBbv2vQ3QiTGDc0d2WwYyoqKiXMeU/QjsX/KJVspt6flaeBREQB/aFg0tISFiHfq7BO+A94DXg4WBSuOgGe/r4lMiwJAmwYAvP8vJyRuIF8I/BWeAM8K8TExP1uHHjlqAeSn0GJ86dhiijY59DSBkjIpSDyq/Ak5DnhmRkZPSLiYlRHo9H1dfXq5s3b/LEYOSqwWfBbjCJdmmHLL6lDdH/pl4jnD9/PnegMTRmzJh41N8AX1i3bp0+c+aMOTUePnyonzx5oru6ukz54MED3dTUFGDK2b59u54+ffp/8A43SDb4i4jLpZfvcIocndq2bRsX++/B58HNo0aNuobyOOtlZWWaAHhSgJmUfVY9gNLJaGoeKz4CJ9gFCxYwUh/NnDlzUF5eHs/q1NGjR6dAx7mWDQb0PUUGfVpa2nfRc3nLli26rq5Ot7S0mIS7cOFCfffuXTolIG8AxIRMRvUpdvZB3wyGx+ChQ4cIksfeHZw8T1C2g2+ANyKxJ6EkOQEbgawFNs6eOnWKQLoI5NixYz6ANaAsR+zrE3EAPh9NmAh7b9y4YdYcwfLEuXbtml67di1l/544ceJLBlEISEE8d+PGjTTUw8fly5fNGmKdREO7S0t1SXGxbmxsNDI6D0fhouoA6r99+7YfuzzgdrsZXaLvqqysJMhHOIlSLZD2dAvATQQB8j5+/FgfOXKEde3H6N/98E9m1HhRl1X8TePaYvr68pDBWNHUV69e1XPnzpXo0lQ31j/9/N0CaM+sAPywoaGBit5Hjx7p7u5u1vWf8VIBgLXMytRtLytd9MbPdSumhiROTcN6EEBra6tua2vTbbBD7sRGcZKAPHDggL548aJ0BZARfKmpqQQ5zQJpsHHXkt68dOkSlb1c5CT3/fv6nQFK658laT0jTutf/FDXAGz1yZOmX/TYELAE99prs7RK7K/fnjRBr/pJtn4le4KutmaEeqLLINTU1Dhtebdu3UqA7xtESkVz98qZ+MmJEyfaOjo6XPRHhY6ubpXCPRfTX3l8OGIjY+2Dlv1OioiIwEi0wg1a5b7+utrV0a6K4j9VfwycVWUdNaokJ0fVNzQq0aNubGysGjt2rNOMQgTZlhu4uVwSDEN5f+XKlQeLiooUDnkDMD1lsGpc9Ka6U9mgYp4fodpq61T5iylqzIgRNGKcmUrIw9fToyZRlvADFRkXp5KGj1K/Q/OzxkZbk0CFsKRUZGQwT/fgXVCL1RcRmr1PiiKmQUW7XOrtgjXqg1mvqo8q/qHyM3LUW5WH1aABAxT7nU5okFEhJSUPUvdZiU1Urujn0BFQhDZk8Pcp7UW0cf78eYU8SXnEuXPnWPKQIAUNoiIbJWfDhg3wY5KrScZsdOAo+6yxyZRsyxpi3UmyJpvdbp0J43Cl3SOU3oVyzXvv2aryvujv27ePOdHbgE0KLLeQfwVPhFQEaSfDDWJkNaPJSCX066eGv5BKuWlLlI3A8aAcKNSQlBT117o6tau8QrW3tqiX8ser/DmzjSb7QyMfHR0dQOJ2VVfzbqHyp06dyosKsdkXFpnq1Dlz5nRiHXC0fhkpS45W2uwMJfYLO/UwDbaqU06hFcHAzp07GSDyW2CS4Am28Px8xeK2cu/ePb5vpxs2BKQADQeGekLMdQJI3pG+kNKzevVqgiu00Mis2uCkIh0reOyAPGJYHIUYtpsEw3zG0wf3QVv+Ze9JHy4knEYdFxc3xQIiOEzTGUqTWiDdWVhY+K/Ozs5orCk/1wsZJ4PC4lWlpaWquLhY7dmzR+G4MmsOacno4K+CKigoUMuWLTP6fA9oLb+9C0seuHDhAs/c1hUrVnxqaUhe7v2C1RL0vykpKWEkvACqef3Kzc01lwekAXOOHjx4UCcnJ+vly5ebyyqVhfApoK1bkawz6TKlRA93xZ5p06ZxBFst//YFISw6CLkWZT1WVVRU6Hnz5nkJkBeIUOJNeujQoXr37t2my/r1YasJEFuACmVcOiAf34O/9iVLlgy2ADln1BI9XUgUs9DFaNnbUDYGSwGDJKsnT55s30ocAAjCJsrlkgChl+uV9sePHx/MP5/n4qcROSQSPYqqeKsGwW5wR9IJ2RKakjpZWVnaSk12PztF34oYRUxdPfv37zfg0tPT8yzfEhQHlPBVUfzl+vXradBH4+KIAhCaBiWRBjZt2qQxRabDGWEHKOrxAum5fv26XrRoEcHdw6Cm9xUc9WUNfCxXL2sqjROsOa/cE4nx6NGj3Pk+7F4CcDI/qNj28/p1+vRpjV1KYA/A72NQ/VGSJCDBVpinU4HTK6kmAxGgug+/1Fhyd7mqqqoU/vup7OxsP/Jd5I4dOyLwQRXFFITdblINloPiccmUc+XKFYVPz25cRPll+PHSpUv3bt68uYVpiPbA9lFGQThyrjn2EwiRfTBjxox8TJ2Kj483H+OHDx8+hbVThr5acCfYNWXKlCT8TU1FndcU/t3i5yQjxa81N5hfbP8EN4GFCIyBkGCIPGwZCpBtOiC9CuY64c+gT8CnwV+H+gRMHIUCpNwJUvR4IuBgMLef0JFTP9w7IqM+By0Dt21+lQqNhCPKJauzTidfegSFM/JNyP4LuTh8ZaAXiQ4AAAAASUVORK5CYII=",Uc=n("./src/chat/components/ToastNotification/index.m.less"),Bc=n.n(Uc);const Rc=[Dc.a.ConnectionClosed,Dc.a.ConnectionPending],Pc=i.a.wrapped(e=>r.a.createElement("span",{className:Object(Oe.a)(e.className,{[Bc.a.pending]:(e=>Rc.includes(e))(e.toast)}),style:{height:e.toast?"2.5em":"0"}},e.children),"Wrapper",Bc.a),Hc=i.a.span("Text",Bc.a),Fc=i.a.img("SnooImg",Bc.a);Fc.displayName="SnooImg";const Kc=i.a.button("Button",Bc.a);Kc.displayName="Button";const Gc=i.a.wrapped(e=>r.a.createElement(G.a,Object.assign({},e,{viewBox:"0 0 20 20"}),r.a.createElement("path",{d:"M18 9a1 1 0 0 1 1 1v2c0 2.757-2.243 5-5 5H5v1.5a.5.5 0 0 1-.82.384l-3-2.5a.497.497 0 0 1 0-.768l3-2.5A.5.5 0 0 1 5 13.5V15h9c1.654 0 3-1.346 3-3v-2a1 1 0 0 1 1-1zM2 11a1 1 0 0 1-1-1V8c0-2.757 2.243-5 5-5h9V1.5a.5.5 0 0 1 .82-.384l3 2.5a.497.497 0 0 1 0 .768l-3 2.5A.5.5 0 0 1 15 6.5V5H6C4.346 5 3 6.346 3 8v2a1 1 0 0 1-1 1z"})),"RefreshIcon",Bc.a),zc=Object(K.a)({toast:e=>e.toast}),Wc=Object(o.b)(zc),Vc=r.a.createElement(Fc,{src:Ac}),qc=r.a.createElement(Fc,{src:Lc}),Jc=({className:e,toast:t})=>r.a.createElement(Pc,{toast:t,className:e},t&&(e=>{switch(e){case Dc.a.ConnectionOpen:return Vc;case Dc.a.ConnectionPending:case Dc.a.ConnectionClosed:return qc;default:return null}})(t),r.a.createElement(Hc,null,t&&Object(_.a)("en",`app.chat.toast.${t}`)),t&&(e=>e===Dc.a.ConnectionClosed?r.a.createElement(Kc,{onClick:Mc.g},r.a.createElement(Gc,null)):null)(t));Jc.displayName="ToastNotification";var Zc=Wc(Jc),Qc=n("./src/chat/components/OverlayNav/index.m.less"),Yc=n.n(Qc);const Xc=i.a.wrapped(pn,"Group",Yc.a),$c=i.a.wrapped(gn,"Key",Yc.a),er=i.a.nav("Nav",Yc.a),tr=i.a.span("TitleWrapper",Yc.a),nr=i.a.span("Title",Yc.a);nr.displayName="Title";const ar=i.a.span("SubTitle",Yc.a);ar.displayName="SubTitle";const sr=Object(K.a)({isEmbedded:uc.d});var cr=Object(o.b)(sr,e=>({minimize:()=>{e(Object(Fs.sizeChanged)(Ea.a.MINIMIZED)),e(Object(Ce.o)())}}))(class extends c.Component{constructor(){super(...arguments),this.state={isRenameGroupInputVisible:!1},this.hideChannelNameInput=(()=>this.setState({isRenameGroupInputVisible:!1})),this.toggleChannelNameInput=(()=>this.setState(e=>({isRenameGroupInputVisible:!e.isRenameGroupInputVisible})))}componentWillReceiveProps(e){this.props.channel&&e.channel&&this.props.channel.channelId!==e.channel.channelId&&this.hideChannelNameInput()}render(){var e=this.props;const t=e.channel,n=e.dropdownId,a=e.isEmbedded,s=e.minimize,c=e.showMenu,o=e.subTitle,i=e.title,l=this.state.isRenameGroupInputVisible,d=this.hideChannelNameInput,u=this.toggleChannelNameInput,h=t&&!t.isPublic;return r.a.createElement(er,null,r.a.createElement(tr,{onClick:a?Object(Gt.b)(s):void 0},r.a.createElement(nr,null,t&&t.type===E.a.Subreddit?h?r.a.createElement($c,null):r.a.createElement(Xc,null):null,i),r.a.createElement(ar,null,o)),r.a.createElement(Oc,{toggleChannelNameInput:u,showMenu:!!c,dropdownId:n}),r.a.createElement(Tc,{channelId:t&&t.channelId,name:i,isVisible:l,hideChannelNameInput:d}),r.a.createElement(Zc,null))}}),rr=n("./src/chat/constants/batchSizes.ts"),or=n("./src/chat/selectors/subreddit.ts"),ir=n("./src/chat/components/MessageList/index.m.less"),lr=n.n(ir);const dr=i.a.wrapped(ta,"MessageItemBubble",lr.a),ur=i.a.wrapped(Ca,"Scroller",lr.a),hr=i.a.div("Container",lr.a),mr=i.a.div("ReverseCol",lr.a),br=i.a.wrapped(Hs,"MessageInput",lr.a),pr=i.a.span("LoadingIndicator",lr.a),gr=i.a.span("LoadingError",lr.a),Or=Object(K.a)({currentUser:e=>e.user.account,channelMessages:e=>Object(S.y)(e),channelPendingMessages:e=>Object(S.z)(e),fetchingMessages:e=>Object(S.A)(e,"fetchingMessages"),fetchingMessagesError:e=>Object(S.A)(e,"fetchingMessagesError"),hasMoreMessages:e=>Object(S.A)(e,"hasMoreMessages"),isMessageListLoaded:e=>Object(S.A)(e,"isMessageListLoaded"),subreddit:e=>Object(or.b)(e),subredditName:e=>Object(bt.e)(e),isModerator:e=>Object(S.a)(e)}),jr=Object(o.b)(Or,e=>({getPreviousMessages:()=>e(Object(g.q)()),removeAndResetMessages:t=>e(Object(O.c)(t)),resetChannelMessageList:t=>e(Object(p.N)(t))})),fr=30,Cr=2*rr.a.Messages;var Er=jr(class extends r.a.Component{constructor(e){super(e),this.getOtherMemberName=(()=>{var e=this.props;const t=e.channel,n=e.currentUser,a=t.members.find(({id:e})=>e!==n.id);return a?a.name:n.name}),this.getTitle=(()=>{switch(this.props.channel.type){case E.a.Group:case E.a.Subreddit:return this.props.channel.name;default:return this.getOtherMemberName()}}),this.isSplitterDisplayed=((e,t,n)=>new Date(e.createdAt).toDateString()!==new Date(this.getPreviousTime(t,n)).toDateString()),this.renderLinkEmbed=((e,t)=>{const n=e.messageType!==Ee.c.PENDING&&e.messageData.type===Ee.b.EMBED&&e.messageData.embed||void 0,a=n&&n.name&&n.description&&n.faviconUrl;return[r.a.createElement(dr,{message:e,fromCurrentUser:t,darkBackground:t,withButton:!0,embedText:!0}),a&&r.a.createElement(dr,{message:e,fromCurrentUser:!1,darkBackground:!1,withButton:!1})]}),this.renderMessages=(()=>{var e=this.props;const t=e.channelMessages,n=e.channelPendingMessages,a=e.currentUser,s=e.subredditName;if(t.length)return m()([...t,...n],"createdAt").map((e,t,n)=>{const c=e.createdAt,o=e.messageData,i=e.sender,l=i&&i.userId,d=i&&i.nickname,u=a.id===l,h=this.isSplitterDisplayed(e,t,n),m=this.getPreviousTime(t,n),p=this.getPreviousUserId(t,n)===l,g=c-m<5*b.db,O=!(p&&g),j=o.type===Ee.b.EMBED,f=h&&r.a.createElement(H,{date:c}),C=O&&d&&l&&r.a.createElement(bn,{createdAt:c,userId:l,nickname:d}),E=j?this.renderLinkEmbed(e,u):r.a.createElement(dr,{message:e,fromCurrentUser:u,subredditName:s,darkBackground:u,withButton:!0});return r.a.createElement(r.a.Fragment,{key:e.createdAt},f,C,E)})}),this.getPreviousTime=this.getPreviousTime.bind(this),this.getPreviousUserId=this.getPreviousUserId.bind(this),this.loadMoreRows=this.loadMoreRows.bind(this)}shouldComponentUpdate(e,t){return!s()(this.props,e)||!s()(this.state,t)}componentWillReceiveProps(e){this.resetMessageNumberOnChannelSwitch(e),this.removeResetTooOldMessages()}componentDidUpdate(e){this.scrollDownOnChannelSwitch(e)}isChannelSwitched(e){return this.props.channel.channelId!==e.channel.channelId}scrollDownOnChannelSwitch(e){this.list&&this.isChannelSwitched(e)&&this.list.scrollToBottom()}resetMessageNumberOnChannelSwitch(e){var t=this.props;const n=t.channelMessages,a=t.resetChannelMessageList;if(n.length>fr&&this.isChannelSwitched(e)){const e=n.length-fr,t=n.slice(0,e);a(u()(t,({messageId:e})=>String(e)))}}removeResetTooOldMessages(){const e=this.props.channelMessages.length>Cr,t=!(!this.list||!this.list.isScrolledToBottom());e&&t&&this.props.removeAndResetMessages(this.props.channelMessages)}getPreviousUserId(e,t){if(e>0){const n=t[e-1].sender;return n&&n.userId}}getPreviousTime(e,t){if(e>0)return t[e-1].createdAt}loadMoreRows(){var e=this.props;const t=e.fetchingMessages,n=e.hasMoreMessages,a=e.getPreviousMessages,s=e.isMessageListLoaded;if(!t&&n&&s)return a()}render(){var e=this.props;const t=e.channel,n=e.fetchingMessagesError,a=e.getPreviousMessages,s=e.isMessageListLoaded,c=e.isModerator,o=e.hasMoreMessages,i=e.subreddit,l=this.loadMoreRows,d=this.renderMessages(),u=this.getTitle(),h=!o&&s&&t.members;return r.a.createElement(hr,null,r.a.createElement(cr,{channel:t,showMenu:!0,subTitle:r.a.createElement(w,null),title:u}),r.a.createElement(mr,null,r.a.createElement(ur,{autoScrollBottom:!0,loadMoreRows:l,innerRef:e=>this.list=e},n&&r.a.createElement(gr,{onClick:a},Object(_.a)("en","app.chat.messageList.loadingError")),h?r.a.createElement(be,{users:t.members,channel:t,subreddit:i}):n?r.a.createElement(gr,{onClick:a},Object(_.a)("en","app.chat.messageList.loadingError")):r.a.createElement(pr,null,Object(_.a)("en","app.chat.messageList.loading")),d)),r.a.createElement(br,{channelId:t.channelId,isLocked:t.isFrozen,isModerator:c,isMuted:t.isUserMuted,onSubmit:()=>this.list&&this.list.scrollToBottom()}))}}),_r=n("./src/chat/components/MinimizedPortalContainer/index.tsx"),Ir=n("./src/chat/controls/Overlay/index.m.less"),vr=n.n(Ir),yr=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,s=!1,c=void 0;try{for(var r,o=e[Symbol.iterator]();!(a=(r=o.next()).done)&&(n.push(r.value),!t||n.length!==t);a=!0);}catch(i){s=!0,c=i}finally{try{!a&&o.return&&o.return()}finally{if(s)throw c}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();const xr=i.a.div("Content",vr.a),Sr=i.a.wrapped(e=>{const t=e.form?"form":"div";var n=r.a.Children.toArray(e.children),a=yr(n,3);const s=a[0],c=a[1],o=a[2],i={className:e.className,onSubmit:e.onSubmit},l=r.a.createElement(r.a.Fragment,null,s,e.innerContent?c:r.a.createElement(xr,null,c),o);return r.a.createElement(t,i,l)},"Overlay",vr.a);Sr.displayName="Overlay";var Nr=Sr,wr=n("./src/chat/controls/OverlayControlBar/index.m.less"),kr=n.n(wr);const Tr=i.a.wrapped(_e.a,"Button",kr.a),Mr=Object(o.b)(void 0,e=>({onSubmit:()=>{},onCancel:Object(Gt.b)(()=>e(Object(fe.a)()))})),Dr=i.a.div("OverlayControlBar",kr.a),Ar=Mr(e=>r.a.createElement(Dr,{className:Object(Oe.a)({[kr.a.primary]:e.primaryButtonOnly},e.className)},!e.primaryButtonOnly&&r.a.createElement(Tr,{onClick:e.secondaryButtonAction||e.onCancel,primary:!!e.secondaryButtonOnly,secondary:!e.secondaryButtonOnly},e.secondaryButtonText),!e.secondaryButtonOnly&&r.a.createElement(Tr,{type:"submit",primary:!0,onClick:e.primaryButtonAction||e.onSubmit,disabled:e.primaryButtonDisabled},e.primaryButtonText)));Ar.defaultProps={primaryButtonText:Object(_.a)("en","app.button.submit"),secondaryButtonText:Object(_.a)("en","app.button.cancel")},Ar.displayName="OverlayControlBar";var Lr=Ar,Ur=n("./src/chat/controls/OverlayHeader/index.m.less"),Br=n.n(Ur);const Rr=i.a.header("Header",Br.a),Pr=i.a.h1("Title",Br.a),Hr=i.a.span("Normal",Br.a),Fr=i.a.span("Warning",Br.a);var Kr=({message:e,title:t,warning:n})=>{const a=n?Fr:Hr;return r.a.createElement(Rr,null,r.a.createElement(Pr,null,t),r.a.createElement(a,null,e),r.a.createElement(Zc,null))},Gr=n("./src/chat/components/OverlayChatMembers/index.m.less"),zr=n.n(Gr);const Wr=i.a.wrapped(Ca,"Scroller",zr.a),Vr=i.a.div("LoadingIndicator",zr.a),qr=Object(K.a)({channelType:e=>Object(S.A)(e,"type"),currentChannel:S.k,memberCount:e=>Object(S.A)(e,"memberCount"),subredditChannelMembers:Qa.f,fetchingMembers:Qa.a,hasMoreMembers:Qa.d});var Jr=Object(o.b)(qr,e=>({fetchSubredditChannelUsers:()=>e(Object(Va.e)())}))(function(e){const t=e.channelId,n=e.channelType,a=e.currentChannel,s=e.memberCount,c=e.subredditChannelMembers,o=e.fetchSubredditChannelUsers,i=e.fetchingMembers,l=e.hasMoreMembers;if(a){const e=a.channelState,d=e===Ys.b.INVITED,u=e===Ys.b.JOINED,h=a.type===E.a.Subreddit?c||[]:a.members,m=()=>{!i&&l&&o()},b="boolean"==typeof i?()=>i:void 0;return n!==E.a.Subreddit||i||c||o(),r.a.createElement(Nr,{form:!0,innerContent:!0},r.a.createElement(Kr,{title:`${s} ${Object(_.a)("en","app.chat.channels.groupMembers")}`}),r.a.createElement(Wr,{loadMoreRows:m,isLoadMoreRowsComplete:b,threshold:0},r.a.createElement(is,{channelId:t,members:h,useNSFWIcons:d||u}),i&&r.a.createElement(Vr,{role:"progressbar"},Object(_.a)("en","app.chat.members.loading"))),r.a.createElement(Lr,{secondaryButtonOnly:!0,secondaryButtonText:Object(_.a)("en","app.button.done")}))}return null}),Zr=n("./node_modules/lodash/uniqBy.js"),Qr=n.n(Zr),Yr=n("./src/chat/actions/sendbird/index.ts"),Xr=n("./src/chat/actions/user.ts"),$r=n("./node_modules/lodash/last.js"),eo=n.n($r),to=n("./src/chat/components/SearchBar/index.m.less"),no=n.n(to);const ao=i.a.span("Bubble",no.a),so=i.a.span("SearchBarLabel",no.a),co=i.a.span("SearchBarField",no.a),ro=i.a.input("SearchBarInput",no.a),oo=i.a.wrapped(Ca,"SearchBarWrapper",no.a);class io extends r.a.Component{constructor(e){super(e),this.bubbleRefs={},this.searchBarInputRef={},this.timeoutToken=null,this.onBubbleKey=(e=>t=>{switch(t.key){case _s:case gs:return Object(na.findDOMNode)(this.searchBarInputRef).focus(),this.props.onUnselect(e.id);case js:{const e=t.target;if(e.previousElementSibling){e.previousElementSibling.focus()}break}case Cs:{const e=t.target;if(e.nextElementSibling){e.nextElementSibling.focus()}}}}),this.onBubbleKey=this.onBubbleKey.bind(this),this.onFilterChange=this.onFilterChange.bind(this),this.stopEnter=this.stopEnter.bind(this),this.searchKeyHandler=this.searchKeyHandler.bind(this)}stopEnter(e){e.key===Os&&e.preventDefault()}onFilterChange(e){this.props.onFilterContacts(e.currentTarget.value)}searchKeyHandler(e){var t=this.props;const n=t.onFilterContacts,a=t.onIdentifyContact,s=t.onIdentifyContactTimeout,c=e.currentTarget,r=()=>c.value;switch(this.timeoutToken&&clearTimeout(this.timeoutToken),this.timeoutToken=setTimeout(()=>{r()&&a(r())},s),e.key){case Os:return a((()=>c.id)());case js:case _s:case gs:if(0===r().length){const e=eo()(this.props.selectedContacts);e&&e.name&&Object(na.findDOMNode)(this.bubbleRefs[e.name]).focus()}}return n(r())}render(){var e=this.props;const t=e.filter,n=e.innerRef,a=e.resetFilter,s=e.selectedContacts,c=e.onFilterReset,o=a?"":t;return r.a.createElement(oo,{autoScrollBottom:!0},r.a.createElement(so,null,Object(_.a)("en","app.chat.contactList.to")),r.a.createElement(co,null,s&&s.length>0&&s.map((e,t)=>r.a.createElement(ao,{key:`selected-contact-${t}`,tabIndex:0,onKeyDown:Object(Gt.a)(this.onBubbleKey(e)),ref:t=>{this.bubbleRefs[e.name]=t}},e.name)),r.a.createElement(ro,{key:"search-bar",type:"text",autoFocus:!0,value:o,onFocus:c,onChange:this.onFilterChange,onKeyDown:this.stopEnter,onKeyUp:this.searchKeyHandler,ref:e=>{this.searchBarInputRef=e},innerRef:e=>n(e)})))}}io.defaultProps={onIdentifyContactTimeout:1e3};var lo=n("./src/chat/controls/Checkbox/index.tsx"),uo=n("./src/chat/components/SelectableUser/index.m.less"),ho=n.n(uo);const mo=i.a.wrapped(lo.a,"Checkbox",ho.a),bo=i.a.wrapped(ae,"UserPic",ho.a),po=i.a.span("Name",ho.a);class go extends c.Component{constructor(){super(...arguments),this.CONTACT_FORM_NAME="contactForm"}render(){var e=this.props,t=e.contact;const n=t.id,a=t.name,s=e.formName,c=e.isChecked,o=e.onChange;return r.a.createElement(mo,{type:"checkbox",name:s,value:a,onChange:o,checked:c(n),id:n},r.a.createElement(bo,{userId:n}),r.a.createElement(po,null,a))}}var Oo=n("./src/chat/components/UnselectableUser/index.m.less"),jo=n.n(Oo);const fo=i.a.span("Wrapper",jo.a),Co=i.a.span("Content",jo.a),Eo=i.a.wrapped(ae,"UserPic",jo.a),_o=i.a.span("Name",jo.a),Io=i.a.span("Context",jo.a);class vo extends c.Component{render(){var e=this.props,t=e.contact;const n=t.id,a=t.name,s=e.context;return r.a.createElement(fo,null,r.a.createElement(Co,null,r.a.createElement(Eo,{userId:n}),r.a.createElement(_o,null,a)),r.a.createElement(Io,null,s))}}var yo=n("./src/chat/selectors/contacts.ts"),xo=n("./src/chat/components/OverlayCreateChannel/index.m.less"),So=n.n(xo);const No="contactForm",wo=i.a.div("Content",So.a),ko=i.a.wrapped(lo.a,"Checkbox",So.a),To=i.a.wrapped(Ca,"Scroller",So.a),Mo=i.a.div("ListItem",So.a),Do=i.a.div("ListItemHeader",So.a),Ao=i.a.h4("ChatListHeader",So.a),Lo=i.a.span("Name",So.a),Uo=i.a.span("Error",So.a),Bo=i.a.wrapped(_c,"ChannelNameInput",So.a),Ro=i.a.div("OverlayContent",So.a),Po=i.a.wrapped(e=>r.a.createElement("div",{className:Object(Oe.a)(e.className,{[So.a.shown]:e.isShown})},e.children),"ChannelNameWrapper",So.a);Po.displayName="ChannelNameWrapper";const Ho=e=>e.toLocaleLowerCase(),Fo=Object(K.a)({channelAction:e=>Object(bt.c)(e),channel:e=>Object(S.k)(e),contacts:yo.i,isCreatingChannel:S.I,loadedContacts:yo.j,knownContacts:yo.h,memberCount:e=>Object(S.A)(e,"memberCount"),existingGroupUsers:e=>{const t=Object(S.A)(e,"members");return t&&t.map(e=>e.id)},selectedUsers:yo.k,selectedUsersCount:yo.l}),Ko=Object(o.b)(Fo,e=>({onCreateNewChannel:(t,n)=>e(Object(p.C)(t,n,!0)),onInviteUsersToExistingChannel:t=>e(Object(p.I)(t)),onIdentifyContact:t=>e(Object(Yr.k)({username:t})),onCancelAndGoBack:()=>{e(Object(fe.a)()),e(Object(Ce.d)())},onSelectUser:t=>e(Object(Xr.m)(t)),onUnselectUser:t=>e(Object(Xr.t)(t)),removeAllSelectedUsers:()=>e(Object(Xr.s)()),requestSuggestedContacts:()=>e(Object(Yr.n)())}));class Go extends r.a.Component{constructor(e){super(e),this.searchBarElement=null,this.isUserSelected=(e=>this.props.selectedUsers.includes(e)),this.isCreateChannelURLAction=(()=>this.props.channelAction===Ys.a.CREATE),this.isInviteMembersURLAction=(()=>this.props.channelAction===Ys.a.INVITE_MEMBERS),this.isSubredditChannel=(()=>!(!this.props.channel||this.props.channel.type!==E.a.Subreddit)),this.isExistingGroupUser=(e=>!(!(this.isInviteMembersURLAction()&&this.props.existingGroupUsers&&this.props.existingGroupUsers.includes(e))||this.isUserSelected(e))),this.hasTooManyMembers=(()=>{var e=this.props;const t=e.isCreatingChannel,n=e.memberCount,a=e.selectedUsersCount;if(t)return a>Ys.e;return(a||0)+(n||0)>Ys.e}),this.isSubmitDisabled=(e=>{var t=this.props;const n=t.isCreatingChannel,a=t.selectedUsersCount,s=this.isCreateChannelURLAction(),c=e<0||e===Ys.d,r=a>1,o=this.hasTooManyMembers();return!this.isSubredditChannel()&&(!a||n||s&&r&&(c||o)||!s&&o)}),this.getInviteMembersText=(()=>this.isSubredditChannel()?Object(_.a)("en","app.chat.channels.addToRoom"):Object(_.a)("en","app.chat.channels.addToGroup")),this.primaryButtonText=(()=>this.isInviteMembersURLAction()?this.getInviteMembersText():Object(_.a)("en","app.button.init")),this.getBlockedContactText=(e=>e?Object(_.a)("en","app.chat.contactList.blockedContact"):this.isSubredditChannel()?Object(_.a)("en","app.chat.contactList.existingRoomContact"):Object(_.a)("en","app.chat.contactList.existingGroupContact")),this.getOverlayTitle=(()=>this.isCreateChannelURLAction()?Object(_.a)("en","app.chat.channels.createGroup"):this.getInviteMembersText()),this.getOverlayMessage=(()=>{var e=this.props;const t=e.memberCount,n=e.selectedUsersCount,a=n+(this.isCreateChannelURLAction()?1:t),s=(Ys.e-a).toString();return n===Ys.e?this.isSubredditChannel()?Object(_.a)("en","app.chat.channels.addGroupMembers").replace("%0",s):Object(_.a)("en","app.chat.channels.maxGroupSize"):""}),this.getSelectedContacts=this.getSelectedContacts.bind(this),this.onContactsSelect=this.onContactsSelect.bind(this),this.onFilterContacts=this.onFilterContacts.bind(this),this.onFilterReset=this.onFilterReset.bind(this),this.onSubmit=this.onSubmit.bind(this),this.onCancel=this.onCancel.bind(this),this.handleChannelNameInput=this.handleChannelNameInput.bind(this),this.state={filter:"",resetFilter:!1,groupName:""}}componentWillMount(){this.props.requestSuggestedContacts()}componentWillUnmount(){this.props.removeAllSelectedUsers()}onContactsSelect(e){const t=e.target.id;var n=this.props;const a=n.onSelectUser,s=n.onUnselectUser,c=n.selectedUsers,r=n.selectedUsersCount;c.includes(t)?s(t):(r<Ys.e||r<1)&&(this.setState(e=>Object.assign({},e,{resetFilter:!0})),a(t)),this.searchBarElement&&this.searchBarElement.focus()}onFilterContacts(e){this.setState({filter:e})}onFilterReset(){this.setState({filter:"",resetFilter:!1})}handleChannelNameInput(e){this.setState({groupName:e})}onSubmit(){var e=this.props;const t=e.onCreateNewChannel,n=e.onInviteUsersToExistingChannel,a=this.state.groupName,s=this.getSelectedContacts().map(e=>e.id);s&&s.length&&(this.isCreateChannelURLAction()?t(s,a.trim()):n(s))}onCancel(){this.props.onCancelAndGoBack()}getSelectedContacts(){var e=this.props;const t=e.loadedContacts,n=e.selectedUsers,a=[];return n.map(e=>{for(const n in t)Ho(t[n].id)===e&&a.push(t[n])}),a}getFilteredContacts(){const e=this.props.contacts,t=this.state.filter;return t?e.filter(e=>Ho(e.name).includes(Ho(t))&&!e.isBlocked):e}getLoadedContact(){return this.props.loadedContacts.find(e=>e&&Ho(e.name)===Ho(this.state.filter))}getIsValidUser(e){const t=this.props.knownContacts[Ho(e)];return!t||!t.loaded||t.valid}availableCharacters(e){return Ys.d-e.length}render(){var e=this.props;const t=e.className,n=e.onIdentifyContact,a=e.selectedUsersCount;var s=this.state;const c=s.filter,o=s.resetFilter,i=s.groupName,l=this.isUserSelected,d=this.isExistingGroupUser,u=this.onFilterReset,h=this.onFilterContacts,m=this.onContactsSelect,b=this.onSubmit,p=this.onCancel,g=this.getSelectedContacts(),O=this.getFilteredContacts(),j=this.getLoadedContact(),f=!!c&&!j,C=!!j,E=!this.getIsValidUser(c),I=this.handleChannelNameInput,v=this.availableCharacters(i),y=this.isSubmitDisabled(v),x=this.primaryButtonText(),S=this.isCreateChannelURLAction(),N=a>=Ys.e&&!this.isSubredditChannel();return r.a.createElement(Nr,{className:t,onSubmit:Object(Gt.a)(b),innerContent:!0,form:!0},r.a.createElement(Ro,null,r.a.createElement(Kr,{message:this.getOverlayMessage(),title:this.getOverlayTitle(),warning:N}),r.a.createElement(wo,null,S&&r.a.createElement(Po,{isShown:a>1},r.a.createElement(Bo,{handleChannelNameInput:I,placeholder:Object(_.a)("en","app.chat.channels.groupName")},r.a.createElement(Ic.a,{count:v}))),r.a.createElement(io,{innerRef:e=>this.searchBarElement=e,filter:c,resetFilter:o,selectedContacts:g,onFilterReset:u,onFilterContacts:h,onIdentifyContact:n,onUnselect:this.props.onUnselectUser}),r.a.createElement(To,{loadMoreRows:ut.a,threshold:0},Qr()(O,e=>e.name).map(e=>r.a.createElement(Mo,{key:e.name},d(e.id)||e.isBlocked?r.a.createElement(vo,{contact:e,context:this.getBlockedContactText(!!e.isBlocked)}):r.a.createElement(go,{formName:No,contact:e,onChange:m,isChecked:l}))),(f||C)&&r.a.createElement(Do,null,r.a.createElement(Ao,null,Object(_.a)("en","app.chat.contactList.potentialsHeader"))),f&&!C&&r.a.createElement(Mo,null,r.a.createElement(ko,{type:"checkbox",disabled:!0,name:No,value:c,onChange:m},r.a.createElement(Lo,null,c,E&&r.a.createElement(Uo,null,Object(_.a)("en","app.chat.contactList.invalidUser"))))),C&&j&&r.a.createElement(Mo,null,S||!d(j.id)&&!j.isBlocked?r.a.createElement(go,{formName:No,contact:j,onChange:m,isChecked:l}):r.a.createElement(vo,{contact:j,context:this.getBlockedContactText(!!j.isBlocked)})))),r.a.createElement(Lr,{primaryButtonText:x,primaryButtonDisabled:y,secondaryButtonAction:p})))}}Go.displayName="OverlayCreateChannel";var zo=Ko(Go),Wo=n("./src/chat/actions/sidebar.ts"),Vo=n("./src/chat/components/FirstTimeUserExpPromo/index.m.less"),qo=n.n(Vo);const Jo=i.a.div("Wrapper",qo.a),Zo=i.a.span("Header",qo.a),Qo=i.a.span("LabelText",qo.a),Yo=i.a.h5("TitleText",qo.a),Xo=i.a.p("BodyText",qo.a),$o=i.a.wrapped(e=>r.a.createElement(G.a,{className:e.className,viewBox:"0 0 25 25"},r.a.createElement("path",{d:"M18.5 13.17a1.62 1.62 0 0 1-2.35 0c-.31-.3-.48-.73-.48-1.17 0-.44.17-.87.49-1.17a1.7 1.7 0 0 1 2.35 0c.32.3.49.73.49 1.17 0 .44-.17.87-.5 1.17m-4.86-.85c-.03.1-.05.21-.1.32l-.15.28c-.07.1-.14.19-.22.25a1.62 1.62 0 0 1-2.35 0 1.85 1.85 0 0 1-.36-.53c-.05-.1-.07-.21-.1-.32-.01-.1-.03-.21-.03-.32 0-.44.18-.87.5-1.17a1.7 1.7 0 0 1 2.34 0c.32.3.5.73.5 1.17l-.03.32m-5.33 0c-.03.1-.06.21-.11.32-.04.1-.1.2-.15.28-.06.1-.13.19-.21.27a1.67 1.67 0 0 1-2.35 0c-.08-.08-.14-.18-.21-.27a1.85 1.85 0 0 1-.25-.6 1.62 1.62 0 0 1 .47-1.5 1.7 1.7 0 0 1 2.34 0 1.85 1.85 0 0 1 .47.85l.02.33-.02.32M12 0A12.01 12.01 0 0 0 1.99 18.6L.7 22.46a.67.67 0 0 0 .84.84L5.4 22A12.01 12.01 0 0 0 24 12c0-6.62-5.38-12-12-12"}),r.a.createElement("path",{d:"M18.5 13.17a1.62 1.62 0 0 1-2.35 0c-.31-.3-.48-.73-.48-1.17 0-.44.17-.87.49-1.17a1.7 1.7 0 0 1 2.35 0c.32.3.49.73.49 1.17 0 .44-.17.87-.5 1.17",fill:"#FFFFFF"}),r.a.createElement("path",{d:"M13.64 12.32c-.03.1-.05.21-.1.32l-.15.28c-.07.1-.14.19-.22.25a1.62 1.62 0 0 1-2.35 0 1.85 1.85 0 0 1-.36-.53c-.05-.1-.07-.21-.1-.32-.01-.1-.03-.21-.03-.32 0-.44.18-.87.5-1.17a1.7 1.7 0 0 1 2.34 0c.32.3.5.73.5 1.17l-.03.32",fill:"#FFFFFF"}),r.a.createElement("path",{d:"M8.3 12.32a1.85 1.85 0 0 1-.25.6c-.06.1-.13.19-.21.27a1.67 1.67 0 0 1-2.35 0c-.08-.08-.14-.18-.21-.27a1.85 1.85 0 0 1-.25-.6 1.62 1.62 0 0 1 .47-1.5 1.7 1.7 0 0 1 2.34 0 1.85 1.85 0 0 1 .47.85l.02.33-.02.32",fill:"#FFFFFF"})),"ChatBubbleIcon",qo.a),ei=i.a.wrapped(_e.a,"Button",qo.a),ti=Object(o.b)(void 0,e=>({setSeenSubredditChatFtuxAction:()=>e(Object(l.f)()),viewSubredditChatFtuxPromoTracking:()=>e(Object(Ce.D)()),dismissSubredditChatFtuxPromoTracking:()=>e(Object(Ce.r)())}));class ni extends c.Component{componentDidMount(){this.props.viewSubredditChatFtuxPromoTracking()}closePromo(){this.props.setSeenSubredditChatFtuxAction(),this.props.dismissSubredditChatFtuxPromoTracking()}render(){return r.a.createElement(Jo,{className:this.props.className},r.a.createElement(Zo,null,r.a.createElement("span",null,r.a.createElement(Qo,null,Object(_.a)("en","app.chat.firstTimeUserExpExp.label")),r.a.createElement(Yo,null,Object(_.a)("en","app.chat.firstTimeUserExp.title"))),r.a.createElement($o,null)),r.a.createElement(Xo,null,Object(_.a)("en","app.chat.firstTimeUserExp.body")),r.a.createElement(ei,{primary:!0,onClick:()=>this.closePromo()},Object(_.a)("en","app.chat.firstTimeUserExp.button")))}}ni.displayName="FirstTimeUserExpPromo";var ai=ti(ni),si=n("./src/chat/icons/svgs/ChatNew/index.tsx"),ci=n("./src/chat/components/Sidebar/CreateChannel/index.m.less"),ri=n.n(ci);const oi=i.a.wrapped(si.a,"ChatNew",ri.a),ii=i.a.span("Button",ri.a),li=i.a.span("Text",ri.a);var di=Object(o.b)(null,e=>({createChannel:()=>{e(Object(fe.b)(Object(Ie.channelUrl)("create"))),e(Object(Ce.g)())}}))(e=>r.a.createElement(ii,{onClick:e.createChannel,title:Object(_.a)("en","app.layout.header.newChat"),tabIndex:0},r.a.createElement(oi,null),r.a.createElement(li,null,Object(_.a)("en","app.button.init")))),ui=n("./node_modules/lodash/values.js"),hi=n.n(ui),mi=n("./node_modules/react-router-dom/es/index.js"),bi=n("./src/chat/components/Message/Preview.m.less"),pi=n.n(bi);const gi=e=>{if(e.isInvited)return[Object(_.a)("en","app.chat.list.new")];if(!e.message)return[];const t=(({currentUserId:e,isGroup:t,message:n})=>t&&n&&n.sender?e===n.sender.userId?Object(_.a)("en","app.chat.list.prefix.messageOwner"):`${n.sender.nickname}:`:"")(e);switch(e.message.messageData.type){case Ee.b.TEXT:{const n=e.message.messageData.value;return[t," ",Object(Be.b)(n)?Object(_.a)("en","app.chat.list.prefix.sentTextLink"):n]}case Ee.b.POST:return[t," ",Object(_.a)("en","app.chat.list.prefix.sentPostLink")," ",e.message.messageData.subreddit];case Ee.b.EMBED:return[t," ",Object(_.a)("en","app.chat.list.prefix.sentPostLink")," ",e.message.messageData.value];case Ee.b.SNOOMOJI:return[t," ",Object(_.a)("en","app.chat.list.prefix.sentSnoomoji")];default:return[]}},Oi=i.a.wrapped(e=>r.a.createElement("sub",{className:Object(Oe.a)(e.className,{[pi.a.active]:e.isActive,[pi.a.unread]:e.isInvited||e.isUnread})},gi(e)),"MessagePreview",pi.a);var ji=e=>r.a.createElement(G.a,{className:e.className,disable:!0,viewBox:"0 0 9 12"},r.a.createElement("g",{transform:"translate(-321.000000, -286.000000)"},r.a.createElement("path",{d:"M328.379326,295.820899 L329.259195,297.344876 L329.259195,297.344876 C329.33686,297.479395 329.29077,297.651405 329.15625,297.72907 L329.15625,297.72907 C329.02173,297.806735 328.84972,297.760645 328.772055,297.626126 L322.303305,286.421922 L322.303305,286.421922 C322.22564,286.287402 322.27173,286.115392 322.40625,286.037727 L322.40625,286.037727 L322.40625,286.037727 C322.54077,285.960062 322.71278,286.006152 322.790445,286.140672 L323.811767,287.909655 C324.114951,287.754406 324.444225,287.640531 324.791552,287.575791 C324.78955,287.555022 324.784974,287.534806 324.784974,287.513206 C324.784974,287.131053 325.105006,286.820899 325.49997,286.820899 C325.894933,286.820899 326.214965,287.131053 326.214965,287.513206 C326.214965,287.534806 326.210389,287.555022 326.208387,287.575791 C327.841151,287.88013 329.074947,289.270283 329.074947,290.94013 L329.074947,293.333299 C329.074947,294.039453 329.364664,294.716806 329.880318,295.216099 L329.894618,295.229945 C330.119699,295.447883 329.960398,295.820899 329.641796,295.820899 L328.379326,295.820899 Z M326.996393,295.820899 L321.358143,295.820899 C321.039827,295.820899 320.88024,295.447883 321.105321,295.229945 L321.119621,295.216099 C321.635276,294.716806 321.924992,294.039453 321.924992,293.333299 L321.924992,290.94013 C321.924992,290.051737 322.274213,289.242509 322.846942,288.633839 L326.996393,295.820899 Z M325.78125,297.508399 C325.151952,297.508399 324.611984,297.045274 324.375,296.383399 L327.1875,296.383399 C326.950516,297.045274 326.410548,297.508399 325.78125,297.508399 Z"}))),fi=n("./src/chat/components/ChatListItem/index.m.less"),Ci=n.n(fi),Ei=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(a=Object.getOwnPropertySymbols(e);s<a.length;s++)t.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(n[a[s]]=e[a[s]])}return n};const _i=i.a.wrapped(cn,"ChatIcon",Ci.a),Ii=i.a.div("ItemTitle",Ci.a),vi=i.a.div("ItemControls",Ci.a),yi=i.a.span("ChannelName",Ci.a),xi=i.a.div("Description",Ci.a),Si=i.a.wrapped(ln,"TimeStamp",Ci.a),Ni=e=>{var t=e.className,n=Ei(e,["className"]);return r.a.createElement(Si,Object.assign({className:Object(Oe.a)(t,{[Ci.a.active]:n.active,[Ci.a.unread]:n.unread})},n),n.children)},wi=i.a.wrapped(e=>r.a.createElement("h4",{className:Object(Oe.a)(e.className,{[Ci.a.active]:e.active,[Ci.a.unread]:e.unread})},e.children),"ItemTitleName",Ci.a),ki=Object(K.a)({inviterContact:(e,t)=>{const n=e.channels.models[t.channelId];return Object(yo.e)(e,n)}});var Ti=Object(o.b)(ki)(i.a.wrapped(e=>{const t=e.className,n=e.channelId,a=e.currentUserId,s=e.isGroup,c=e.isSelected,o=e.channelState,i=e.userId,l=e.secondUserId,d=e.name,u=e.message,h=e.muted,m=e.unread,b=e.mentionCount,p=e.updatedAt,g=o===Ys.b.INVITED,O=g?Object(Ie.channelAction)(n,Ys.a.VIEW_INVITE):Object(Ie.channelUrl)(n);return r.a.createElement(mi.a,{to:O,className:Object(Oe.a)(t,{[Ci.a.selected]:c})},h&&r.a.createElement(vi,null,r.a.createElement(ji,null)),r.a.createElement(_i,{userId:i,secondUserId:l}),r.a.createElement(Ii,null,r.a.createElement(wi,{unread:m||g,active:c},r.a.createElement(yi,null,d),p&&r.a.createElement(Ni,{date:p,unread:m,active:c},T(new Date(p)))),r.a.createElement(xi,null,r.a.createElement(Oi,{currentUserId:a,isGroup:s,isInvited:g,isUnread:m,isActive:c,message:u}),!!b&&r.a.createElement(Ic.b,{count:b}))))},"ChatListItem",Ci.a)),Mi=n("./src/chat/components/Sidebar/SidebarDivider/index.m.less"),Di=n.n(Mi);const Ai=i.a.div("Divider",Di.a),Li=e=>r.a.createElement(Ai,null,e.children),Ui=i.a.div("SubDivider",Di.a),Bi=e=>r.a.createElement(Ui,null,e.children);var Ri=n("./src/chat/controls/InviteExpander/index.m.less"),Pi=n.n(Ri);const Hi=i.a.div("ButtonContainer",Pi.a),Fi=i.a.wrapped(e=>r.a.createElement("button",{onClick:e.onClick,className:Object(Oe.a)(e.className,{[Pi.a.hidden]:e.hidden})},e.children),"TextButton",Pi.a),Ki=i.a.div("LoadingIndicator",Pi.a);var Gi=Object(o.b)(null,e=>({onTrackExpandToggle:t=>e(t?Object(Ce.j)():Object(Ce.e)()),expandInviteList:()=>e(Object(p.E)()),collapseInviteList:()=>e(Object(p.A)()),fetchInvitedChannels:()=>e(Object(p.G)())}))(class extends r.a.Component{constructor(e){super(e),this.onExpand=this.onExpand.bind(this),this.onCollapse=this.onCollapse.bind(this),this.state={expanded:!1}}onExpand(){var e=this.props;const t=e.expandInviteList,n=e.fetchInvitedChannels,a=e.fetchingInvitedChannels,s=e.hasMoreInvitedChannels,c=e.inviteListExpanded;c?s&&!a&&c&&n():t(),this.props.onTrackExpandToggle(!0)}onCollapse(){this.props.collapseInviteList(),this.props.onTrackExpandToggle(!1)}render(){var e=this.props;const t=e.className,n=e.fetchingInvitedChannels,a=e.inviteListExpanded,s=e.hasMoreInvitedChannels;return n?r.a.createElement(Ki,{role:"progressbar"},Object(_.a)("en","app.chat.channels.loading")):r.a.createElement(Hi,{className:t},r.a.createElement(Fi,{onClick:this.onExpand,hidden:a&&!s},Object(_.a)("en","app.chat.list.showMore")),r.a.createElement(Fi,{onClick:this.onCollapse,hidden:!a},Object(_.a)("en","app.chat.list.collapse")))}});const zi=(e,t)=>t.type===E.a.Group?t.name&&"Group Channel"!==t.name?t.name:t.members.map(e=>e.name).join(", "):e.firstUser.name,Wi=(e,t)=>{const n=t.channelState===Ys.b.JOINED,a=t.channelState===Ys.b.INVITED;let s,c,r;for(const o of t.members)o.id===e?c=o:o.id===(t.inviter&&t.inviter.id)?r=o:(!s||s.name.toLocaleLowerCase()>o.name.toLocaleLowerCase())&&(s=o);return t.type===E.a.Direct?{firstUser:s||t.inviter}:n&&c&&!s&&!r?{firstUser:c}:n&&c&&r?{firstUser:c,secondUser:r}:n&&c&&s?{firstUser:c,secondUser:s}:a&&c&&r?{firstUser:c,secondUser:r}:a&&c&&t.inviter?{firstUser:c,secondUser:t.inviter}:{firstUser:t.inviter}},Vi=Object(K.a)({currentUserId:Ya.a,invitedChannels:S.G,selectedChannelId:e=>Object(S.A)(e,"channelId"),fetchingInvitedChannels:S.c,inviteListExpanded:S.F,hasMoreInvitedChannels:S.C});var qi=Object(o.b)(Vi)(e=>{const t=e.currentUserId,n=e.fetchingInvitedChannels,a=e.hasMoreInvitedChannels,s=e.invitedChannels,c=e.inviteListExpanded,o=e.selectedChannelId;let i=s.slice(0,2);return c&&(i=s),s&&s.length?r.a.createElement(r.a.Fragment,null,r.a.createElement(Li,null,Object(_.a)("en","app.chat.channels.requests")),hi()(i).map((e,n)=>{const a=Wi(t,e),s=e.channelId,c=e.lastMessage,i=e.channelState,l=e.unreadMessageCount,d=e.unreadMentionCount;return r.a.createElement(Ti,{key:s,channelId:s,channelState:i,name:zi(a,e),isSelected:s===o,isGroup:e.type===E.a.Group,message:c,updatedAt:c&&c.createdAt,unread:!!l,mentionCount:d,currentUserId:t,userId:a&&a.firstUser?a&&a.firstUser.id:"",secondUserId:a&&a.secondUser?a&&a.secondUser.id:""})}),s.length>2?r.a.createElement(Gi,{fetchingInvitedChannels:n,hasMoreInvitedChannels:a,inviteListExpanded:c}):null):null}),Ji=n("./src/chat/components/BasicJoined/index.m.less"),Zi=n.n(Ji);const Qi=i.a.div("LoadingIndicator",Zi.a),Yi=i.a.p("Text",Zi.a),Xi=Object(K.a)({currentUserId:Ya.a,fetchingJoinedChannels:S.e,hasMoreJoinedChannels:S.E,joinedChannels:S.P,selectedChannelId:e=>Object(S.A)(e,"channelId")});var $i=Object(o.b)(Xi,e=>({fetchJoinedChannels:()=>e(Object(p.H)())}))(e=>{const t=e.className,n=e.currentUserId,a=e.fetchingJoinedChannels,s=e.joinedChannels,c=e.selectedChannelId;return r.a.createElement("div",{className:t},r.a.createElement(Li,null,Object(_.a)("en","app.chat.channels.chats")),(!s||!s.length)&&r.a.createElement(Yi,null,Object(_.a)("en","app.chat.emptyState.info")),s.map((e,t)=>{const a=Wi(n,e),s=e.channelId,o=e.lastMessage,i=e.channelState,l=e.unreadMessageCount,d=e.unreadMentionCount;return r.a.createElement(Ti,{key:s,channelId:s,channelState:i,name:zi(a,e),isSelected:s===c,isGroup:e.type===E.a.Group,message:o,updatedAt:o&&o.createdAt,unread:!!l,mentionCount:d,currentUserId:n,userId:a&&a.firstUser?a&&a.firstUser.id:"",secondUserId:a&&a.secondUser?a&&a.secondUser.id:""})}),a&&r.a.createElement(Qi,{role:"progressbar"},Object(_.a)("en","app.chat.channels.loading")))}),el=n("./src/chat/components/Sidebar/DirectsPanel/index.m.less"),tl=n.n(el);const nl=i.a.wrapped(Ca,"Scroller",tl.a),al=Object(K.a)({fetchingJoinedChannels:S.e,hasMoreJoinedChannels:S.E});var sl=Object(o.b)(al,e=>({fetchJoinedChannels:()=>e(Object(p.H)())}))(e=>{const t=e.fetchingJoinedChannels,n=e.fetchJoinedChannels,a=e.hasMoreJoinedChannels;return r.a.createElement(nl,{loadMoreRows:()=>{!t&&a&&n()},threshold:0},r.a.createElement(qi,null),r.a.createElement($i,null))}),cl=n("./src/chat/components/SubredditHeader/index.m.less"),rl=n.n(cl);const ol=i.a.wrapped(pn,"Group",rl.a),il=i.a.wrapped(gn,"Key",rl.a),ll=i.a.wrapped(e=>r.a.createElement(G.a,Object.assign({},e,{viewBox:"0 0 25 25"}),r.a.createElement("g",null,r.a.createElement("path",{d:"M18.5 13.17a1.62 1.62 0 0 1-2.35 0c-.31-.3-.48-.73-.48-1.17 0-.44.17-.87.49-1.17a1.7 1.7 0 0 1 2.35 0c.32.3.49.73.49 1.17 0 .44-.17.87-.5 1.17m-4.86-.85c-.03.1-.05.21-.1.32l-.15.28c-.07.1-.14.19-.22.25a1.62 1.62 0 0 1-2.35 0 1.85 1.85 0 0 1-.36-.53c-.05-.1-.07-.21-.1-.32-.01-.1-.03-.21-.03-.32 0-.44.18-.87.5-1.17a1.7 1.7 0 0 1 2.34 0c.32.3.5.73.5 1.17l-.03.32m-5.33 0c-.03.1-.06.21-.11.32-.04.1-.1.2-.15.28-.06.1-.13.19-.21.27a1.67 1.67 0 0 1-2.35 0c-.08-.08-.14-.18-.21-.27a1.85 1.85 0 0 1-.25-.6 1.62 1.62 0 0 1 .47-1.5 1.7 1.7 0 0 1 2.34 0 1.85 1.85 0 0 1 .47.85l.02.33-.02.32M12 0A12.01 12.01 0 0 0 1.99 18.6L.7 22.46a.67.67 0 0 0 .84.84L5.4 22A12.01 12.01 0 0 0 24 12c0-6.62-5.38-12-12-12"}),r.a.createElement("path",{d:"M18.5 13.17a1.62 1.62 0 0 1-2.35 0c-.31-.3-.48-.73-.48-1.17 0-.44.17-.87.49-1.17a1.7 1.7 0 0 1 2.35 0c.32.3.49.73.49 1.17 0 .44-.17.87-.5 1.17",fill:"#FFFFFF"}),r.a.createElement("path",{d:"M13.64 12.32c-.03.1-.05.21-.1.32l-.15.28c-.07.1-.14.19-.22.25a1.62 1.62 0 0 1-2.35 0 1.85 1.85 0 0 1-.36-.53c-.05-.1-.07-.21-.1-.32-.01-.1-.03-.21-.03-.32 0-.44.18-.87.5-1.17a1.7 1.7 0 0 1 2.34 0c.32.3.5.73.5 1.17l-.03.32",fill:"#FFFFFF"}),r.a.createElement("path",{d:"M8.3 12.32a1.85 1.85 0 0 1-.25.6c-.06.1-.13.19-.21.27a1.67 1.67 0 0 1-2.35 0c-.08-.08-.14-.18-.21-.27a1.85 1.85 0 0 1-.25-.6 1.62 1.62 0 0 1 .47-1.5 1.7 1.7 0 0 1 2.34 0 1.85 1.85 0 0 1 .47.85l.02.33-.02.32",fill:"#FFFFFF"}))),"SubChat",rl.a),dl=i.a.span("TextOverflow",rl.a),ul=i.a.span("Icon",rl.a),hl=i.a.wrapped(q,"NSFWIcon",rl.a),ml=i.a.img("SubredditHeaderIcon",rl.a),bl=i.a.div("SubredditHeaderTitle",rl.a),pl=i.a.wrapped(e=>r.a.createElement("h3",{className:Object(Oe.a)(e.className,{[rl.a.selected]:e.isSelected})},e.children),"SubredditName",rl.a),gl=i.a.wrapped(e=>r.a.createElement("h4",{className:Object(Oe.a)(e.className,{[rl.a.selected]:e.isSelected})},e.children),"ChannelName",rl.a);var Ol=i.a.wrapped(e=>r.a.createElement("div",{className:e.className},e.isNSFW?r.a.createElement(hl,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(ml,{alt:e.subredditName,src:e.subredditIconUrl&&e.subredditIconUrl.length?e.subredditIconUrl:`${F.a.assetPath}/img/chat/community-icon.png`}),r.a.createElement(ul,null,r.a.createElement(ll,null))),r.a.createElement(bl,null,r.a.createElement(pl,{isSelected:e.isSelected},r.a.createElement(dl,null,`r/${e.subredditName}`)),r.a.createElement(gl,{isSelected:e.isSelected},void 0===e.isPublic||e.isPublic?r.a.createElement(ol,null):r.a.createElement(il,null),r.a.createElement(dl,null,e.channelName)))),"SubredditHeader",rl.a),jl=n("./src/chat/components/SubredditInvitedLink/index.m.less"),fl=n.n(jl);var Cl=i.a.wrapped(e=>r.a.createElement(mi.a,{className:Object(Oe.a)(e.className,{[fl.a.selected]:e.isSelected}),to:Object(Ie.channelAction)(e.channel.channelId,Ys.a.VIEW_INVITE,e.subreddit.name)},r.a.createElement(Ol,{channelName:e.channel.name,subredditName:e.subreddit.name,subredditIconUrl:e.subreddit.iconImg,isSelected:e.isSelected,isPublic:e.channel.isPublic})),"SubredditInvitedLink",fl.a);const El=Object(K.a)({fetchingInvitedSubredditChannels:S.d,hasMoreInvitedSubredditChannels:S.D,inviteListExpanded:S.F,subreddits:e=>Object(or.d)(e),subredditChannels:e=>Object(S.o)(e),selectedChannelId:e=>Object(S.A)(e,"channelId")});var _l=Object(o.b)(El)(class extends r.a.Component{shouldComponentUpdate(e,t){return!s()(this.props,e)||!s()(this.state,t)}render(){var e=this.props;const t=e.fetchingInvitedSubredditChannels,n=e.hasMoreInvitedSubredditChannels,a=e.inviteListExpanded,s=e.subredditChannels,c=e.selectedChannelId,o=e.subreddits,i=e.routeAction;let l=s&&s.slice(0,2);return a&&(l=s),s&&s.length&&l?r.a.createElement(r.a.Fragment,null,r.a.createElement(Li,null,Object(_.a)("en","app.chat.subredditChannel.inviteHeader")),l.map((e,t)=>r.a.createElement(Cl,{key:`subreddit-invited-link-${t}`,channel:e,isSelected:i===Ys.a.VIEW_INVITE&&e.channelId===c,subreddit:o[e.customData.subredditId]})),s.length>2&&r.a.createElement(Gi,{fetchingInvitedChannels:t,hasMoreInvitedChannels:n,inviteListExpanded:a})):null}}),Il=n("./src/chat/components/SubredditJoined/index.m.less"),vl=n.n(Il);const yl=i.a.wrapped(pn,"Group",vl.a),xl=i.a.wrapped(gn,"Key",vl.a),Sl=i.a.ul("Wrapper",vl.a),Nl=i.a.ul("SubredditList",vl.a),wl=i.a.h2("BlankStateText",vl.a),kl=(i.a.span("SubredditName",vl.a),i.a.wrapped(e=>r.a.createElement("li",{key:e.key,className:Object(Oe.a)(e.className,{[vl.a.active]:e.active,[vl.a.unread]:e.hasUnread})},e.children),"SubredditHeader",vl.a)),Tl=i.a.wrapped(e=>r.a.createElement(mi.a,{key:e.key,to:e.to,className:Object(Oe.a)(e.className,{[vl.a.active]:e.active,[vl.a.unread]:e.hasUnread})},e.children),"SubredditChannelLink",vl.a),Ml=i.a.wrapped(({className:e,iconImg:t,keyColor:n})=>r.a.createElement("i",{role:"img",className:e,style:{backgroundColor:n||void 0,backgroundImage:`url("${t||`${F.a.assetPath}/img/chat/community-icon.png`}")`}}),"SubredditIcon",vl.a),Dl=Object(K.a)({subredditList:e=>Object(or.a)(e),selectedChannelId:e=>Object(S.x)(e)}),Al=Object(o.b)(Dl),Ll=e=>{const t=e.subredditList;return t?t.map((t,n)=>{const a=t.sortedChannels,s=t.name;return r.a.createElement(kl,{key:t.name},r.a.createElement(Ml,{iconImg:t.iconImg,keyColor:t.keyColor}),`r/${t.name}`,r.a.createElement(Nl,null,((e,t,n)=>{const a=e.routeAction,s=e.selectedChannelId;return t.map((e,t)=>{const c=!!e.unreadMessageCount,o=e.channelId===s&&a!==Ys.a.VIEW_JOIN;return r.a.createElement("li",{key:`joinedItem-${e.channelId}`},r.a.createElement(Tl,{key:e.channelId,active:o,hasUnread:c,to:Object(Ie.channelUrl)(e.channelId,n)},e.isPublic?r.a.createElement(yl,null):r.a.createElement(xl,null),e.name,!!e.unreadMentionCount&&r.a.createElement(Ic.b,{count:e.unreadMentionCount})))})})(e,a,s)))}):null};var Ul=Al(class extends r.a.Component{shouldComponentUpdate(e,t){return!s()(this.props,e)||!s()(this.state,t)}render(){const e=this.props.subredditList;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Li,null,Object(_.a)("en","app.chat.subredditChannel.joinedRooms")),r.a.createElement(Sl,null,e?Ll(this.props):r.a.createElement(wl,null,Object(_.a)("en","app.chat.subredditChannel.blankState"))))}}),Bl=n("./src/chat/components/SubredditRecommendedLink/index.m.less"),Rl=n.n(Bl);const Pl=i.a.wrapped(e=>r.a.createElement("p",{className:Object(Oe.a)(e.className,{[Rl.a.selected]:e.isSelected})},e.children),"ChannelDesc",Rl.a);var Hl=i.a.wrapped(e=>r.a.createElement(mi.a,{className:Object(Oe.a)(e.className,{[Rl.a.selected]:e.isSelected}),to:Object(Ie.channelAction)(e.channel.channelId,Ys.a.VIEW_JOIN,e.subreddit.name)},r.a.createElement(Ol,{channelName:e.channel.name,subredditName:e.subreddit.name,subredditIconUrl:e.subreddit.iconImg,isSelected:e.isSelected}),r.a.createElement(Pl,{isSelected:e.isSelected},e.channel.customData.description),r.a.createElement(Pl,{isSelected:e.isSelected},`${e.channel.memberCount} ${Object(_.a)("en","app.chat.subredditChannel.members")}`)),"SubredditChannelLink",Rl.a),Fl=n("./src/chat/components/SubredditRecommended/index.m.less"),Kl=n.n(Fl);const Gl=Object(K.a)({channels:e=>Object(S.v)(e),subreddits:e=>Object(or.d)(e),selectedChannelId:e=>Object(S.A)(e,"channelId")}),zl=Object(o.b)(Gl),Wl=i.a.div("Wrapper",Kl.a);var Vl=zl(class extends r.a.Component{shouldComponentUpdate(e,t){return!s()(this.props,e)||!s()(this.state,t)}render(){var e=this.props;const t=e.channels,n=e.routeAction,a=e.subreddits,s=e.selectedChannelId;return t&&t.length?r.a.createElement(Wl,null,r.a.createElement(Li,null,Object(_.a)("en","app.chat.subredditChannel.recommendedHeader.title")),r.a.createElement(Bi,null,Object(_.a)("en","app.chat.subredditChannel.recommendedHeader.subText")+" ",r.a.createElement(He,{noUnderline:!0,target:"_blank",rel:"noopener noreferrer",href:`${F.a.redditUrl}/r/SubChats`},"r/SubChats")),t.map((e,t)=>e&&r.a.createElement(Hl,{key:`subreddit-recommended-link-${t}`,channel:e,isSelected:(n===Ys.a.VIEW_JOIN||n===Ys.a.VIEW_PRIVATE||n===Ys.a.DENY)&&e.channelId===s,subreddit:a[e.customData.subredditId]}))):null}}),ql=n("./src/chat/components/Sidebar/SubredditPanel/index.m.less"),Jl=n.n(ql);const Zl=i.a.wrapped(Ca,"Scroller",Jl.a);var Ql=e=>r.a.createElement(Zl,null,r.a.createElement(_l,{routeAction:e.routeAction}),r.a.createElement(Ul,{routeAction:e.routeAction}),r.a.createElement(Vl,{routeAction:e.routeAction})),Yl=n("./src/chat/components/Sidebar/index.m.less"),Xl=n.n(Yl);const $l=0;const ed=({activeIndex:e,children:t})=>t&&t[e||$l];var td=n("./src/chat/constants/sidebar.ts"),nd=n("./src/chat/selectors/experiments.ts"),ad=n("./src/chat/selectors/messages.ts"),sd=n("./src/chat/selectors/promos.ts"),cd=n("./src/chat/selectors/sidebar.ts");const rd=i.a.div("Wrapper",Xl.a),od=i.a.wrapped(class extends c.Component{constructor(e){super(e),this.onTabSelect=this.onTabSelect.bind(this),this.getClonedChildren=this.getClonedChildren.bind(this),this.state={activeIndex:$l}}onTabSelect(e){this.props.onTabSelect?this.props.onTabSelect(e):this.setState({activeIndex:e})}getClonedChildren(){const e=this.props.children,t=this.onTabSelect,n=this.props.activeIndex||this.state.activeIndex;return r.a.Children.map(e,e=>r.a.cloneElement(e,{activeIndex:n,onTabSelect:t}))}render(){const e=this.props.className,t=this.getClonedChildren();return r.a.createElement("div",{className:e},t)}},"Tabs",Xl.a),id=i.a.wrapped(({activeIndex:e,children:t,className:n,onTabSelect:a})=>a?r.a.createElement("div",{className:n},r.a.Children.map(t,(t,n)=>r.a.cloneElement(t,{active:n===e,onTabSelect:()=>a(n)}))):null,"TabList",Xl.a),ld=i.a.wrapped(({active:e,children:t,className:n,onTabSelect:a})=>r.a.createElement("button",{type:"button",className:Object(Oe.a)(n,{[Xl.a.active]:e}),onClick:a},t),"Tab",Xl.a),dd=i.a.wrapped(ai,"FirstTimeUserExpPromo",Xl.a),ud=Object(K.a)({channelId:S.x,displaySubredditChatFtux:sd.c,sidebarActiveIndex:cd.a,subredditChatEnabled:nd.b,unreadCount:ad.k});var hd=Object(o.b)(ud,e=>({onTabSelect:t=>e(Object(Wo.c)(t))}))(class extends r.a.Component{shouldComponentUpdate(e){return!s()(this.props,e)}render(){var e=this.props;const t=e.displaySubredditChatFtux,n=e.onTabSelect,a=e.routeAction,s=e.sidebarActiveIndex,c=e.subredditChatEnabled,o=e.unreadCount,i=o.subredditChannelCount,l=o.basicChannelCount,d=!c||s===td.a.DirectChannels;return r.a.createElement(rd,null,c&&r.a.createElement(od,{activeIndex:s,onTabSelect:n},r.a.createElement(id,null,r.a.createElement(ld,null,Object(_.a)("en","app.button.rooms"),i.unread&&r.a.createElement(Ic.b,null)),r.a.createElement(ld,null,Object(_.a)("en","app.button.directs"),l.unread&&r.a.createElement(Ic.b,{count:l.count}))),r.a.createElement(ed,null,r.a.createElement(Ql,{routeAction:a}),r.a.createElement(sl,null))),t&&r.a.createElement(dd,null),!c&&r.a.createElement(sl,null),d&&r.a.createElement(di,null))}}),md=n("./src/chat/controls/Checkbox/DeleteAllMessages.m.less"),bd=n.n(md);const pd=i.a.wrapped($e.a,"Trash",bd.a),gd=i.a.wrapped(lo.a,"Checkbox",bd.a),Od=i.a.span("CheckboxText",bd.a),jd=i.a.span("CheckboxItem",bd.a),fd=i.a.span("CheckboxDetails",bd.a);var Cd=e=>{const t=e.className,n=e.onChange;return r.a.createElement(jd,{className:t},r.a.createElement(fd,null,r.a.createElement(pd,null),r.a.createElement(Od,null,Object(_.a)("en","app.chat.ban.removeAllMessages"))),r.a.createElement(gd,{onChange:n}))},Ed=n("./src/chat/components/OverlayBanUser/index.m.less"),_d=n.n(Ed);const Id=i.a.div("Container",_d.a),vd=i.a.h4("Warning",_d.a),yd=i.a.p("Details",_d.a),xd=i.a.a("LinkText",_d.a),Sd=i.a.span("CheckboxContainer",_d.a),Nd=Object(K.a)({contacts:yo.d,subredditId:S.B});var wd=Object(o.b)(Nd,e=>({confirmBanClick:t=>{e(Object(Xr.n)(t))}}))(class extends c.Component{constructor(e){super(e),this.toggleCheckbox=(()=>{this.setState({deleteAllMessages:!this.state.deleteAllMessages})}),this.state={deleteAllMessages:!1}}render(){var e=this.props;const t=e.confirmBanClick,n=e.contacts,a=e.subredditId,s=e.subredditName,c=e.userId,o=Object.assign({userId:c,chatBan:!0,subredditId:a},this.state),i=n&&n[c]&&n[c].name,l=Object(Ie.banUserUrl)(s),d=Object(_.a)("en","app.chat.ban.userNameFallback"),u=C()(Object(_.a)("en","app.chat.ban.warning"))({user:i||d});return r.a.createElement(Nr,null,r.a.createElement(cr,{title:Object(_.a)("en","app.chat.ban.header")}),r.a.createElement(Id,null,r.a.createElement(vd,null,u),r.a.createElement(yd,null,Object(_.a)("en","app.chat.ban.details")),r.a.createElement(yd,null,Object(_.a)("en","app.chat.ban.additionalDetails"),r.a.createElement(xd,{href:l},Object(_.a)("en","app.chat.ban.banFromSubreddit"))),r.a.createElement(Sd,null,r.a.createElement(Cd,{onChange:this.toggleCheckbox}))),r.a.createElement(Lr,{primaryButtonText:Object(_.a)("en","app.button.ban"),primaryButtonAction:()=>t(o)}))}}),kd=n("./src/chat/components/OverlayBlockUser/index.m.less"),Td=n.n(kd);const Md=i.a.div("Container",Td.a),Dd=i.a.p("Text",Td.a),Ad=Object(K.a)({blockedUser:(e,t)=>e.contacts.models[t.blockedUserId]});var Ld=Object(o.b)(Ad,e=>({onChannelBlock:t=>{e(Xr.o(t)),e(Ce.t())}}))(e=>{const t=e.blockedUser,n=e.blockedUserId,a=e.onChannelBlock,s=t?t.name:"user";return r.a.createElement(Nr,null,r.a.createElement(cr,{title:`${Object(_.a)("en","app.chat.block.header")} ${s}`}),r.a.createElement(Md,null,r.a.createElement(Dd,null,Object(_.a)("en","app.chat.block.warning")),r.a.createElement(Dd,null,Object(_.a)("en","app.chat.block.details"))),r.a.createElement(Lr,{primaryButtonText:Object(_.a)("en","app.button.block"),primaryButtonAction:()=>a(n)}))}),Ud=n("./src/lib/timeAgo/index.ts"),Bd=n("./src/chat/controls/MediaObject/index.m.less"),Rd=n.n(Bd),Pd=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,s=!1,c=void 0;try{for(var r,o=e[Symbol.iterator]();!(a=(r=o.next()).done)&&(n.push(r.value),!t||n.length!==t);a=!0);}catch(i){s=!0,c=i}finally{try{!a&&o.return&&o.return()}finally{if(s)throw c}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();const Hd=i.a.wrapped(e=>{var t=r.a.Children.toArray(e.children),n=Pd(t,3);const a=n[0],s=n[1],c=n[2];return r.a.createElement("div",{className:e.className},a,s,c)},"MediaObject",Rd.a);var Fd=n("./src/chat/components/OverlayChannelInvited/index.m.less"),Kd=n.n(Fd);const Gd="OverlayNavTooltip--ChatRequest",zd=i.a.div("Container",Kd.a),Wd=i.a.div("TitleContainer",Kd.a),Vd=i.a.wrapped(q,"NSFWIcon",Kd.a),qd=i.a.wrapped(ae,"UserPic",Kd.a),Jd=i.a.span("WarningTextNSFW",Kd.a),Zd=i.a.p("Text",Kd.a),Qd=i.a.wrapped(Hd,"MediaObject",Kd.a),Yd=i.a.span("LightText",Kd.a),Xd=i.a.span("LightTextSmall",Kd.a),$d=i.a.b("Warning",Kd.a),eu=i.a.wrapped(ta,"MessageItemBubble",Kd.a),tu=i.a.wrapped(e=>r.a.createElement("p",{className:Object(Oe.a)(e.className,{[Kd.a.count]:!!e.count})},e.children),"MemberListHeader",Kd.a),nu=Object(K.a)({currentUserId:Ya.a,firstMessage:ad.b,channel:e=>Object(S.k)(e),inviterContact:(e,t)=>{const n=e.channels.models[t.channelId];return Object(yo.e)(e,n)}});var au=Object(o.b)(nu,e=>({onAcceptChannelRequest:()=>{e(Object(Ce.k)()),e(Object(p.z)())},onDeclineChannelRequest:t=>{e(Object(fe.b)(Object(Ie.channelAction)(t,Ys.a.DECLINE_REQUEST)))},setFirstMessageId:t=>e(Object(p.Q)(t))}),(e,t,n)=>Object.assign({},e,t,n,{hasBlockedUsers:()=>{const t=e.channel;return!(!t||!t.members.some(e=>e.isBlockedByMe))}}))(class extends r.a.Component{componentWillReceiveProps(e){var t=this.props;const n=t.channel,a=t.setFirstMessageId;if(n&&e.channel){const t=e.channel.channelId===n.channelId;n.type===E.a.Direct&&!n.firstMessageId&&!n.fetchingFirstMessage&&t&&a(n.channelId)}}constructor(e){super(e),this.renderContent=this.renderContent.bind(this),this.renderUserInfo=this.renderUserInfo.bind(this),this.renderPreviewMessage=this.renderPreviewMessage.bind(this),this.onDeclineChannelRequest=this.onDeclineChannelRequest.bind(this)}onDeclineChannelRequest(){this.props.onDeclineChannelRequest(this.props.channelId)}renderUserInfo(){const e=this.props.inviterContact;if(e){const t=e.linkKarma,n=e.created;return r.a.createElement(Xd,null,`${t} ${Object(_.a)("en","app.chat.request.karma")}`,"  ",`${Object(_.a)("en","app.chat.request.redditor")} ${Object(Ud.b)("en",n,!0)}`)}}renderPreviewMessage(){return this.props.channel&&this.props.firstMessage&&r.a.createElement(zd,null,r.a.createElement(Yd,null,Object(_.a)("en","app.chat.request.preview")),r.a.createElement(eu,{darkBackground:!0,message:this.props.firstMessage,inPreview:!0,fromCurrentUser:!0,embedText:!0}))}renderBlockedUserHeader(){return this.props.hasBlockedUsers()&&r.a.createElement(Zd,null,r.a.createElement($d,null,Object(_.a)("en","app.chat.request.blocked.warning")),Object(_.a)("en","app.chat.request.blocked.details"))}renderMemberListHeader(e,t){const n=e.length,a=(s=["Redditor","Redditors"],e=>1===e?s[0]:s[1])(n);var s;const c=Object(_.a)("en","app.chat.request.defaultTitle");return r.a.createElement(tu,{count:n},`${n} ${a} in ${t||c}`)}renderMembersList(){var e=this.props;const t=e.channel,n=e.channelId,a=e.currentUserId;if(t&&t.members.length){const e=t.members,s=t.name,c=e.filter(({id:e})=>e!==a);return r.a.createElement(r.a.Fragment,null,this.renderBlockedUserHeader(),this.renderMemberListHeader(c,s),r.a.createElement(is,{channelId:n,members:c,useNSFWIcons:!0}))}return null}renderContent(){var e=this.props;const t=e.inviterContact,n=e.channel,a=t&&!!t.isNSFW;if(n&&n.inviter)return r.a.createElement("div",null,r.a.createElement(Qd,null,a?r.a.createElement(Vd,null):r.a.createElement(qd,{userId:n.inviter.id}),r.a.createElement(Wd,null,r.a.createElement(Za,{bold:!0},n.inviter.name),a&&r.a.createElement(Jd,null,Object(_.a)("en","app.chat.request.nsfw"))),this.renderUserInfo()),r.a.createElement(Zd,null,Object(_.a)("en","app.chat.request.details")),n&&n.type===E.a.Group?this.renderMembersList():this.renderPreviewMessage())}render(){var e=this.props;const t=e.channel,n=e.onAcceptChannelRequest,a=this.onDeclineChannelRequest,s=t&&t.type===E.a.Direct,c=s?Object(_.a)("en","app.chat.request.header"):Object(_.a)("en","app.chat.request.groupHeader");return r.a.createElement(Nr,null,r.a.createElement(cr,{channel:t,title:c,showMenu:s,dropdownId:Gd}),this.renderContent(),r.a.createElement(Lr,{secondaryButtonText:Object(_.a)("en","app.button.decline"),secondaryButtonAction:a,primaryButtonText:Object(_.a)("en","app.button.accept"),primaryButtonAction:n}))}}),su=n("./src/chat/components/OverlayChannelRemoval/index.m.less"),cu=n.n(su);const ru=i.a.p("SubHeader",cu.a),ou=i.a.span("Header",cu.a),iu=Object(K.a)({status:(e,t)=>{const n=t.channelId;return Object(S.q)(e,n)}});var lu=Object(o.b)(iu)(e=>r.a.createElement(Nr,null,r.a.createElement(cr,{title:Object(_.a)("en",`app.chat.subredditChannel.removedUserExperience.${e.status}.title`)}),r.a.createElement(r.a.Fragment,null,r.a.createElement(ou,null,Object(_.a)("en",`app.chat.subredditChannel.removedUserExperience.${e.status}.header`)),r.a.createElement(ru,null,Object(_.a)("en",`app.chat.subredditChannel.removedUserExperience.${e.status}.description`))))),du=n("./src/chat/components/OverlayDeclineChannel/index.m.less"),uu=n.n(du);const hu=i.a.p("Text",uu.a);hu.displayName="Text";var mu=Object(o.b)(null,e=>({onDeclineChannelRequest:t=>{e(Object(Ce.l)()),e(Object(p.D)(t))}}))(({onDeclineChannelRequest:e,subredditName:t})=>r.a.createElement(Nr,null,r.a.createElement(cr,{title:Object(_.a)("en","app.chat.request.decline.title")}),r.a.createElement(hu,null,Object(_.a)("en","app.chat.request.decline.details")),r.a.createElement(Lr,{primaryButtonText:Object(_.a)("en","app.button.decline"),primaryButtonAction:()=>e(t)}))),bu=n("./src/lib/makeActionCreator/index.ts");const pu=Object(bu.a)("OVERLAY_CLOSE");var gu=n("./src/chat/components/OverlayDeleteMessage/index.m.less"),Ou=n.n(gu);const ju=i.a.div("Container",Ou.a),fu=i.a.p("Text",Ou.a),Cu=i.a.span("CheckboxContainer",Ou.a),Eu=Object(K.a)({isModerator:S.a,message:(e,t)=>e.messages.models[t.messageId],senderUserId:(e,t)=>Object(ad.f)(e,t.messageId),subredditId:S.B});var _u=Object(o.b)(Eu,(e,t)=>({onConfirmationClick:n=>((e,t,n)=>{e.deleteAllMessages?t(Object(Xr.n)(e)):(t(Object(g.o)(n)),t(Object(Ce.q)()))})(n,e,t.messageId),onCancel:()=>e(pu())}))(class extends c.Component{constructor(e){super(e),this.toggleCheckbox=(()=>{this.setState({deleteAllMessages:!this.state.deleteAllMessages})}),this.state={deleteAllMessages:!1}}render(){const e=this.state.deleteAllMessages;var t=this.props;const n=t.isModerator,a=t.message,s=t.onConfirmationClick,c=t.subredditId,o={userId:t.senderUserId,chatBan:!1,subredditId:c,deleteAllMessages:e};return r.a.createElement(Nr,null,r.a.createElement(cr,{title:Object(_.a)("en","app.chat.delete.title")}),r.a.createElement(ju,null,r.a.createElement(fu,null,Object(_.a)("en","app.chat.delete.warning"),r.a.createElement("br",null),Object(_.a)("en","app.chat.delete.details")),a&&r.a.createElement(ta,{message:a,fromCurrentUser:!0,darkBackground:!0,withButton:!1,embedText:!0}),n&&r.a.createElement(Cu,null,r.a.createElement(Cd,{onChange:this.toggleCheckbox}))),r.a.createElement(Lr,{primaryButtonText:Object(_.a)("en","app.button.delete"),primaryButtonAction:()=>s(o)}))}}),Iu=n("./src/chat/components/OverlayDirectsEmptyState/index.m.less"),vu=n.n(Iu);const yu=i.a.div("OverlayContent",vu.a),xu=i.a.img("Image",vu.a),Su=i.a.div("Info",vu.a),Nu=i.a.h4("Header",vu.a),wu=i.a.p("Text",vu.a);var ku=Object(o.b)(null,e=>({onCreateMessage:()=>e(Object(fe.b)(Object(Ie.channelUrl)("create")))}))(e=>r.a.createElement(Nr,{innerContent:!0},r.a.createElement(cr,{title:Object(_.a)("en","app.chat.emptyState.startChatting")}),r.a.createElement(yu,null,r.a.createElement(xu,{src:`${F.a.assetPath}/img/chat/empty-hero.png`}),r.a.createElement(Su,null,r.a.createElement(Nu,null,Object(_.a)("en","app.chat.emptyState.title")),r.a.createElement(wu,null,Object(_.a)("en","app.chat.emptyState.main")))),r.a.createElement(Lr,{primaryButtonText:Object(_.a)("en","app.chat.actions.new"),primaryButtonAction:e.onCreateMessage,primaryButtonOnly:!0}))),Tu=n("./src/chat/components/OverlayJoinChannel/index.m.less"),Mu=n.n(Tu);const Du="OverlayNavTooltip--JoinSubredditChannel",Au=i.a.div("Wrapper",Mu.a),Lu=i.a.h4("Title",Mu.a),Uu=i.a.p("Desc",Mu.a),Bu=i.a.span("Warning",Mu.a),Ru=Object(K.a)({channel:e=>Object(S.k)(e),subreddit:e=>{const t=Object(S.k)(e);if(t){const n=t.customData.subreddit;if(n)return Object(or.c)(e,n.id)}}});var Pu=Object(o.b)(Ru,e=>({onJoinSubredditChannel:(t,n)=>e(Object(aa.t)(t,n))}))(class extends r.a.Component{constructor(e){super(e),this.renderContent=this.renderContent.bind(this),this.state={isSubmitDisabled:!1}}disableSubmit(){this.setState({isSubmitDisabled:!0})}renderContent(){var e=this.props;const t=e.channel,n=e.subreddit;if(t&&n)return r.a.createElement(Au,null,r.a.createElement(Ol,{isPublic:t.isPublic,channelName:t.name,subredditName:n.name,subredditIconUrl:n.iconImg}),t.customData.description&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Lu,null,Object(_.a)("en","app.chat.subredditChannel.joinDesc")),r.a.createElement(Uu,null,t.customData.description)),n.nsfw&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Lu,null,Object(_.a)("en","app.chat.subredditChannel.nsfwHeader")),r.a.createElement(Uu,null,r.a.createElement(Bu,null,Object(_.a)("en","app.chat.subredditChannel.nsfwWarning")),Object(_.a)("en","app.chat.subredditChannel.nsfwDesc"))))}render(){var e=this.props;const t=e.channel,n=e.subreddit,a=this.state.isSubmitDisabled;if(t&&n){const e=t.memberCount,s=t.channelId,c=`${e} ${Object(_.a)("en","app.chat.subredditChannel.members")}`;return r.a.createElement(Nr,null,r.a.createElement(cr,{channel:t,title:Object(_.a)("en","app.chat.subredditChannel.joinHeader"),subTitle:t&&c,showMenu:!1,dropdownId:Du}),this.renderContent(),r.a.createElement(Lr,{primaryButtonText:Object(_.a)("en","app.button.joinRoom"),primaryButtonAction:()=>{this.props.onJoinSubredditChannel(s,n.name),this.disableSubmit()},primaryButtonOnly:!0,primaryButtonDisabled:a}))}return null}});const Hu=Object(bu.a)("MODERATOR__KICK_USER"),Fu="kickUser",Ku=["tenMinutes","oneHour","oneDay","threeDays"];var Gu=n("./src/chat/routes/chat.ts"),zu=n("./src/chat/components/OverlayKickUser/index.m.less"),Wu=n.n(zu);const Vu=i.a.p("SubHeader",Wu.a),qu=i.a.span("Title",Wu.a),Ju=i.a.span("Header",Wu.a),Zu=i.a.wrapped(lo.a,"Checkbox",Wu.a),Qu=i.a.div("ListItem",Wu.a),Yu=i.a.div("OverlayContent",Wu.a),Xu=Object(K.a)({message:(e,t)=>t.attr===Gu.a.Message?e.messages.models[t.attrId]:void 0,user:(e,t)=>t.attr===Gu.a.User?e.contacts.models[t.attrId]:void 0});var $u=Object(o.b)(Xu,e=>({onKickUser:(t,n)=>{e(((e,t)=>async(n,a)=>{await Is.b.kickUserFromChannel(e,t,"Temporary ban from room").then(()=>{n(Hu({userId:e})),n(Object(fe.a)())})})(t,n)),e(Object(Ce.s)(n))}}))(class extends c.Component{constructor(e){super(e),this.getDurations=(()=>Ku.map(e=>({value:Object(_.a)("en",`app.chat.kick.duration.${e}`),text:Object(_.a)("en",`app.chat.kick.duration.${e}`)}))),this.onSubmit=(e=>{var t=this.props;const n=t.onKickUser,a=t.attrId;Array.prototype.forEach.call(e.target[Fu],(e,t)=>{if(e.checked&&Gu.a.User){const t=(e=>"10 minutes"===e?600:"1 hour"===e?3600:"1 day"===e?86400:"3 days"===e?259200:0)(e.value);n(a,t)}})}),this.renderIntro=this.renderIntro.bind(this)}renderIntro(){const e=Object(_.a)("en","app.chat.kick.headerText");var t=this.props;const n=t.message,a=t.user,s=n&&n.sender?n.sender.nickname:a?"u/"+a.name:"this user";return[r.a.createElement(Ju,null,C()(e)({user:s})),r.a.createElement(Vu,null,Object(_.a)("en","app.chat.kick.headerSubText"))]}render(){const e=this.getDurations,t=this.onSubmit,n=e();return r.a.createElement(Nr,{onSubmit:Object(Gt.a)(t),form:!0,innerContent:!0},r.a.createElement(cr,{title:Object(_.a)("en","app.chat.kick.title")}),r.a.createElement(Yu,null,r.a.createElement(Ca,null,this.renderIntro(),r.a.createElement(qu,null,Object(_.a)("en","app.chat.kick.durationHeader")),n&&n.map(e=>r.a.createElement(Qu,{key:e.value},r.a.createElement(Zu,{type:"radio",name:Fu,value:e.value},e.text))))),r.a.createElement(Lr,{primaryButtonText:Object(_.a)("en","app.button.kick"),secondaryButtonText:Object(_.a)("en","app.button.cancel")}))}}),eh=n("./src/chat/components/OverlayLeaveChannel/index.m.less"),th=n.n(eh);const nh=i.a.div("Container",th.a),ah=i.a.p("Text",th.a),sh=i.a.wrapped(ah,"TextBold",th.a);var ch=Object(o.b)(void 0,e=>({onChannelLeave:(t,n)=>{e(Object(Ce.n)()),e(Object(p.J)(t,n))}}))(e=>{const t=e.channelId,n=e.onChannelLeave,a=e.subredditName;return r.a.createElement(Nr,null,r.a.createElement(cr,{title:Object(_.a)("en","app.chat.leave.title")}),r.a.createElement(nh,null,r.a.createElement(sh,null,a?Object(_.a)("en","app.chat.leave.roomSubHeader"):Object(_.a)("en","app.chat.leave.groupSubHeader")),r.a.createElement(ah,null,a?Object(_.a)("en","app.chat.leave.roomDetails"):Object(_.a)("en","app.chat.leave.groupDetails"))),r.a.createElement(Lr,{primaryButtonText:Object(_.a)("en","app.button.leave"),primaryButtonAction:()=>n(t,a)}))}),rh=n("./src/chat/components/OverlayLockChannel/index.m.less"),oh=n.n(rh);const ih=i.a.div("Container",oh.a),lh=i.a.p("Text",oh.a),dh=i.a.wrapped(lh,"TextBold",oh.a),uh=Object(K.a)({channel:e=>Object(S.m)(e)});var hh=Object(o.b)(uh,e=>({onLockChannel:()=>e(Object(aa.v)(!0,!0)),goBackToChannel:(t,n)=>e(Object(fe.b)(Object(Ie.channelUrl)(t,n)))}))(class extends r.a.Component{constructor(e){super(e),this.toggleSubmitButton=this.toggleSubmitButton.bind(this),this.onLockChannel=this.onLockChannel.bind(this),this.state={isSubmitDisabled:!1}}toggleSubmitButton(e){this.setState({isSubmitDisabled:e})}onLockChannel(){this.toggleSubmitButton(!0),this.props.onLockChannel().catch(()=>{this.toggleSubmitButton(!1)})}isLockingComplete(){var e=this.props;const t=e.channel,n=e.channelId,a=e.goBackToChannel,s=e.subredditName;if(t&&t.isFrozen)return a(n,s)}componentDidUpdate(){this.isLockingComplete()}render(){const e=this.props.subredditName,t=this.state.isSubmitDisabled;return r.a.createElement(Nr,null,r.a.createElement(cr,{title:Object(_.a)("en","app.chat.lock.title")}),r.a.createElement(ih,null,e&&[r.a.createElement(dh,null,Object(_.a)("en","app.chat.lock.roomSubHeader")),r.a.createElement(lh,null,Object(_.a)("en","app.chat.lock.roomDetails"))]),r.a.createElement(Lr,{primaryButtonText:Object(_.a)("en","app.button.lock"),primaryButtonAction:this.onLockChannel,primaryButtonDisabled:t}))}}),mh=n("./src/chat/models/Promo/index.ts"),bh=n("./src/chat/components/OverlayNSFWWarning/index.m.less"),ph=n.n(bh);const gh=i.a.div("Container",ph.a),Oh=i.a.p("Text",ph.a);var jh=Object(o.b)(null,e=>({onAccept:()=>{e(Object(l.d)(mh.b.NSFWWarning)),e(Object(p.z)())}}))(e=>r.a.createElement(Nr,null,r.a.createElement(cr,{title:Object(_.a)("en","app.chat.nsfwWarning.title")}),r.a.createElement(gh,null,r.a.createElement(Oh,null,Object(_.a)("en","app.chat.nsfwWarning.details"))),r.a.createElement(Lr,{primaryButtonText:Object(_.a)("en","app.button.accept"),primaryButtonAction:e.onAccept}))),fh=n("./src/chat/components/OverlayPrivateChannel/index.m.less"),Ch=n.n(fh);const Eh=i.a.div("OverlayContent",Ch.a),_h=i.a.p("Description",Ch.a),Ih=i.a.div("Wrapper",Ch.a),vh=i.a.img("Image",Ch.a),yh=i.a.h3("Title",Ch.a),xh=Object(K.a)({channel:e=>Object(S.k)(e),subreddits:e=>Object(or.d)(e)});var Sh=Object(o.b)(xh)(class extends r.a.Component{getSubreddit(){var e=this.props;const t=e.channel,n=e.subreddits;return t&&n[t.customData.subredditId]}render(){const e=this.props.channel,t=this.getSubreddit();if(e&&t){const n=`${e.memberCount} ${Object(_.a)("en","app.chat.subredditChannel.members")}`;return r.a.createElement(Nr,{innerContent:!0},r.a.createElement(cr,{channel:e,title:Object(_.a)("en","app.chat.subredditChannel.joinHeader"),subTitle:e&&n,showMenu:!1}),r.a.createElement(Eh,null,r.a.createElement(Ih,null,r.a.createElement(vh,{src:`${F.a.assetPath}/img/content-gate-icons/private.png`}),r.a.createElement(yh,null,`r/${t.name} ${Object(_.a)("en","app.chat.privateChannel.title")}`),r.a.createElement(_h,null,Object(_.a)("en","app.chat.privateChannel.description")))))}return null}}),Nh=n("./src/chat/endpoints/users/index.ts"),wh=n("./src/chat/models/Message/report.ts");var kh=n("./src/higherOrderComponents/makeAsync.tsx"),Th=n("./src/lib/loadWithRetries/index.ts");const Mh=()=>null;var Dh=Object(kh.a)({ErrorComponent:Mh,getComponent:()=>Object(Th.a)(()=>n.e("ChatReportFlow").then(n.bind(null,"./src/chat/components/ReportFlow/index.tsx"))).then(e=>e.default),LoadingComponent:Mh});const Ah="reportReason";var Lh;!function(e){e.Threats="threats",e.Violence="violence",e.Personal="personal",e.Impersonation="impersonation",e.MinorSexualization="minorSexualization"}(Lh||(Lh={}));var Uh=n("./src/chat/models/ReportFlow/index.ts"),Bh=n("./src/chat/components/OverlayReport/index.m.less"),Rh=n.n(Bh);const Ph=i.a.wrapped(lo.a,"Checkbox",Rh.a),Hh=i.a.div("ListItem",Rh.a),Fh=Object(K.a)({user:(e,t)=>t.attr===Gu.a.User?e.contacts.models[t.attrId]:void 0,message:(e,t)=>t.attr===Gu.a.Message?e.messages.models[t.attrId]:void 0,messageList:e=>Object(S.y)(e)});var Kh=Object(o.b)(Fh,e=>({onReportUser:(t,n)=>{e(Object(Ce.u)(n.id)),e((e=>async(t,n,{apiContext:a})=>{const s=e.user,c={reason:e.reason,userNickname:s.name};await Object(Nh.a)(a(),c)})({user:n,reason:t})).then(()=>e(Object(fe.a)()))},onReportMessage:(t,n,a)=>{e(Object(Ce.w)(n.messageId,t)),e(((e,t,n)=>async(a,s,{apiContext:c})=>{const r=Object(wh.a)(e,t),o=Object(wh.b)(e,t,n);r&&await Object(Nh.b)(c(),r,o)})(t,n,a))}}))(class extends c.Component{constructor(e){super(e),this.selectReason=(e=>this.setState({selectedReason:e})),this.isMessageReportFlow=(()=>this.props.attr===Gu.a.Message),this.isSubmitDisabled=(()=>!this.state.selectedReason),this.isSingleButton=(()=>this.state.currentFlow!==Uh.a.Default),this.nextReportFlow=(()=>{const e=this.state.selectedReason,t=e&&e.fileComplaint?Uh.a.FileComplaint:Uh.a.BlockUser;this.setState({currentFlow:t})}),this.getMessageReportFlow=(()=>{const e=this.props.message;if(e&&e.sender)return r.a.createElement(Dh,{onRuleChange:e=>this.selectReason(e),currentFlow:this.state.currentFlow,blockedUserId:e.sender.userId,blockedUserName:e.sender.nickname})}),this.getUserReportFlow=(()=>u()(Lh,e=>{const t=Object(_.a)("en",`app.chat.report.reasons.${e}`);return r.a.createElement(Hh,{key:t},r.a.createElement(Ph,{type:"radio",value:t,name:Ah,onChange:e=>this.selectReason({reasonText:e.target.value})},t))})),this.onSubmit=(()=>{const e=this.state.selectedReason;var t=this.props;const n=t.onReportUser,a=t.user;e&&e.reasonText&&(this.isMessageReportFlow()?this.onMessageSubmit():a&&n(e.reasonText,a))}),this.onMessageSubmit=(()=>{var e=this.props;const t=e.message,n=e.messageList,a=e.onReportMessage;var s=this.state;const c=s.currentFlow,r=s.selectedReason;if(r&&r.reasonText&&t){switch(c){case Uh.a.Default:a(r.reasonText,t,n)}this.nextReportFlow()}}),this.state={selectedReason:void 0,currentFlow:Uh.a.Default}}render(){var e=this.props;const t=e.message,n=e.user;return r.a.createElement(Nr,{onSubmit:Object(Gt.a)(this.onSubmit),form:!0},r.a.createElement(cr,{title:Object(_.a)("en","app.chat.report.title")}),r.a.createElement(fa,null,this.isMessageReportFlow()?t&&this.getMessageReportFlow():n&&this.getUserReportFlow()),r.a.createElement(Lr,{primaryButtonDisabled:this.isSubmitDisabled(),secondaryButtonOnly:this.isSingleButton(),secondaryButtonText:this.isSingleButton()?Object(_.a)("en","app.button.close"):Object(_.a)("en","app.button.cancel")}))}}),Gh=n("./src/chat/components/OverlaySubredditChatRequest/index.m.less"),zh=n.n(Gh);const Wh=i.a.wrapped(Ol,"SubredditHeader",zh.a),Vh=i.a.h4("Title",zh.a),qh=i.a.p("Text",zh.a),Jh=Object(K.a)({currentUserId:Ya.a,subredditChannel:e=>Object(S.k)(e),subreddit:e=>Object(or.b)(e)});var Zh=Object(o.b)(Jh,e=>({onAcceptSubredditChannelRequest:(t,n)=>{e(Object(Ce.k)()),e(Object(aa.n)(t,n))},onDeclineChannelRequest:(t,n)=>{e(Object(fe.b)(Object(Ie.channelAction)(t,Ys.a.DECLINE_REQUEST,n)))}}))(class extends r.a.Component{constructor(e){super(e),this.renderContent=this.renderContent.bind(this),this.onDeclineChannelRequest=this.onDeclineChannelRequest.bind(this)}onDeclineChannelRequest(){this.props.onDeclineChannelRequest(this.props.channelId,this.props.subredditName)}renderChatDescription(){const e=this.props.subredditChannel;if(e&&e.type===E.a.Subreddit)return r.a.createElement(r.a.Fragment,null,r.a.createElement(Vh,null,Object(_.a)("en","app.chat.subredditChannel.joinDesc")),r.a.createElement(qh,null,e.customData.description))}renderMembersList(){var e=this.props;const t=e.subredditChannel,n=e.channelId,a=e.currentUserId;if(t&&t.memberCount){const e=t.members.filter(({id:e})=>e!==a);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Vh,null,Object(_.a)("en","app.chat.subredditChannel.members")),r.a.createElement(is,{channelId:n,members:e,useNSFWIcons:!0}))}return null}renderContent(){var e=this.props;const t=e.subredditChannel,n=e.subreddit,a=n&&n.nsfw;if(n&&t)return r.a.createElement(r.a.Fragment,null,r.a.createElement(Wh,{channelName:t.name,subredditName:n.name,subredditIconUrl:n.iconImg,isNSFW:a,isPublic:t.isPublic}),this.renderChatDescription(),this.renderMembersList())}render(){var e=this.props;const t=e.onAcceptSubredditChannelRequest,n=e.subredditChannel,a=e.channelId,s=e.subredditName,c=this.onDeclineChannelRequest,o=n&&n.memberCount;return r.a.createElement(Nr,null,r.a.createElement(cr,{channel:n,title:Object(_.a)("en","app.chat.subredditChannel.joinHeader"),subTitle:`${o} ${Object(_.a)("en","app.chat.subredditChannel.members")}`}),r.a.createElement("div",null,this.renderContent()),r.a.createElement(Lr,{secondaryButtonText:Object(_.a)("en","app.button.decline"),secondaryButtonAction:c,primaryButtonText:Object(_.a)("en","app.button.accept"),primaryButtonAction:()=>t(a,s)}))}});const Qh=e=>e.channelId||e.subredditName?e.subredditName&&e.action===Ys.a.VIEW_JOIN&&e.channelId?r.a.createElement(Pu,{channelId:e.channelId,subredditName:e.subredditName}):e.subredditName&&e.action===Ys.a.VIEW_INVITE&&e.channelId?r.a.createElement(Zh,{channelId:e.channelId,subredditName:e.subredditName}):e.action===Ys.a.VIEW_INVITE&&e.channelId?r.a.createElement(au,{channelId:e.channelId}):e.action===Ys.a.VIEW_MEMBERS&&e.channelId?r.a.createElement(Jr,{channelId:e.channelId}):e.action===Ys.a.LEAVE&&e.channelId?r.a.createElement(ch,{channelId:e.channelId,subredditName:e.subredditName}):e.action===Ys.a.LOCK_CHANNEL_CONFIRMATION&&e.channelId?r.a.createElement(hh,{channelId:e.channelId,subredditName:e.subredditName}):e.action===Ys.a.VIEW_NSFW_CONFIRMATION&&e.channelId?r.a.createElement(jh,null):e.action===Ys.a.DECLINE_REQUEST&&e.channelId?r.a.createElement(mu,{subredditName:e.subredditName}):e.action===me.Ban&&e.subredditName&&e.attrId?r.a.createElement(wd,{subredditName:e.subredditName,userId:e.attrId}):e.action===me.Block&&e.attrId?r.a.createElement(Ld,{channelId:e.channelId,blockedUserId:e.attrId,subredditName:e.subredditName}):e.action===Ee.a.DELETE&&e.attrId?r.a.createElement(_u,{messageId:parseInt(e.attrId)}):e.action===Ee.a.REPORT&&e.attr&&e.attrId&&e.channelId?r.a.createElement(Kh,{attr:e.attr,attrId:e.attrId}):e.action===me.Kick&&e.attr&&e.attrId?r.a.createElement($u,{attr:e.attr,attrId:e.attrId}):e.action===Ys.a.VIEW_PRIVATE&&e.channelId?r.a.createElement(Sh,{channelId:e.channelId,subredditName:e.subredditName}):e.action===Ys.a.DENY&&e.channelId?r.a.createElement(lu,{channelId:e.channelId}):void 0:r.a.createElement(ku,null);var Yh=n("./src/chat/components/FrameContent/index.m.less"),Xh=n.n(Yh);n.d(t,"a",function(){return $h});const $h=Xh.a.Main,em=Object(K.a)({channel:e=>Object(S.l)(e),container:e=>e&&e.container&&e.container.size,isUserAccountEmpty:e=>!e.user.account}),tm=Object(o.b)(em,e=>({setInternalPromos:()=>e(Object(l.e)())})),nm=i.a.main("Main",Xh.a),am=i.a.div("Content",Xh.a),sm=i.a.div("Modal",Xh.a);t.b=tm(class extends r.a.Component{componentDidMount(){this.props.setInternalPromos()}shouldComponentUpdate(e,t){return!s()(this.props,e)||!s()(this.state,t)}getContent(){var e=this.props;const t=e.channel,n=e.container,a=e.isUserAccountEmpty,s=this.props.match.params;switch(!0){case a:return null;case s.action===Ys.a.VIEW_MEMBERS:{const e=this.props.match.params.channelId;return e&&r.a.createElement(Jr,{channelId:e})}case s.action===Ys.a.CREATE:case s.action===Ys.a.INVITE_MEMBERS:return r.a.createElement(zo,null);case n===Ea.a.MINIMIZED:return r.a.createElement(_r.a,null);default:{const e=Qh(s);return r.a.createElement(r.a.Fragment,null,r.a.createElement(hd,{routeAction:s.action}),r.a.createElement(am,null,e?r.a.createElement(sm,null,e):t&&r.a.createElement(Er,{channel:t})))}}}render(){return r.a.createElement(nm,{id:_a.a},this.getContent())}})},"./src/chat/components/Intro/index.m.less":function(e,t,n){e.exports={Wrapper:"_1dxQZlhErc-I-blSStMR5f",wrapper:"_1dxQZlhErc-I-blSStMR5f",SubredditName:"_3Kv3jqbxFImYySH3DSpC5o",subredditName:"_3Kv3jqbxFImYySH3DSpC5o",ChannelName:"_2htqlRdkdf14bGHN8tjChC",channelName:"_2htqlRdkdf14bGHN8tjChC",ChannelDescription:"_3MNba8--t1UBx-AdDlI7-M",channelDescription:"_3MNba8--t1UBx-AdDlI7-M",Users:"_3bsj7mNSaueYuWuWvZFWKW",users:"_3bsj7mNSaueYuWuWvZFWKW",User:"_19wIp0aPDGDq60b_dkaA-l",user:"_19wIp0aPDGDq60b_dkaA-l",UserTitle:"_2MAeUeEw0C9eRjZ5ETlKtA",userTitle:"_2MAeUeEw0C9eRjZ5ETlKtA"}},"./src/chat/components/MemberActionDropdown/index.m.less":function(e,t,n){e.exports={Wrapper:"_3PtM_OV6__gZxG1pYTrSvV",wrapper:"_3PtM_OV6__gZxG1pYTrSvV",active:"vsh8XY7piOUkVO7Dpne-c",Component:"siQdu9tlWQtPG_X76vdUv",component:"siQdu9tlWQtPG_X76vdUv",DropdownRow:"Rk39fDehaLfWZULtyXGyD",dropdownRow:"Rk39fDehaLfWZULtyXGyD",IconButton:"_2ZCSEIUbXFLRFwa3VeJF8h",iconButton:"_2ZCSEIUbXFLRFwa3VeJF8h"}},"./src/chat/components/Message/ActionButtonGroup.m.less":function(e,t,n){e.exports={Wrapper:"_3XbiiumtyFt3sE7RwhZepo",wrapper:"_3XbiiumtyFt3sE7RwhZepo",ActionButton:"_1y_b1drkqSJBFVthfMESWB",actionButton:"_1y_b1drkqSJBFVthfMESWB"}},"./src/chat/components/Message/Bubble.m.less":function(e,t,n){e.exports={ActionButtonGroup:"_21AjIPw12tUSwZ-OuirupT",actionButtonGroup:"_21AjIPw12tUSwZ-OuirupT",MessageBubble:"_1nAhIjgz7pfSX4_5eYD8-T",messageBubble:"_1nAhIjgz7pfSX4_5eYD8-T",disabled:"_1wNcvJbWLV0ZNzE0xAGErH",withBorder:"_3ey3bKaKuSVt2EZD-7y5ng",dark:"_1bCd4DBKF0Osr6neFkpLF3",MessageText:"_1q32G7u8aTwBaLUSN_06Cl",messageText:"_1q32G7u8aTwBaLUSN_06Cl",Snoo:"GrZzft2XLFp0NKhLfZaMc",snoo:"GrZzft2XLFp0NKhLfZaMc",MessageItemBubble:"_19iAGNPVtW4H4cmtpESqQs",messageItemBubble:"_19iAGNPVtW4H4cmtpESqQs"}},"./src/chat/components/Message/FailedMenu.m.less":function(e,t,n){e.exports={ButtonControls:"_1lET98C95RTxCsjGofopjF",buttonControls:"_1lET98C95RTxCsjGofopjF",Button:"Rti1O-QF7eeL7NwtWdIx6",button:"Rti1O-QF7eeL7NwtWdIx6",Text:"_1JyKY8zLHmCkHuVzN4Z5kf",text:"_1JyKY8zLHmCkHuVzN4Z5kf"}},"./src/chat/components/Message/Link.m.less":function(e,t,n){e.exports={Link:"f-H4y4OBMWm-zTJesHDLp",link:"f-H4y4OBMWm-zTJesHDLp",noUnderline:"_2QNuJ1cZnZdkjTqG4TqJUL",LinkedText:"_3p-OO8ZLuqNd4RSZ8rkwyk",linkedText:"_3p-OO8ZLuqNd4RSZ8rkwyk",NameWrapper:"_1Hq0IdlCxGSl9C3f7ukKGL",nameWrapper:"_1Hq0IdlCxGSl9C3f7ukKGL",Favicon:"_35f8GbipRuaLxttOX_IKrM",favicon:"_35f8GbipRuaLxttOX_IKrM",Name:"BHEv75NDp3QRXCKiVNrDz",name:"BHEv75NDp3QRXCKiVNrDz",DetailsWrapper:"_39kO_VUpEOe8XhQf3VjyBZ",detailsWrapper:"_39kO_VUpEOe8XhQf3VjyBZ",Title:"_2s5D_Edw2hyJFbL47FPwxD",title:"_2s5D_Edw2hyJFbL47FPwxD",Description:"_3uSavIlsKFRyGduozas6CT",description:"_3uSavIlsKFRyGduozas6CT",Thumbnail:"_43ndcqW0zpQdGgVg1dbRi",thumbnail:"_43ndcqW0zpQdGgVg1dbRi"}},"./src/chat/components/Message/Preview.m.less":function(e,t,n){e.exports={MessagePreview:"_3jmT-9zep7RA7TC5j3FouL",messagePreview:"_3jmT-9zep7RA7TC5j3FouL",active:"_2lGUX0yuAdDzSX2WjmPrG8",unread:"_16OvoKuUZbmePhJ1n_8Gcn"}},"./src/chat/components/MessageHeader/index.m.less":function(e,t,n){e.exports={TimeStamp:"kImIBv_zM-xrgXW4wo4a1",timeStamp:"kImIBv_zM-xrgXW4wo4a1",UserName:"pqdGGYoXaBuzfPrYLoqaM",userName:"pqdGGYoXaBuzfPrYLoqaM",UserHeader:"_1MCWBTca7AOAi7tbaohdii",userHeader:"_1MCWBTca7AOAi7tbaohdii"}},"./src/chat/components/MessageInput/index.m.less":function(e,t,n){e.exports={SubmitButton:"t19vywnuK8ouXSeGyGCTh",submitButton:"t19vywnuK8ouXSeGyGCTh",SendIcon:"_3wKXNlfxBUxkAv7PrVd8OO",sendIcon:"_3wKXNlfxBUxkAv7PrVd8OO",Form:"_1U1dh1DsLuq2PUt8AwKbAc",form:"_1U1dh1DsLuq2PUt8AwKbAc",Wrapper:"_2ERphYf08pZHF6WWqsLCvA",wrapper:"_2ERphYf08pZHF6WWqsLCvA",Icons:"_1H6XmzDZeFebELnU6sY0C0",icons:"_1H6XmzDZeFebELnU6sY0C0",ContentEditable:"TqpfKgK2FdKbljZzdRLIU",contentEditable:"TqpfKgK2FdKbljZzdRLIU",IconButton:"_3mRkaGP5f0vxRe_U_Gy02A",iconButton:"_3mRkaGP5f0vxRe_U_Gy02A",active:"_2DlIVUCHN0i6ffc7V4yOsc"}},"./src/chat/components/MessageInput/locker.m.less":function(e,t,n){e.exports={LockPanel:"_2h_JiBv-nPBnaM3N5JvyUv",lockPanel:"_2h_JiBv-nPBnaM3N5JvyUv",IconButton:"_2NYmknXxbchViinWy54HO5",iconButton:"_2NYmknXxbchViinWy54HO5",LockIcon:"_1ciI81_jNxkY71WoD59pgs",lockIcon:"_1ciI81_jNxkY71WoD59pgs"}},"./src/chat/components/MessageInput/muted.m.less":function(e,t,n){e.exports={Panel:"_27oSiXvL65xhTdkc_Uw6Tk",panel:"_27oSiXvL65xhTdkc_Uw6Tk",Icon:"_2g9vi8MITwKeNSmmeI8-Lz",icon:"_2g9vi8MITwKeNSmmeI8-Lz"}},"./src/chat/components/MessageList/index.m.less":function(e,t,n){e.exports={MessageItemBubble:"uaJN7fdQ7gwgTpZ7jtgcz",messageItemBubble:"uaJN7fdQ7gwgTpZ7jtgcz",Scroller:"_3SalNr9zKm9cow28G6Et8k",scroller:"_3SalNr9zKm9cow28G6Et8k",Container:"_1xras3hyI4R7t2fVZ1ignJ",container:"_1xras3hyI4R7t2fVZ1ignJ",ReverseCol:"_1GHvFO18gi7t3Pp59H7IuA",reverseCol:"_1GHvFO18gi7t3Pp59H7IuA",MessageInput:"bKDndaDKpLDQDnRx42iAH",messageInput:"bKDndaDKpLDQDnRx42iAH",LoadingIndicator:"ZLheoiA0Ou5i6qztt72Fo",loadingIndicator:"ZLheoiA0Ou5i6qztt72Fo",LoadingError:"_3NndSEXY_RxH5czXJ4Rt-A",loadingError:"_3NndSEXY_RxH5czXJ4Rt-A"}},"./src/chat/components/MessageReportDialog/ActionMenu.m.less":function(e,t,n){e.exports={Button:"wfQctZu1ecaMbjcsHSg6h",button:"wfQctZu1ecaMbjcsHSg6h",Approve:"_2XFuYeis9y8Xsjyz5z5FB9",approve:"_2XFuYeis9y8Xsjyz5z5FB9",Trash:"_1eVFNoal45S0Twwt9LfOLs",trash:"_1eVFNoal45S0Twwt9LfOLs",ButtonControls:"_2qC81FyHPci89SVLcGzmoM",buttonControls:"_2qC81FyHPci89SVLcGzmoM",ButtonText:"_1N1UGPomuGwkRLXua7X8Nw",buttonText:"_1N1UGPomuGwkRLXua7X8Nw"}},"./src/chat/components/MessageReportDialog/Header.m.less":function(e,t,n){e.exports={Group:"_3-_td-aLD0FzFbyGsifCaa",group:"_3-_td-aLD0FzFbyGsifCaa",Key:"_1fIHkblmv-fsEACA0XcjPo",key:"_1fIHkblmv-fsEACA0XcjPo",MemberActionDropdown:"BhVefEa8VOdz2snp27-b9",memberActionDropdown:"BhVefEa8VOdz2snp27-b9",MessageHeaderLink:"_13B1OwQItr3utcd8_sodio",messageHeaderLink:"_13B1OwQItr3utcd8_sodio",ChannelName:"_2EO-IzQX0HzamivHHyPE0_",channelName:"_2EO-IzQX0HzamivHHyPE0_",TextOverflow:"_1HY6d09ZB5WaqA20PtBOHv",textOverflow:"_1HY6d09ZB5WaqA20PtBOHv",IconButton:"_1o6HaT_x3GNHtreJOyG6NH",iconButton:"_1o6HaT_x3GNHtreJOyG6NH",Header:"_1GwIJseiZ5KeFqqtv5VA0Y",header:"_1GwIJseiZ5KeFqqtv5VA0Y"}},"./src/chat/components/MessageReportDialog/index.m.less":function(e,t,n){e.exports={ReasonText:"_2fWfSMLrcPv-OustcNUPwq",reasonText:"_2fWfSMLrcPv-OustcNUPwq",DeleteText:"Q4PD3whY2fxqRYIcy2FXa",deleteText:"Q4PD3whY2fxqRYIcy2FXa",AcceptText:"_32x3uiNNGBeL31mFrtoazH",acceptText:"_32x3uiNNGBeL31mFrtoazH"}},"./src/chat/components/MessageTooltip/Picker/Snoomoji.m.less":function(e,t,n){e.exports={IconWrapper:"_2R3oRa4ekCI_1D9V0YXda5",iconWrapper:"_2R3oRa4ekCI_1D9V0YXda5",EmptyIcons:"_1Z8KF6toANJpDE4kWozfKY",emptyIcons:"_1Z8KF6toANJpDE4kWozfKY",LoadingIndicator:"_3vs9Yh0oFvFZXZsofl_USs",loadingIndicator:"_3vs9Yh0oFvFZXZsofl_USs",Wrapper:"_2v9AoSifv20X3GQbcYnxmn",wrapper:"_2v9AoSifv20X3GQbcYnxmn"}},"./src/chat/components/MessageTooltip/Picker/Userlist.m.less":function(e,t,n){e.exports={LoadingIndicator:"_3-kYuEEP6KWAfJLiayTR6s",loadingIndicator:"_3-kYuEEP6KWAfJLiayTR6s",ChatMemberList:"_2o13OlNIydnvz809gFZ87R",chatMemberList:"_2o13OlNIydnvz809gFZ87R",Wrapper:"dBeQ2cMBzl6WHb5eSjBRI",wrapper:"dBeQ2cMBzl6WHb5eSjBRI"}},"./src/chat/components/MessageTooltip/index.m.less":function(e,t,n){e.exports={Dropdown:"_1EGv9VTTmrhOfRfonVFzsG",dropdown:"_1EGv9VTTmrhOfRfonVFzsG",DropdownWrapper:"_3sO7SmiWrXASRtvv7d_dJk",dropdownWrapper:"_3sO7SmiWrXASRtvv7d_dJk",Picker:"_1AjUa6WOfWNHT6Hgt6TPmK",picker:"_1AjUa6WOfWNHT6Hgt6TPmK",PickerHeader:"_1ekaLCxKd98FlrNC_Oo2rT",pickerHeader:"_1ekaLCxKd98FlrNC_Oo2rT",IconButton:"_2DfO2KxP69OlZwaxjwUq9q",iconButton:"_2DfO2KxP69OlZwaxjwUq9q",PickerWrapper:"_1h1uw7kxU6VJk75NglIHM2",pickerWrapper:"_1h1uw7kxU6VJk75NglIHM2",embedded:"Hu4mluXNcKxmITzoPIZ2"}},"./src/chat/components/MinimizedPortalContainer/index.m.less":function(e,t,n){e.exports={Container:"_1FE1o9C7Gk8k6ciF8-oeXx",container:"_1FE1o9C7Gk8k6ciF8-oeXx",HiddenCloseButton:"_3kOgjtISRZqbdX0TbLj1qf",hiddenCloseButton:"_3kOgjtISRZqbdX0TbLj1qf",TitleWithCounter:"_3bzYm5d0EW5ZCDVM6kmYIh",titleWithCounter:"_3bzYm5d0EW5ZCDVM6kmYIh"}},"./src/chat/components/MinimizedPortalContainer/index.tsx":function(e,t,n){"use strict";var a=n("./node_modules/react/index.js"),s=n.n(a),c=n("./node_modules/react-redux/es/index.js"),r=n("./src/lib/lessComponent.tsx"),o=n("./src/chat/actions/container.ts"),i=n("./src/chat/components/CloseIcon/index.tsx"),l=n("./src/chat/components/PortalContainer/index.tsx"),d=n("./src/chat/components/ThemeProvider/index.tsx"),u=n("./src/chat/constants/container.ts"),h=n("./src/chat/constants/zIndex.ts"),m=n("./src/chat/controls/Counter/index.tsx"),b=n("./src/chat/helpers/chatSelector.ts"),p=n("./src/chat/selectors/messages.ts"),g=n("./src/chat/strings/index.ts"),O=n("./src/chat/components/MinimizedPortalContainer/index.m.less"),j=n.n(O);const f=u.b.minimized,C=r.a.wrapped(i.a,"HiddenCloseButton",j.a);C.displayName="CloseButton";const E=r.a.wrapped(e=>s.a.createElement("div",{onClick:e.onClick,className:e.className,style:{zIndex:h.a,width:`${Object(l.b)(f.width)}px`,height:`${Object(l.b)(f.height)}px`}},e.children),"Container",j.a),_=r.a.span("TitleWithCounter",j.a),I=Object(b.a)({unreadCount:p.a}),v=Object(c.b)(I,e=>({close:()=>e(Object(o.sizeChanged)(u.a.HIDDEN)),open:()=>e(Object(o.sizeChanged)(u.a.EMBED))}));t.a=v(e=>{var t=e.unreadCount;const n=t.unread,a=t.count,c=a>0?a:void 0;return s.a.createElement(d.a,null,s.a.createElement(E,{className:e.className,onClick:e.open},s.a.createElement(_,null,Object(g.a)("en","app.button.chat"),n&&s.a.createElement(m.b,{count:c})),s.a.createElement(C,null)))})},"./src/chat/components/OverlayBanUser/index.m.less":function(e,t,n){e.exports={Container:"_1_HXUFfqNLhPa3ECg2uYKU",container:"_1_HXUFfqNLhPa3ECg2uYKU",Warning:"_1M-N-qskTvUR9X1wHof2x",warning:"_1M-N-qskTvUR9X1wHof2x",Details:"_2RJd8VyczSTaQ0THm9INBL",details:"_2RJd8VyczSTaQ0THm9INBL",LinkText:"_1G1OtnYB5kEysHY3gEX-vR",linkText:"_1G1OtnYB5kEysHY3gEX-vR",CheckboxContainer:"_2WeM6zjwdfeMqzjvRnp-6x",checkboxContainer:"_2WeM6zjwdfeMqzjvRnp-6x"}},"./src/chat/components/OverlayBlockUser/index.m.less":function(e,t,n){e.exports={Container:"_1krdNYK7ugIMXB3ZghbFue",container:"_1krdNYK7ugIMXB3ZghbFue",Text:"_2d8sdMroAZbA6U92LFXNXQ",text:"_2d8sdMroAZbA6U92LFXNXQ"}},"./src/chat/components/OverlayChannelInvited/index.m.less":function(e,t,n){e.exports={Container:"_2_usm-6VxbuOWiTnRHrW6_",container:"_2_usm-6VxbuOWiTnRHrW6_",TitleContainer:"_286hA91kPPTG16FrntDjnI",titleContainer:"_286hA91kPPTG16FrntDjnI",NSFWIcon:"KMxUr4-PgnXZGf5PDaXpK",nsfwIcon:"KMxUr4-PgnXZGf5PDaXpK",UserPic:"_1VfnsRlasisMwqxtizmNQG",userPic:"_1VfnsRlasisMwqxtizmNQG",WarningTextNSFW:"_2J7sY3CGM_vmQmlMoGfZrh",warningTextNsfw:"_2J7sY3CGM_vmQmlMoGfZrh",Text:"_22QVrPPpZBzynTY8RED1SZ",text:"_22QVrPPpZBzynTY8RED1SZ",MediaObject:"_2P47kg53Xxq3BQhzoaYl9a",mediaObject:"_2P47kg53Xxq3BQhzoaYl9a",LightText:"_2buWE0oBQ93N4BIt3Klp0T",lightText:"_2buWE0oBQ93N4BIt3Klp0T",LightTextSmall:"_2EZY5lK_rrQ9EWQLO-bTOa",lightTextSmall:"_2EZY5lK_rrQ9EWQLO-bTOa",Warning:"_1qjZD8w4dikSOteKrNjSx8",warning:"_1qjZD8w4dikSOteKrNjSx8",MessageItemBubble:"_159DMqa2u910mCXNaj7psO",messageItemBubble:"_159DMqa2u910mCXNaj7psO",MemberListHeader:"_2Okgg_b1qun6jCu2zoGgIr",memberListHeader:"_2Okgg_b1qun6jCu2zoGgIr",count:"_3OeY3h8ewj9TQNqMGBjQAy"}},"./src/chat/components/OverlayChannelRemoval/index.m.less":function(e,t,n){e.exports={SubHeader:"wmCucbS6jibsxQaqbOhd-",subHeader:"wmCucbS6jibsxQaqbOhd-",Header:"_2sNvTIhUwrcntNuPu0dMCh",header:"_2sNvTIhUwrcntNuPu0dMCh"}},"./src/chat/components/OverlayChatMembers/index.m.less":function(e,t,n){e.exports={Scroller:"_2IqNvO7mqMEE5ZWWtZ2wz",scroller:"_2IqNvO7mqMEE5ZWWtZ2wz",LoadingIndicator:"_2AvW8S-YJtH3dTzD1erN9w",loadingIndicator:"_2AvW8S-YJtH3dTzD1erN9w"}},"./src/chat/components/OverlayCreateChannel/index.m.less":function(e,t,n){e.exports={Content:"_1hC_Uia5BNA3T_u7HMpSZG",content:"_1hC_Uia5BNA3T_u7HMpSZG",Checkbox:"_3GsQM0WckX2LUq1uXLAPFK",checkbox:"_3GsQM0WckX2LUq1uXLAPFK",Scroller:"_3jTOQRN48SYTsqhBKHqC4Z",scroller:"_3jTOQRN48SYTsqhBKHqC4Z",ListItem:"_1xahoE-aw4Dlt5luSt2p4M",listItem:"_1xahoE-aw4Dlt5luSt2p4M",ListItemHeader:"_3WOxEuf3YCyzuUH93Vlyc5",listItemHeader:"_3WOxEuf3YCyzuUH93Vlyc5",ChatListHeader:"f1Vn8P6AnRNELbDzUjx9e",chatListHeader:"f1Vn8P6AnRNELbDzUjx9e",Name:"JBR5EOMqd72EqgfXylDwk",name:"JBR5EOMqd72EqgfXylDwk",Error:"_38k-vHCy1mrtIvoNMijbPz",error:"_38k-vHCy1mrtIvoNMijbPz",ChannelNameInput:"_1q7NucdJkk8imHDBisfJyk",channelNameInput:"_1q7NucdJkk8imHDBisfJyk",OverlayContent:"_1ppnyRj_9LpVLO_D4hSmuD",overlayContent:"_1ppnyRj_9LpVLO_D4hSmuD",ChannelNameWrapper:"_3kiusu26cM8caGCqS2DjBs",channelNameWrapper:"_3kiusu26cM8caGCqS2DjBs",shown:"_2Mva-9o8IuN_QrvvZYRHyH"}},"./src/chat/components/OverlayDeclineChannel/index.m.less":function(e,t,n){e.exports={Text:"_2ZpOIeJdHuQaCPzB1Zitjs",text:"_2ZpOIeJdHuQaCPzB1Zitjs"}},"./src/chat/components/OverlayDeleteMessage/index.m.less":function(e,t,n){e.exports={Container:"_2Yb29uEhP7-68Kfyyoi055",container:"_2Yb29uEhP7-68Kfyyoi055",Text:"_1uVJNk1TcTYh4J-adHysAR",text:"_1uVJNk1TcTYh4J-adHysAR",CheckboxContainer:"FeyWJeFioarZziU9gnPV1",checkboxContainer:"FeyWJeFioarZziU9gnPV1"}},"./src/chat/components/OverlayDirectsEmptyState/index.m.less":function(e,t,n){e.exports={OverlayContent:"_1q866gGcJPftLTxyLf0X3g",overlayContent:"_1q866gGcJPftLTxyLf0X3g",Image:"_1vp6IUbUAKft1309x-FLvY",image:"_1vp6IUbUAKft1309x-FLvY",Info:"_3ReB8hehAg-xasLSPknuTf",info:"_3ReB8hehAg-xasLSPknuTf",Header:"_3Tai9WhmvPt75f5hVNehsd",header:"_3Tai9WhmvPt75f5hVNehsd",Text:"_2qqSe8MO2ASeWjo69rQv-U",text:"_2qqSe8MO2ASeWjo69rQv-U"}},"./src/chat/components/OverlayJoinChannel/index.m.less":function(e,t,n){e.exports={Wrapper:"xaCHlHDpK0tSJsxZHvjhD",wrapper:"xaCHlHDpK0tSJsxZHvjhD",Title:"Y5uqrnMGgmRDTkZKWQBvt",title:"Y5uqrnMGgmRDTkZKWQBvt",Desc:"Wv-6I7UewbR428Q1rjFxN",desc:"Wv-6I7UewbR428Q1rjFxN",Warning:"_3gIU6LRa2c1ApZy9J6-NPi",warning:"_3gIU6LRa2c1ApZy9J6-NPi"}},"./src/chat/components/OverlayKickUser/index.m.less":function(e,t,n){e.exports={SubHeader:"jGKnqvkzsltpANG0DJlgO",subHeader:"jGKnqvkzsltpANG0DJlgO",Title:"_3Ra9KcBL07oH70jU3LOAXh",title:"_3Ra9KcBL07oH70jU3LOAXh",Header:"_1Tqno2ajLSYCm3V_okJFQ8",header:"_1Tqno2ajLSYCm3V_okJFQ8",Checkbox:"WElCAKjceOsUlyjpoY3xB",checkbox:"WElCAKjceOsUlyjpoY3xB",ListItem:"_2_OE0sk8Db21HH8QSRH1Bx",listItem:"_2_OE0sk8Db21HH8QSRH1Bx",OverlayContent:"_33MAHgxzLWMgmJnRELO8em",overlayContent:"_33MAHgxzLWMgmJnRELO8em"}},"./src/chat/components/OverlayLeaveChannel/index.m.less":function(e,t,n){e.exports={Container:"_3EeEvLNf7oLUv7HADlg78v",container:"_3EeEvLNf7oLUv7HADlg78v",Text:"_3KBF2WZWeb-cDtVGxJrB_M",text:"_3KBF2WZWeb-cDtVGxJrB_M",TextBold:"_2viZeky_1285ai6miwQrbQ",textBold:"_2viZeky_1285ai6miwQrbQ"}},"./src/chat/components/OverlayLockChannel/index.m.less":function(e,t,n){e.exports={Container:"G8ApzOO0MGwRaeXN6lVxi",container:"G8ApzOO0MGwRaeXN6lVxi",Text:"_3OZR-pdEysnVmOVvCZPSGc",text:"_3OZR-pdEysnVmOVvCZPSGc",TextBold:"_36mA0iX729-4-ZAKKn7Zf-",textBold:"_36mA0iX729-4-ZAKKn7Zf-"}},"./src/chat/components/OverlayNSFWWarning/index.m.less":function(e,t,n){e.exports={Container:"_3pqnKF777RDT3fBIOXoVeh",container:"_3pqnKF777RDT3fBIOXoVeh",Text:"v8ouzYTWr_vsFsZU3nJB4",text:"v8ouzYTWr_vsFsZU3nJB4"}},"./src/chat/components/OverlayNav/index.m.less":function(e,t,n){e.exports={Key:"_2VJvEvcJEb5Qi5bR-kioln",key:"_2VJvEvcJEb5Qi5bR-kioln",Group:"_1YPPlxZVDby6iOxA_2zGt5",group:"_1YPPlxZVDby6iOxA_2zGt5",Nav:"_3CVk8skSg_xIxuTdTvDN73",nav:"_3CVk8skSg_xIxuTdTvDN73",TitleWrapper:"_1FXx-0D9q_ppO-Wvhxl2SH",titleWrapper:"_1FXx-0D9q_ppO-Wvhxl2SH",Title:"ylMZS-KGeMjDd_L-rq4Rq",title:"ylMZS-KGeMjDd_L-rq4Rq",SubTitle:"AxqaQ2FQrA19yH4bFOCfx",subTitle:"AxqaQ2FQrA19yH4bFOCfx"}},"./src/chat/components/OverlayNavButtonGroup/index.m.less":function(e,t,n){e.exports={Wrapper:"_1YLHv7p-GZBHZ9sw1cUr3T",wrapper:"_1YLHv7p-GZBHZ9sw1cUr3T",IconButton:"_8nwxQjcY53lLegyj4XGyA",iconButton:"_8nwxQjcY53lLegyj4XGyA",CloseButton:"bwxXoigjZ4E9ofWIggxmp",closeButton:"bwxXoigjZ4E9ofWIggxmp"}},"./src/chat/components/OverlayPrivateChannel/index.m.less":function(e,t,n){e.exports={OverlayContent:"_3a5Sy3shTDbXa5QpnNKysQ",overlayContent:"_3a5Sy3shTDbXa5QpnNKysQ",Wrapper:"_1bBGJuhjmvvKcNlSQ0EK8b",wrapper:"_1bBGJuhjmvvKcNlSQ0EK8b",Description:"_3Z--CAa9bC0C7gbEdQIZQo",description:"_3Z--CAa9bC0C7gbEdQIZQo",Title:"Z_tVgFs5kTvmGcfeKejtc",title:"Z_tVgFs5kTvmGcfeKejtc",Image:"_4h1K0zE5EjNzWkb0Tjov_",image:"_4h1K0zE5EjNzWkb0Tjov_"}},"./src/chat/components/OverlayReport/index.m.less":function(e,t,n){e.exports={Checkbox:"_3_ggjAPRo5VjUmv6nJLlil",checkbox:"_3_ggjAPRo5VjUmv6nJLlil",ListItem:"_2qQcEGZtboU7wa6nmfyOoD",listItem:"_2qQcEGZtboU7wa6nmfyOoD"}},"./src/chat/components/OverlaySubredditChatRequest/index.m.less":function(e,t,n){e.exports={SubredditHeader:"_3j1-6eOBPizZoztx72CDde",subredditHeader:"_3j1-6eOBPizZoztx72CDde",Title:"_3X61dNX9-tl6Qvt9TNsJFu",title:"_3X61dNX9-tl6Qvt9TNsJFu",Text:"_1HAsUcKyFjgjMGRC3kk1kN",text:"_1HAsUcKyFjgjMGRC3kk1kN"}},"./src/chat/components/PortalContainer/index.m.less":function(e,t,n){e.exports={BasePortalContainer:"yU9j1WJPhK5O625xcz254",basePortalContainer:"yU9j1WJPhK5O625xcz254",EmbedPortalContainer:"_1ScY1cHS-Vgv6eoU-LmjTi",embedPortalContainer:"_1ScY1cHS-Vgv6eoU-LmjTi",HiddenPortalContainer:"_3Txi0nOg7zVE4_CBYqUaRq",hiddenPortalContainer:"_3Txi0nOg7zVE4_CBYqUaRq",MinimizedRedesignPortalContainer:"_29tNelkz3zQzbXmYFOCncy",minimizedRedesignPortalContainer:"_29tNelkz3zQzbXmYFOCncy"}},"./src/chat/components/PortalContainer/index.tsx":function(e,t,n){"use strict";n.d(t,"b",function(){return O}),n.d(t,"a",function(){return y});var a=n("./node_modules/react/index.js"),s=n.n(a),c=n("./node_modules/react-redux/es/index.js"),r=n("./src/lib/CSSVariableProvider/index.tsx"),o=n("./src/lib/lessComponent.tsx"),i=n("./src/chat/components/MinimizedPortalContainer/index.tsx"),l=n("./src/chat/components/Root/index.tsx"),d=n("./src/chat/constants/container.ts"),u=n("./src/chat/constants/zIndex.ts"),h=n("./src/chat/helpers/chatSelector.ts"),m=n("./src/chat/components/PortalContainer/index.m.less"),b=n.n(m);const p=d.b.embed,g=d.b.hidden;function O(e){return void 0!==e?e:-1}const j=o.a.wrapped(e=>s.a.createElement("div",{className:e.className,style:{zIndex:u.a}},e.children),"BasePortalContainer",b.a),f=o.a.wrapped(e=>s.a.createElement("div",{className:e.className,style:{zIndex:u.a,width:`${O(p.width)}px`,height:`${O(p.height)}px`}},e.children),"EmbedPortalContainer",b.a),C=o.a.wrapped(e=>s.a.createElement("div",{className:e.className,style:{zIndex:u.a,width:`${O(g.width)}px`,height:`${O(g.height)}px`}},e.children),"HiddenPortalContainer",b.a),E=o.a.wrapped(i.a,"MinimizedRedesignPortalContainer",b.a),_=j,I=Object(h.a)({container:e=>e&&e.container&&e.container.size});function v(e){switch(e.container){case d.a.EMBED:return s.a.createElement(f,null,e.children);case d.a.HIDDEN:return s.a.createElement(C,null,e.children);case d.a.FULL:return s.a.createElement(_,null,e.children);case d.a.MINIMIZED:return s.a.createElement(E,null);default:return s.a.createElement(f,null,e.children)}}function y(e,t){const n=Object(c.b)(I)(v);return s.a.createElement("div",null,Object(r.d)(s.a.createElement(n,null,Object(l.a)(e,t)),document.body))}},"./src/chat/components/RenameGroupInput/index.m.less":function(e,t,n){e.exports={InputWrapper:"_28P30CIc0Sg6khzTfdUtFS",inputWrapper:"_28P30CIc0Sg6khzTfdUtFS",CancelButton:"_2BKC2-yw3SDROeMlQVuzV0",cancelButton:"_2BKC2-yw3SDROeMlQVuzV0",SaveButton:"_28q7tJbZaPoQlfqYhxGvo7",saveButton:"_28q7tJbZaPoQlfqYhxGvo7",visible:"_2B6VdxRSaCahlnbS9GaF2t",InputContent:"_3a3Jtb-a_YmBRB4rWbdfNE",inputContent:"_3a3Jtb-a_YmBRB4rWbdfNE",InputControls:"_1zk-MS9-Wk_eyGcUZvopQX",inputControls:"_1zk-MS9-Wk_eyGcUZvopQX"}},"./src/chat/components/Root/index.tsx":function(e,t,n){"use strict";var a=n("./node_modules/react/index.js"),s=n.n(a),c=n("./node_modules/react-router/es/index.js"),r=(n("./assets/fonts/IBMPlexSans/font.less"),n("./assets/fonts/NotoSans/font.less"),n("./src/chat/components/FrameContent/index.tsx")),o=n("./node_modules/react-redux/es/index.js"),i=n("./src/config.ts"),l=n("./src/lib/lessComponent.tsx"),d=n("./src/chat/helpers/chatSelector.ts");const u=n("./src/chat/constants/theme.ts").b.REDDIT;var h=n("./src/chat/icons/Loader/index.m.less"),m=n.n(h);const b=l.a.div("Square",m.a),p=l.a.img("LoadingIcon",m.a),g=l.a.wrapped(e=>s.a.createElement("div",{role:"progressbar",className:e.className,style:{zIndex:e.zIndex||1}},e.children),"Wrapper",m.a),O=Object(d.a)({isNightmode:e=>(e=>!(e.user.prefs.globalTheme!==u))(e)});var j=Object(o.b)(O)(e=>s.a.createElement(g,{zIndex:e.zIndex||1},s.a.createElement(b,null,s.a.createElement(p,{src:e.isNightmode?`${i.a.assetPath}/img/loader_2orbit_loop.gif`:`${i.a.assetPath}/img/loader_2orbit_loop_nightmode.gif`,alt:"Loading"})))),f=n("./src/chat/components/CloseIcon/index.tsx"),C=n("./src/chat/selectors/app.ts");const E=Object(d.a)({isHidden:C.e,isReady:C.f,alert:C.b,experiments:C.a});var _=Object(o.b)(E)(e=>e.isHidden?null:e.isReady&&e.experiments?e.children:s.a.createElement(s.a.Fragment,null,s.a.createElement(f.a,null),s.a.createElement(j,{textType:e.alert||"",isFadeOut:e.isReady,zIndex:2}))),I=n("./src/chat/components/ThemeProvider/index.tsx");function v(e,t){return s.a.createElement(I.a,{className:r.a},s.a.createElement(e,null,s.a.createElement(c.b,{component:e=>s.a.createElement(_,null,s.a.createElement(c.d,{location:e.location},t))})))}n.d(t,"a",function(){return v})},"./src/chat/components/Scroller/index.m.less":function(e,t,n){e.exports={Scroller:"_3GDyz0bgwoWgoxYSYSxXyA",scroller:"_3GDyz0bgwoWgoxYSYSxXyA"}},"./src/chat/components/SearchBar/index.m.less":function(e,t,n){e.exports={SearchBarWrapper:"KhZg0bTs9OULHNVuM28-j",searchBarWrapper:"KhZg0bTs9OULHNVuM28-j",SearchBarLabel:"n8QUlQDkULMxz2adkFkZN",searchBarLabel:"n8QUlQDkULMxz2adkFkZN",SearchBarField:"_3vilBtEofGPjLW8XnN__LH",searchBarField:"_3vilBtEofGPjLW8XnN__LH",SearchBarInput:"_2clRIy8wf_7H8xNNrUPaiU",searchBarInput:"_2clRIy8wf_7H8xNNrUPaiU",Bubble:"_3Os5eNEJdv4w6tsQdtTT5d",bubble:"_3Os5eNEJdv4w6tsQdtTT5d"}},"./src/chat/components/SelectableUser/index.m.less":function(e,t,n){e.exports={Checkbox:"_245EMGvr6FxhYfqTf2m6Zk",checkbox:"_245EMGvr6FxhYfqTf2m6Zk",UserPic:"zW7z1umVHXoa1LGs0PhqY",userPic:"zW7z1umVHXoa1LGs0PhqY",Name:"_1HoUzT_zRlnm-zLSJPRh28",name:"_1HoUzT_zRlnm-zLSJPRh28"}},"./src/chat/components/Sidebar/CreateChannel/index.m.less":function(e,t,n){e.exports={ChatNew:"_1epWdlh2iK8Z3OcxO5pWF9",chatNew:"_1epWdlh2iK8Z3OcxO5pWF9",Button:"eBsUucD7aSgQuofWx8Jq",button:"eBsUucD7aSgQuofWx8Jq",Text:"_3PwciL3YN1pDFVJw--NedB",text:"_3PwciL3YN1pDFVJw--NedB"}},"./src/chat/components/Sidebar/DirectsPanel/index.m.less":function(e,t,n){e.exports={Scroller:"_809obLHiY5wS3ZHNVH0QY",scroller:"_809obLHiY5wS3ZHNVH0QY"}},"./src/chat/components/Sidebar/SidebarDivider/index.m.less":function(e,t,n){e.exports={Divider:"_24QCVGgaI_yk8y13wbgEWe",divider:"_24QCVGgaI_yk8y13wbgEWe",SubDivider:"nWrfwV5vA2rcFcl2jBpkS",subDivider:"nWrfwV5vA2rcFcl2jBpkS"}},"./src/chat/components/Sidebar/SubredditPanel/index.m.less":function(e,t,n){e.exports={Scroller:"_1-wLghHbwdfnXW3hgKe4KX",scroller:"_1-wLghHbwdfnXW3hgKe4KX"}},"./src/chat/components/Sidebar/index.m.less":function(e,t,n){e.exports={Wrapper:"_3Vfwehx1_6SL3j8elUC4s1",wrapper:"_3Vfwehx1_6SL3j8elUC4s1",Tabs:"_1WMBA90B9UJsaA8abIOXkg",tabs:"_1WMBA90B9UJsaA8abIOXkg",TabList:"_2xkfmbE0b2UUTNI7Pe-SR4",tabList:"_2xkfmbE0b2UUTNI7Pe-SR4",Tab:"_2wJ9IK0tQpgSzeHzXJyT3D",tab:"_2wJ9IK0tQpgSzeHzXJyT3D",active:"_3iLNO7R8VMvJ4Dn89SVFVg",FirstTimeUserExpPromo:"_29KVZN_UShyL2c0U8mio78",firstTimeUserExpPromo:"_29KVZN_UShyL2c0U8mio78"}},"./src/chat/components/Snoomoji/index.m.less":function(e,t,n){e.exports={SnooImg:"_1b2msiYMaWuRyunCT4E35G",snooImg:"_1b2msiYMaWuRyunCT4E35G"}},"./src/chat/components/SubredditHeader/index.m.less":function(e,t,n){e.exports={SubredditHeaderTitle:"_3O_FYyPnsqn2ysgBTgUiPG",subredditHeaderTitle:"_3O_FYyPnsqn2ysgBTgUiPG",SubredditName:"_2w1-pMuQustKyxbIy4NaQ-",subredditName:"_2w1-pMuQustKyxbIy4NaQ-",selected:"_32syq2jHC0wZb1itE7LceE",ChannelName:"laqy5CSOZ3RtB6SfWG59x",channelName:"laqy5CSOZ3RtB6SfWG59x",Group:"_3M_HM9NWld2deZB0sZNs5E",group:"_3M_HM9NWld2deZB0sZNs5E",Key:"_1bYAImPe6Ha4GVwba-mE6a",key:"_1bYAImPe6Ha4GVwba-mE6a",TextOverflow:"gxpU7poFPJjaonNUILn5",textOverflow:"gxpU7poFPJjaonNUILn5",NSFWIcon:"_3fZPKI35bF46yDVzrkx1bZ",nsfwIcon:"_3fZPKI35bF46yDVzrkx1bZ",SubredditHeader:"_1g17GpsA_cdFZEa4yYOFom",subredditHeader:"_1g17GpsA_cdFZEa4yYOFom",Icon:"_3MVxGN4RtL4Cc57eIAM0AF",icon:"_3MVxGN4RtL4Cc57eIAM0AF",SubChat:"_11QDG1BLADvUHKrJk627nE",subChat:"_11QDG1BLADvUHKrJk627nE",SubredditHeaderIcon:"_2cHerJ1xIdjzYZvzHxxVtn",subredditHeaderIcon:"_2cHerJ1xIdjzYZvzHxxVtn"}},"./src/chat/components/SubredditInvitedLink/index.m.less":function(e,t,n){e.exports={SubredditInvitedLink:"_1cM4NY-nRBgg0N7J2zeZom",subredditInvitedLink:"_1cM4NY-nRBgg0N7J2zeZom",selected:"fTXjoy46dzJ97kxXeNugh"}},"./src/chat/components/SubredditJoined/index.m.less":function(e,t,n){e.exports={Group:"_1Vj79Z25y4rOvl3AepTJWj",group:"_1Vj79Z25y4rOvl3AepTJWj",Key:"_3Gb4tRNWqZbOcPLnWHxYRP",key:"_3Gb4tRNWqZbOcPLnWHxYRP",SubredditChannelLink:"_2YXMIjJYTPOEMFDCo2YfeL",subredditChannelLink:"_2YXMIjJYTPOEMFDCo2YfeL",active:"_2Tt4jrYMmv3BA4eJBWCl1K",unread:"_31bpHIk9RyhsmrsqCcNMiG",Wrapper:"m1tjINo67gOxLTYVpXMEK",wrapper:"m1tjINo67gOxLTYVpXMEK",SubredditHeader:"_1a4WrbQTfal9tcCL0MkQec",subredditHeader:"_1a4WrbQTfal9tcCL0MkQec",SubredditList:"PzxWl7Mbg346IwB7gxYaP",subredditList:"PzxWl7Mbg346IwB7gxYaP",BlankStateText:"_26L2tn7xwZ23KgODtQMagS",blankStateText:"_26L2tn7xwZ23KgODtQMagS",SubredditIcon:"_36xlVFccraXxJ-bul5NynV",subredditIcon:"_36xlVFccraXxJ-bul5NynV",SubredditName:"_1jsjKTfbiOtdnSLS0lXstL",subredditName:"_1jsjKTfbiOtdnSLS0lXstL"}},"./src/chat/components/SubredditRecommended/index.m.less":function(e,t,n){e.exports={Wrapper:"_2rAezUR1zUOR5dOIZAR9OF",wrapper:"_2rAezUR1zUOR5dOIZAR9OF"}},"./src/chat/components/SubredditRecommendedLink/index.m.less":function(e,t,n){e.exports={ChannelDesc:"_2MAYeyM0SS2mwSPkG0b3pY",channelDesc:"_2MAYeyM0SS2mwSPkG0b3pY",selected:"qTijf5vcQE7xnXJmD6eDk",SubredditChannelLink:"_1uYq_b7LvkEZrfcbgktTjV",subredditChannelLink:"_1uYq_b7LvkEZrfcbgktTjV"}},"./src/chat/components/ThemeProvider/index.tsx":function(e,t,n){"use strict";var a=n("./node_modules/react/index.js"),s=n.n(a),c=n("./node_modules/react-redux/es/index.js"),r=n("./node_modules/reselect/es/index.js"),o=n("./bundled-modules/styled-components/styled-components.min.js"),i=n("./src/lib/CSSVariableProvider/index.tsx");const l=Object(r.a)(e=>e.themes.current,e=>({theme:e}));t.a=Object(c.b)(l)(e=>{const t=e.className,n=e.children,a=e.theme;return s.a.createElement(o.ThemeProvider,{theme:a},s.a.createElement(i.e,{className:t,isRootOrUniqueClassName:i.c,theme:a},n))})},"./src/chat/components/ThemeSwitcher/index.m.less":function(e,t,n){e.exports={Wrapper:"_2fg9MSpO2XXVCGhMa9C2eH",wrapper:"_2fg9MSpO2XXVCGhMa9C2eH"}},"./src/chat/components/ToastNotification/index.m.less":function(e,t,n){e.exports={Wrapper:"_1F_LuK64VyIwueMX3ce6a_",wrapper:"_1F_LuK64VyIwueMX3ce6a_",pending:"_3-akkAdjwf5GRaaBFDvNJN",Text:"Z2zpHoQtb1-SNgOtRrt8J",text:"Z2zpHoQtb1-SNgOtRrt8J",SnooImg:"_2YMWtqHjEMBexSlMPZP1ez",snooImg:"_2YMWtqHjEMBexSlMPZP1ez",Button:"_3ehS3sQSThwrbXGwdIUSt3",button:"_3ehS3sQSThwrbXGwdIUSt3",RefreshIcon:"_3ymunKenTsVYMVusTFZv4F",refreshIcon:"_3ymunKenTsVYMVusTFZv4F"}},"./src/chat/components/TypingIndicator/index.m.less":function(e,t,n){e.exports={IndicatorText:"_9ILBgizV58pKhJFWM-mPy",indicatorText:"_9ILBgizV58pKhJFWM-mPy"}},"./src/chat/components/UnselectableUser/index.m.less":function(e,t,n){e.exports={Wrapper:"oifWWeXtU7UUw2o2ujOPY",wrapper:"oifWWeXtU7UUw2o2ujOPY",Content:"Dfb74heOWSZF6_doPiIDe",content:"Dfb74heOWSZF6_doPiIDe",UserPic:"_367xw6e_C8q7AIpViUzQ4",userPic:"_367xw6e_C8q7AIpViUzQ4",Name:"_2UYcL31wx648GQ4cbrbg8b",name:"_2UYcL31wx648GQ4cbrbg8b",Context:"_1ombhjP6A9filW0mZ6Wxv1",context:"_1ombhjP6A9filW0mZ6Wxv1"}},"./src/chat/constants/batchSizes.ts":function(e,t,n){"use strict";var a;n.d(t,"a",function(){return a}),function(e){e[e.Channels=10]="Channels",e[e.InitChannels=50]="InitChannels",e[e.Messages=40]="Messages"}(a||(a={}))},"./src/chat/constants/page.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return a});const a="tooltip-container"},"./src/chat/constants/promos.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return a});const a="chat.promo"},"./src/chat/constants/sidebar.ts":function(e,t,n){"use strict";var a;n.d(t,"a",function(){return a}),function(e){e[e.SubredditChannels=0]="SubredditChannels",e[e.DirectChannels=1]="DirectChannels"}(a||(a={}))},"./src/chat/constants/theme.ts":function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return s});const a={REDDIT:"REDDIT",NIGHT:"NIGHT"},s=a.REDDIT},"./src/chat/constants/toast.ts":function(e,t,n){"use strict";var a;n.d(t,"a",function(){return a}),function(e){e.ConnectionClosed="connectionClosed",e.ConnectionPending="connectionPending",e.ConnectionOpen="connectionOpen"}(a||(a={}))},"./src/chat/constants/zIndex.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return a});const a=90},"./src/chat/controls/Button/index.m.less":function(e,t,n){e.exports={Button:"_3QHhpmOrsIj9Hy8FecxWKa",button:"_3QHhpmOrsIj9Hy8FecxWKa",primaryStyles:"zn4gOEY3isnsK7xZtTvNH",secondaryStyles:"_2kbPN0C-4BcmdmHFrCuIIq",noBorderStyles:"_226W8BEi6TuRBJaz_fqgVK",primaryNoBorder:"_1xj0FyWu4n5wjObmiR5rku",secondaryNoBorder:"_3_-cZycKEZz0Iz-8wXJzLU",warningNoBorder:"oSSBg-pv9or4z1x1mHJaE",IconButton:"_1PhPhuhKHqFwivRAkg2DkH",iconButton:"_1PhPhuhKHqFwivRAkg2DkH",MessageIconButton:"_1C9dkDKKpS1LYs4gYdxFyL",messageIconButton:"_1C9dkDKKpS1LYs4gYdxFyL"}},"./src/chat/controls/Button/index.tsx":function(e,t,n){"use strict";var a=n("./node_modules/react/index.js"),s=n.n(a),c=n("./src/lib/classNames/index.ts"),r=n("./src/lib/lessComponent.tsx"),o=n("./src/chat/controls/Svg/index.tsx"),i=e=>s.a.createElement(o.a,Object.assign({},e,{viewBox:"0 0 16 16"}),s.a.createElement("path",{d:"M11.829 6.722l1.677-3.145A.802.802 0 0 0 12.8 2.4H3.2a.8.8 0 0 0-.8.8v10.243a.8.8 0 1 0 1.6 0v-2.4h8.8a.799.799 0 0 0 .706-1.176L11.83 6.722z"})),l=e=>s.a.createElement(o.a,Object.assign({},e,{viewBox:"0 0 16 16"}),s.a.createElement("path",{d:"M12.817 7.491a.798.798 0 0 1-.234.566L9.52 11.12a.798.798 0 0 1-1.132 0l-1.13-1.132-4.292 4.291a.797.797 0 0 1-1.132 0 .8.8 0 0 1 0-1.131l4.292-4.291-1.131-1.132a.8.8 0 0 1 0-1.13L8.057 3.53c.3-.3.831-.3 1.131 0l3.395 3.394c.15.15.234.354.234.566zM3.863 6.263a.8.8 0 0 1-.566-1.366L6.36 1.834a.8.8 0 0 1 1.131 1.131L4.43 6.028a.798.798 0 0 1-.566.235zm10.417 2.36a.8.8 0 0 1 0 1.13l-3.063 3.063a.798.798 0 0 1-1.13 0 .8.8 0 0 1 0-1.131l3.061-3.062a.8.8 0 0 1 1.132 0z"})),d=e=>s.a.createElement(o.a,Object.assign({},e,{viewBox:"0 0 16 16"}),s.a.createElement("path",{d:"M7.634 10.034L8.67 9H1.8a.8.8 0 1 1 0-1.6h6.869L7.634 6.366a.8.8 0 1 1 1.132-1.132l2.399 2.4a.8.8 0 0 1 0 1.132l-2.4 2.4a.798.798 0 0 1-1.13 0 .8.8 0 0 1 0-1.132zM12.2 1c1.323 0 2.4 1.077 2.4 2.4V13c0 1.323-1.077 2.4-2.4 2.4H6.6A2.403 2.403 0 0 1 4.2 13v-.8a.8.8 0 1 1 1.6 0v.8c0 .44.358.8.8.8h5.6a.8.8 0 0 0 .8-.8V3.4a.8.8 0 0 0-.8-.8H6.6a.8.8 0 0 0-.8.8v.8a.8.8 0 1 1-1.6 0v-.8C4.2 2.077 5.277 1 6.6 1h5.6z",fillRule:"evenodd"})),u=n("./src/chat/icons/svgs/Trash/index.tsx"),h=n("./src/chat/controls/Button/index.m.less"),m=n.n(h);n.d(t,"a",function(){return O}),n.d(t,"d",function(){return j}),n.d(t,"b",function(){return f}),n.d(t,"f",function(){return C}),n.d(t,"c",function(){return E}),n.d(t,"e",function(){return _});const b=r.a.a("Button",m.a),p=r.a.button("Button",m.a),g=r.a.button("MessageIconButton",m.a),O=e=>{const t=Object(c.a)({[m.a.primaryStyles]:e.primary,[m.a.secondaryStyles]:e.secondary,[m.a.primaryNoBorder]:e.primaryNoBorder,[m.a.warningNoBorder]:e.warningNoBorder,[m.a.secondaryNoBorder]:e.secondaryNoBorder},e.className),n={height:e.height||void 0,width:e.width||void 0};return e.href?s.a.createElement(b,{href:e.href,target:"_blank",rel:"noopener noreferrer",title:e.title,className:t,tabIndex:0,style:n},e.children):s.a.createElement(p,{type:e.type||"button",tabIndex:0,id:e.id,className:t,onClick:e.onClick,disabled:e.disabled,title:e.title,style:n},e.children)},j=r.a.wrapped(O,"IconButton",m.a),f=e=>s.a.createElement(g,Object.assign({},e),s.a.createElement(i,null)),C=e=>s.a.createElement(g,Object.assign({},e),s.a.createElement(u.a,null)),E=e=>s.a.createElement(g,Object.assign({},e),s.a.createElement(l,null)),_=e=>s.a.createElement(g,Object.assign({},e),s.a.createElement(d,null))},"./src/chat/controls/ChannelNameInput/index.m.less":function(e,t,n){e.exports={Input:"_2BjAxRl-BYxJgVcYmAQUKV",input:"_2BjAxRl-BYxJgVcYmAQUKV",NameInput:"_3vihSysDa9MEMS9CcMWUiN",nameInput:"_3vihSysDa9MEMS9CcMWUiN"}},"./src/chat/controls/Checkbox/DeleteAllMessages.m.less":function(e,t,n){e.exports={Trash:"_11Lf6AEz-o69r4zfyrdiER",trash:"_11Lf6AEz-o69r4zfyrdiER",Checkbox:"VcG-dg580xu2WzudiUZ9a",checkbox:"VcG-dg580xu2WzudiUZ9a",CheckboxText:"_2oh1le9oaK39_e1ctTejQq",checkboxText:"_2oh1le9oaK39_e1ctTejQq",CheckboxItem:"_26BHu9RZQUu0OAHm2_nNM0",checkboxItem:"_26BHu9RZQUu0OAHm2_nNM0",CheckboxDetails:"_1VxTTIdHVZZzqjrdDE7RpN",checkboxDetails:"_1VxTTIdHVZZzqjrdDE7RpN"}},"./src/chat/controls/Checkbox/index.m.less":function(e,t,n){e.exports={CheckInput:"_1_de1ouiEaWxe0lu0R54Zf",checkInput:"_1_de1ouiEaWxe0lu0R54Zf",Content:"_1RHO7h5PWuKEmC8QD2KnOB",content:"_1RHO7h5PWuKEmC8QD2KnOB",Control:"aKXv6qpFIjz-_IZOZsYLz",control:"aKXv6qpFIjz-_IZOZsYLz",HiddenInput:"_3Q1_Do5LHdBSUlaIowvrfb",hiddenInput:"_3Q1_Do5LHdBSUlaIowvrfb",Checked:"_2rAAUOr_BEoWHcPUCIHPl_",checked:"_2rAAUOr_BEoWHcPUCIHPl_",Unchecked:"lKC5fIFqmLCg9yYtpR5rw",unchecked:"lKC5fIFqmLCg9yYtpR5rw",Wrapper:"_1SMteSSKECXjIaZTOLZ2z-",wrapper:"_1SMteSSKECXjIaZTOLZ2z-"}},"./src/chat/controls/Checkbox/index.tsx":function(e,t,n){"use strict";var a=n("./node_modules/react/index.js"),s=n.n(a),c=n("./src/lib/classNames/index.ts"),r=n("./src/lib/lessComponent.tsx"),o=n("./src/chat/controls/Svg/index.tsx"),i=n("./src/chat/icons/svgs/Checkbox/checked.m.less"),l=n.n(i);const d=r.a.wrapped(e=>s.a.createElement("circle",{className:e.className,cy:"10",cx:"10",r:"10"}),"StyledCircle",l.a),u=r.a.wrapped(e=>s.a.createElement("path",{className:e.className,d:"M8.9310375,15.1995 C8.70135,15.41825 8.38963125,15.541375 8.0647875,15.541375 C8.052975,15.541375 8.04181875,15.54075 8.03000625,15.54075 C7.69335,15.531375 7.37506875,15.39075 7.15063125,15.151375 L4.0879125,11.88075 C3.637725,11.400125 3.68169375,10.662625 4.18700625,10.23325 C4.6916625,9.805125 5.4660375,9.846375 5.91688125,10.327625 L8.115975,12.676375 L14.8550063,6.25825 C15.3327563,5.802625 16.1091,5.802625 16.5875063,6.25825 C17.0659125,6.71325 17.0659125,7.452625 16.5875063,7.907625 L8.9310375,15.1995 Z"}),"StyledCheckmark",l.a);var h=e=>s.a.createElement(o.a,Object.assign({},e,{viewBox:"0 0 20 20"}),s.a.createElement("g",null,s.a.createElement(d,null),s.a.createElement(u,null))),m=n("./src/chat/icons/svgs/Checkbox/unchecked.m.less"),b=n.n(m);const p=r.a.wrapped(e=>s.a.createElement("circle",{className:e.className,cy:"10",cx:"10",r:"9"}),"StyledCircle",b.a);var g=e=>s.a.createElement(o.a,Object.assign({},e,{viewBox:"0 0 20 20"}),s.a.createElement("g",null,s.a.createElement(p,null))),O=n("./src/chat/controls/Checkbox/index.m.less"),j=n.n(O);const f=r.a.input("HiddenInput",j.a),C=r.a.wrapped(h,"Checked",j.a),E=r.a.wrapped(g,"Unchecked",j.a),_=r.a.span("Wrapper",j.a),I=r.a.span("Content",j.a),v=r.a.span("Control",j.a),y=r.a.label("CheckInput",j.a);t.a=(e=>s.a.createElement(y,{className:Object(c.a)(e.className,{[j.a.checked]:e.checked}),style:{height:e.height||void 0,width:e.width||void 0}},s.a.createElement(_,null,e.children&&!e.rightPosition&&s.a.createElement(I,null,e.children),s.a.createElement(v,null,s.a.createElement(f,{tabIndex:0,type:e.type||"checkbox",checked:e.checked,disabled:e.disabled,name:e.name,value:e.value,onChange:e.onChange,id:e.id}),s.a.createElement(C,null),s.a.createElement(E,null)),e.children&&e.rightPosition&&s.a.createElement(I,null,e.children))))},"./src/chat/controls/ContentEditable/index.m.less":function(e,t,n){e.exports={Textarea:"_24sbNUBZcOO5r5rr66_bs4",textarea:"_24sbNUBZcOO5r5rr66_bs4"}},"./src/chat/controls/Counter/index.m.less":function(e,t,n){e.exports={Counter:"_29dC2XgR_0UoDAMGqRjcN3",counter:"_29dC2XgR_0UoDAMGqRjcN3",count:"_3DpJiXpzJYYt_dzquncBNg",UnreadCounter:"MkRbNWPhGFV272x8SVGyf",unreadCounter:"MkRbNWPhGFV272x8SVGyf"}},"./src/chat/controls/Counter/index.tsx":function(e,t,n){"use strict";n.d(t,"a",function(){return u}),n.d(t,"b",function(){return m});var a=n("./node_modules/react/index.js"),s=n.n(a),c=n("./src/lib/classNames/index.ts"),r=n("./src/lib/lessComponent.tsx"),o=n("./src/chat/controls/Counter/index.m.less"),i=n.n(o);const l=e=>s.a.createElement("span",{className:e.className},e.count),d=r.a.wrapped(l,"Counter",i.a),u=({className:e,count:t})=>s.a.createElement(d,{className:Object(c.a)(e,{[i.a.count]:!!t&&t<0}),count:t});u.displayName="Counter";const h=r.a.wrapped(l,"UnreadCounter",i.a),m=({className:e,count:t})=>s.a.createElement(h,{className:Object(c.a)(e,{[i.a.count]:!t}),count:t});m.displayName="UnreadCounter"},"./src/chat/controls/Dropdown/Row.m.less":function(e,t,n){e.exports={IconWrapper:"qKe4d1r36F9OOtq-XhVf9",iconWrapper:"qKe4d1r36F9OOtq-XhVf9",Text:"_1QLRzzdhJM_LEu2w38yEOx",text:"_1QLRzzdhJM_LEu2w38yEOx",Component:"tN3ccVHcnPD-hU9Iy1MAV",component:"tN3ccVHcnPD-hU9Iy1MAV",selected:"_1yVvFtI4g78_7OjOGhP26K"}},"./src/chat/controls/Dropdown/Row.tsx":function(e,t,n){"use strict";var a=n("./node_modules/react/index.js"),s=n.n(a),c=n("./bundled-modules/styled-components/styled-components.min.js"),r=n("./src/lib/classNames/index.ts"),o=n("./src/lib/lessComponent.tsx"),i=n("./src/reddit/layout/row/Inline/index.tsx"),l=n("./src/chat/controls/Dropdown/Row.m.less"),d=n.n(l);const u=o.a.div("IconWrapper",d.a),h=o.a.span("Text",d.a),m=Object(c.withTheme)(e=>s.a.createElement(i.a,{id:e.id,className:Object(r.a)(e.className,{[d.a.selected]:e.isSelected}),onClick:e.onClick?e.onClick:()=>{},role:"button"},e.children&&s.a.createElement(u,null,e.children),s.a.createElement(h,null,e.displayText)));t.a=o.a.wrapped(m,"Component",d.a)},"./src/chat/controls/Dropdown/index.m.less":function(e,t,n){e.exports={Component:"_1W4rx6zj3WfNob8r3IC3NP",component:"_1W4rx6zj3WfNob8r3IC3NP"}},"./src/chat/controls/Dropdown/index.tsx":function(e,t,n){"use strict";var a=n("./node_modules/react/index.js"),s=n.n(a),c=n("./node_modules/react-redux/es/index.js"),r=n("./src/lib/lessComponent.tsx"),o=n("./src/chat/actions/tooltip.ts"),i=n("./src/chat/controls/Dropdown/index.m.less"),l=n.n(i);const d=Object(c.b)(void 0,e=>({closeTooltip:()=>e(Object(o.d)())}))(class extends a.Component{constructor(e){super(e),this.node=null,this.handleClick=this.handleClick.bind(this),this.handleClickInside=this.handleClickInside.bind(this),this.handleClickOutside=this.handleClickOutside.bind(this)}componentWillMount(){document.addEventListener("mousedown",this.handleClick,!0)}componentWillUnmount(){document.removeEventListener("mousedown",this.handleClick,!0)}handleClick(e){this.node&&this.node.contains(e.target)?this.handleClickInside():this.handleClickOutside()}handleClickInside(){}handleClickOutside(){this.props.closeOnClickOutside&&this.props.closeTooltip()}render(){const e=this.props;return s.a.createElement("div",{ref:e=>this.node=e,className:e.className,style:e.style},e.children)}});t.a=r.a.wrapped(d,"Component",l.a)},"./src/chat/controls/InviteExpander/index.m.less":function(e,t,n){e.exports={ButtonContainer:"_1E2gGzB9EsGIHhxladNCYq",buttonContainer:"_1E2gGzB9EsGIHhxladNCYq",TextButton:"_2F4ieidWvJgru4jmXmYsRQ",textButton:"_2F4ieidWvJgru4jmXmYsRQ",hidden:"sRFrUtJMs7GSDjwvxlxm_",LoadingIndicator:"_23MdJl-7rahZ1WGq4-EqCa",loadingIndicator:"_23MdJl-7rahZ1WGq4-EqCa"}},"./src/chat/controls/MediaObject/index.m.less":function(e,t,n){e.exports={MediaObject:"Q7TqGkVgPLQj2DDlAsN1q",mediaObject:"Q7TqGkVgPLQj2DDlAsN1q"}},"./src/chat/controls/Overlay/index.m.less":function(e,t,n){e.exports={Content:"_2JIrSX2iUneCfhMGppuv22",content:"_2JIrSX2iUneCfhMGppuv22",Overlay:"_249eIqU0mX7GU1qrI9k3F3",overlay:"_249eIqU0mX7GU1qrI9k3F3"}},"./src/chat/controls/OverlayControlBar/index.m.less":function(e,t,n){e.exports={Button:"jKsK0jQWRidPglQ7Czk8y",button:"jKsK0jQWRidPglQ7Czk8y",OverlayControlBar:"_3GhQcGD7m0hf9mkUK6I1JG",overlayControlBar:"_3GhQcGD7m0hf9mkUK6I1JG",primary:"_3fM86Pr7r-ObXeea2Dms_o"}},"./src/chat/controls/OverlayHeader/index.m.less":function(e,t,n){e.exports={BaseMessageStyles:"_1E1yA4seaLlh26LjsJZ5DE",baseMessageStyles:"_1E1yA4seaLlh26LjsJZ5DE",Header:"_3scCev7HurKBoQph3rzCoU",header:"_3scCev7HurKBoQph3rzCoU",Title:"_3A0guGtMzQKVwbvpqNB97u",title:"_3A0guGtMzQKVwbvpqNB97u",Normal:"_1Aqcks07FlOaxti1O-onw7",normal:"_1Aqcks07FlOaxti1O-onw7",Warning:"_14Pn1s4X6btpX11HaKT9P2",warning:"_14Pn1s4X6btpX11HaKT9P2"}},"./src/chat/controls/Svg/index.m.less":function(e,t,n){e.exports={Component:"_2Qq40Mz_DMe0iARkTh8cZn",component:"_2Qq40Mz_DMe0iARkTh8cZn",disable:"_2xw21QiaL_ouF76MONf7hF",active:"_2dOhVJ6aPS9cbx0JfiKCW8",hover:"_1eWUKX11coBa2dErvWkP1q"}},"./src/chat/controls/Svg/index.tsx":function(e,t,n){"use strict";var a=n("./node_modules/react/index.js"),s=n.n(a),c=n("./src/lib/classNames/index.ts"),r=n("./src/lib/lessComponent.tsx"),o=n("./src/chat/controls/Svg/index.m.less"),i=n.n(o);t.a=r.a.wrapped(e=>{const t={height:e.height||void 0,width:e.width||void 0},n=e.disable,a=e.active,r=e.hover;return s.a.createElement("svg",{className:Object(c.a)(e.className,{[i.a.disable]:n,[i.a.active]:a,[i.a.hover]:!!r}),viewBox:e.viewBox,style:t},e.children)},"Component",i.a)},"./src/chat/controls/TimeStamp/index.m.less":function(e,t,n){e.exports={TimeStamp:"_17YpjmUgvP6IL4c_hNW34t",timeStamp:"_17YpjmUgvP6IL4c_hNW34t"}},"./src/chat/controls/Title/index.m.less":function(e,t,n){e.exports={Title:"_2oXQ8aRcV_k61wDVT-T8Be",title:"_2oXQ8aRcV_k61wDVT-T8Be",bold:"_29EQzGGchWdTfIUCkc3hT6"}},"./src/chat/customMiddleware/containerSize.ts":function(e,t,n){"use strict";var a=n("./node_modules/lodash/once.js"),s=n.n(a),c=n("./src/chat/actions/container.ts"),r=n("./src/chat/constants/container.ts"),o=n("./src/chat/customMiddleware/noop.ts"),i=n("./src/chat/selectors/app.ts"),l=n("./src/lib/cache/index.ts"),d=n("./src/lib/constants/index.ts"),u=n("./src/lib/messageIframeParent/index.ts");const h=r.a.HIDDEN,m=r.a.HIDDEN,b=e=>e&&r.b[e]&&e!==r.a.FULL&&e||h||m;let p;const g=e=>Object(u.a)({type:"resize.chat",data:{size:e,dimensions:r.b[e]}}),O=s()(e=>{const t=e.getState(),n=Object(i.d)(t);let a;a=t.meta.isRedesign?m:n?h:r.a.FULL,e.dispatch(Object(c.sizeChanged)(a)),g(a)});t.a=(e=>{if("undefined"==typeof window)return o.a;const t=e.getState(),n=t.user.account,a=n&&n.id||"unknown";return p=Object(l.c)(d.n.CHAT,"container",a),Object(i.b)(t)||O(e),window.addEventListener("storage",e=>{e.key}),e=>t=>{const n=e(t);switch(t.type){case c.SIZE_CHANGED:{const e=b(t.payload);(e=>{Object(l.d)(p,e,l.a)})(e),g(e);break}}return n}})},"./src/chat/customMiddleware/heartbeat.ts":function(e,t,n){"use strict";var a=n("./src/chat/constants/container.ts"),s=n("./src/chat/tracking/sendEvent.ts"),c=n("./src/telemetry/models/Event.ts"),r=n("./src/chat/tracking/fields/common.ts");const o=e=>{Object(s.a)(Object.assign({noun:"timing",source:c.b.Global,action:c.a.Heartbeat},Object(r.a)(e)))};var i=n("./src/lib/constants/index.ts");t.a=(e=>{let t=e.getState();o(t);const n=()=>{setTimeout(()=>{const e=t.container.size;e!==a.a.EMBED&&e!==a.a.FULL||!document.hasFocus()||o(t),n()},30*i.Db)};return n(),n=>a=>{const s=n(a);return t=e.getState(),s}})},"./src/chat/customMiddleware/iframeDispatcher.ts":function(e,t,n){"use strict";var a,s=n("./node_modules/lodash/once.js"),c=n.n(s),r=n("./node_modules/react-router-redux/es/index.js"),o=n("./node_modules/url/url.js"),i=n("./src/lib/constants/index.ts"),l=n("./src/lib/messageIframeParent/index.ts"),d=n("./src/chat/actions/channel.ts"),u=n("./src/chat/actions/container.ts"),h=n("./src/chat/actions/message/unreadCount.ts"),m=n("./src/chat/actions/promo/index.ts"),b=n("./src/chat/constants/container.ts"),p=n("./src/chat/customMiddleware/noop.ts"),g=n("./src/chat/helpers/unreadCount.ts"),O=n("./src/chat/helpers/urls/index.ts"),j=n("./src/chat/selectors/promos.ts"),f=n("./src/chat/tracking/events/platform.ts");!function(e){e.Navigate="navigate.chat",e.Websocket="websocket.chat",e.Expand="expand.chat",e.UnreadCount="unreadCount.chat"}(a||(a={}));const C=c()(e=>{window.addEventListener("message",t=>{const n=(e=>{try{return JSON.parse(e.data)}catch(t){return}})(t);if(n)switch(n.type){case a.Navigate:{const t=Object(o.parse)(n.data.href).pathname||O.rootUrl;e.dispatch(Object(r.b)(t)),e.dispatch(Object(u.sizeChanged)(b.a.EMBED));break}case a.Websocket:e.dispatch(Object(h.b)());break;case a.Expand:{const t=e.getState();e.dispatch(Object(u.sizeChanged)(b.a.EMBED));const a=t.platform.currentPage;a&&a.meta&&a.meta.name===i.zb.CHAT_MINIMIZE&&e.dispatch(Object(d.P)());var s=n.data.telemetry;const c=s.action,r=s.noun,o=s.source;Object(f.a)(t,r,o,c);break}}})});t.a=(e=>"undefined"==typeof window?p.a:(C(e),t=>n=>{switch(n.type){case m.a:case h.a:{const t=Object(j.b)(e.getState()),c=Object.assign({},n.payload);var s=Object(g.a)(c,t);const r=s.unread,o=s.count;Object(l.a)({type:a.UnreadCount,data:{unread:r,count:o}})}}return t(n)}))},"./src/chat/customMiddleware/loggedOutPreferencesSync.ts":function(e,t,n){"use strict";var a=n("./node_modules/js-cookie/src/js.cookie.js"),s=n.n(a),c=n("./node_modules/lodash/pick.js"),r=n.n(c),o=n("./src/config.ts"),i=n("./src/chat/actions/theme.ts");const l=new Set([i.THEME_CHANGED]);t.a=(e=>t=>n=>{const a=t(n);if(l.has(n.type)){const t=e.getState().user,n={prefs:r()(t.prefs,["layout","globalTheme"]),language:t.language};s.a.set("USER",btoa(JSON.stringify(n)),{domain:o.a.cookieDomain})}return a})},"./src/chat/customMiddleware/noop.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return a});const a=e=>t=>e(t)},"./src/chat/customMiddleware/sendbirdToken.ts":function(e,t,n){"use strict";var a=n("./node_modules/lodash/defer.js"),s=n.n(a),c=n("./src/lib/constants/index.ts"),r=n("./src/chat/actions/channel.ts"),o=n("./src/chat/actions/container.ts"),i=n("./src/chat/actions/message/unreadCount.ts"),l=n("./src/chat/actions/platform.ts"),d=n("./src/chat/actions/sendbird/index.ts"),u=n("./src/chat/actions/sendbird/config.ts"),h=n("./src/chat/actions/sendbird/sdk.ts"),m=n("./src/chat/actions/session.ts"),b=n("./src/chat/constants/container.ts"),p=n("./src/chat/constants/sendbird.ts"),g=n("./src/chat/customMiddleware/noop.ts"),O=n("./src/chat/selectors/platform.ts"),j=n("./src/chat/selectors/sendbird.ts");const f=(e,t)=>{const n=t&&t.type===o.SIZE_CHANGED?t.payload:e.container.size,a=n===b.a.MINIMIZED||n===b.a.HIDDEN,s=t&&t.type===l.a?t.payload&&t.payload.routeMatch&&t.payload.routeMatch.route.meta.name===c.zb.CHAT_MINIMIZE:e.platform.currentPage&&e.platform.currentPage.meta&&e.platform.currentPage.meta.name===c.zb.CHAT_MINIMIZE;return!a&&s};t.a=(e=>{if("undefined"==typeof window)return g.a;let t;const n=()=>{const n=e.getState().sendbird.session;n.expires&&n.active?(n=>{const a=new Date,s=new Date(n.expires||0),c=Math.floor(.9*(s.getTime()-a.getTime()));t=setTimeout(()=>{e.dispatch(Object(d.m)())},c)})(n):s()(()=>e.dispatch(Object(d.m)()))};let a;Object(O.a)(e.getState())===c.zb.CHAT_MINIMIZE?s()(async()=>{f(e.getState())?n():(await e.dispatch(Object(d.m)(!1)),e.getState().sendbird.session.token&&await e.dispatch(Object(i.b)()))}):n();return i=>g=>{const O=e.getState(),C=Object(j.b)(O)===p.b.Closed,E=Object(j.e)(O);switch(g.type){case o.SIZE_CHANGED:{if(!g.payload)break;const t=g.payload!==b.a.MINIMIZED&&g.payload!==b.a.HIDDEN;t&&(clearTimeout(a),a=null),C&&t&&!E&&n(),!E||g.payload!==b.a.HIDDEN&&g.payload!==b.a.MINIMIZED||(a=setTimeout(()=>{e.dispatch(Object(h.f)())},10*c.db));break}case l.a:{const t=f(O,g);C&&t?n():t&&e.dispatch(Object(r.P)());break}case d.h:if(!g.payload)break;if(!g.payload.active)break;s()(async()=>{if(await e.dispatch(Object(u.d)()),g.payload&&g.payload.token){const t=g.payload.token;await e.dispatch(Object(h.e)(t))}});break;case m.b:e.dispatch(Object(h.f)()),clearTimeout(t),clearTimeout(a),t=null,a=null}return i(g)}})},"./src/chat/customMiddleware/title.ts":function(e,t,n){"use strict";var a=n("./src/chat/actions/message/unreadCount.ts"),s=n("./src/chat/customMiddleware/noop.ts");t.a=(()=>{const e="undefined"!=typeof window;if(!e)return s.a;const t=window.document.title;return n=>s=>{const c=n(s);switch(s.type){case a.a:{var r=s.payload;const n=r.basicChannelCount,a=r.subredditChannelCount;e&&(window.document.title=n>0?`(${n}) ${t}`:a>0?`(*) ${t}`:t)}}return c}})},"./src/chat/customMiddleware/tokenRefresher.ts":function(e,t,n){"use strict";var a=n("./node_modules/lodash/throttle.js"),s=n.n(a),c=n("./src/lib/constants/index.ts"),r=n("./src/chat/actions/channel.ts"),o=n("./src/chat/actions/session.ts"),i=n("./src/chat/helpers/errors.ts");const l=5*c.db;t.a=(e=>{const t=s()(()=>{e.dispatch(Object(o.d)())},l);let n,a;const c=()=>{const n=e.getState().user.session;if(!n||!a)return;const s=new Date(n.expires),c=a+Math.floor(.8*(s.getTime()-a));Date.now()>c&&t&&t()},d=e=>{a=Date.now();const s=new Date(e.expires).getTime()-a,c=.8+.1*Math.random(),r=Math.min(Math.floor(c*e.expiresIn*1e3),Math.floor(c*s));n=setTimeout(t,r)},u=e.getState();u.user.session&&d(u.user.session);try{window.parent.addEventListener("focus",c),window.parent.addEventListener("touchend",c),document.body.addEventListener("mouseenter",c)}catch(h){Object(i.b)(`Token Refresher Error: ${h}`)}return e=>t=>(t.type!==o.a&&t.type!==o.c||d(t.payload),t.type===r.w&&c(),t.type===o.b&&(clearTimeout(n),n=null),e(t))})},"./src/chat/customMiddleware/tracking.ts":function(e,t,n){"use strict";var a=n("./node_modules/lodash/once.js"),s=n.n(a),c=n("./src/lib/logs/timing.js"),r=n("./src/chat/actions/channel.ts"),o=n("./src/chat/actions/message/index.ts"),i=n("./src/chat/actions/platform.ts"),l=n("./src/chat/actions/sendbird/index.ts"),d=n("./src/chat/actions/sidebar.ts"),u=n("./src/chat/constants/channels.ts"),h=n("./src/chat/constants/sidebar.ts"),m=n("./src/chat/selectors/channels.ts"),b=n("./src/chat/selectors/platform.ts"),p=n("./src/chat/tracking/sendEvent.ts"),g=n("./src/telemetry/models/Event.ts"),O=n("./src/telemetry/models/Timer.ts"),j=n("./src/chat/tracking/fields/chat.ts"),f=n("./src/chat/tracking/fields/common.ts");const C=e=>({type:e}),E=e=>({millis:e});var _=n("./src/chat/tracking/events/chatPreview.ts"),I=n("./src/chat/tracking/events/chatView.ts"),v=n("./src/chat/tracking/events/contactsList.ts"),y=n("./src/chat/tracking/events/invitationInbox.ts"),x=n("./src/chat/tracking/events/messagesInbox.ts");const S=s()((e,t)=>((e,t)=>{Object(p.a)(Object.assign({noun:"inbox_new",source:g.b.ChatPerformance,action:g.a.Load,chat:Object.assign({},Object(j.o)(e),Object(j.q)(e)),timer:Object.assign({},C(O.TimerType.ChatLoadInboxNew),E(t))},Object(f.a)(e)))})(e,(e=>Date.now()-e)(t))),N=s()(e=>Object(b.d)(e)&&w(e)),w=e=>{e.sidebarTabs.activeIndex===h.a.DirectChannels?Object(x.e)(e):Object(x.f)(e)},k=Object(c.c)((e,t,n)=>{Object(m.J)(e)?((e,t)=>{Object(p.a)(Object.assign({noun:"channel_cached",source:g.b.ChatPerformance,action:g.a.Load,chat:Object.assign({},Object(j.g)(e)),timer:Object.assign({},C(O.TimerType.ChatLoadChannelCached),E(t))},Object(f.a)(e)))})(t,n):((e,t)=>{Object(p.a)(Object.assign({noun:"channel_new",source:g.b.ChatPerformance,action:g.a.Load,chat:Object.assign({},Object(j.g)(e)),timer:Object.assign({},C(O.TimerType.ChatLoadChannelNew),E(t))},Object(f.a)(e)))})(t,n)}),T=e=>{Object(b.c)(e)===u.a.CREATE&&Object(v.g)(e)};t.a=(e=>t=>n=>a=>{const s=n(a),c=t.getState();switch(a.type){case i.a:S(c,e),T(c);break;case r.p:k(c,!0);break;case r.r:T(c),N(c);break;case r.q:S(c,e),(e=>{Object(b.c)(e)===u.a.VIEW_INVITE&&Object(y.g)(e)})(c),(e=>Object(b.g)(e)&&Object(I.c)(e))(c),k(c),(e=>{Object(b.c)(e)===u.a.VIEW_JOIN&&Object(_.b)(e)})(c);break;case o.k:case l.c:S(c,e);break;case d.b:w(c)}return s})},"./src/chat/customMiddleware/unreadMessageCount.ts":function(e,t,n){"use strict";var a=n("./node_modules/lodash/debounce.js"),s=n.n(a),c=n("./src/chat/actions/message/unreadCount.ts"),r=n("./src/chat/customMiddleware/noop.ts"),o=n("./src/lib/cache/index.ts"),i=n("./src/lib/constants/index.ts");let l,d;const u=s()(e=>{Object(o.d)(l,e,5*i.db)},5*i.Db,{leading:!1,trailing:!0});let h;const m=()=>{h&&clearInterval(h),h=setInterval(()=>{void 0===Object(o.b)(l)&&Object(c.b)()},5*i.db)};t.a=(e=>{if("undefined"==typeof window)return r.a;const t=e.getState(),n=t.user.account,a=n&&n.id||"unknown";l=Object(o.c)(i.n.CHAT,"unread_message_count",a),u(t.messages.unread.basicChannelCount),m();try{window.parent.addEventListener("focus",m)}catch(s){}return e=>t=>{const n=e(t);switch(t.type){case c.a:{const e=t.payload.basicChannelCount;e!==d&&u(e);break}}return n}})},"./src/chat/endpoints/accounts/index.ts":function(e,t,n){"use strict";n.d(t,"c",function(){return c}),n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o});var a=n("./src/lib/constants/index.ts"),s=n("./src/lib/makeApiRequest/index.ts");const c=async e=>Object(s.b)(e,{endpoint:`${e.apiUrl}/api/v1/me`,method:a.cb.GET,data:{raw_json:1}}),r=async(e,t)=>Object(s.b)(e,{data:{account_id:t,raw_json:1},endpoint:`${e.apiUrl}/api/block_user`,method:a.cb.POST}),o=async(e,t)=>Object(s.b)(e,{endpoint:`${e.apiUrl}/user/${t}/about`,method:a.cb.GET,data:{raw_json:1}})},"./src/chat/endpoints/users/index.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return l}),n.d(t,"d",function(){return d}),n.d(t,"c",function(){return u}),n.d(t,"e",function(){return h});var a=n("./src/lib/constants/index.ts"),s=n("./src/lib/makeApiRequest/index.ts"),c=n("./src/lib/omitHeaders/index.ts"),r=n("./src/reddit/constants/headers.ts"),o=n("./src/chat/models/Message/report.ts");const i=(e,t)=>Object(s.b)(e,{method:a.cb.POST,endpoint:`${e.apiUrl}/api/report_user`,data:{reason:t.reason,user:t.userNickname}}),l=(e,t,n)=>{const c=Object(o.c)(t,n);return Object(s.b)(e,{method:a.cb.POST,endpoint:`${e.apiUrl}/api/report_user`,data:{details:JSON.stringify(c),reason:t.reason,user:t.userNickname}})},d=(e,t)=>Object(s.b)(e,{method:a.cb.GET,endpoint:`${e.apiUrl}/api/user_data_by_account_ids`,data:{raw_json:1,ids:t.join(",")}}),u=e=>Object(s.b)(e,{method:a.cb.GET,endpoint:`${e.apiUrl}/prefs/blocked.json`}),h=e=>Object(s.b)(Object(c.a)(e,[r.a]),{method:a.cb.POST,endpoint:`${e.apiUrl}/api/seen_subreddit_chat_ftux`})},"./src/chat/helpers/chatSelector.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n("./node_modules/lodash/isEqual.js"),s=n.n(a),c=n("./node_modules/reselect/es/index.js");const r=Object(c.b)(c.d,s.a),o=e=>Object(c.c)(e,r)},"./src/chat/helpers/dom.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return s});const a=e=>t=>{if(t.preventDefault(),e&&"function"==typeof e)return e(t)},s=e=>t=>{if(t.preventDefault(),t.stopPropagation(),e&&"function"==typeof e)return e(t)}},"./src/chat/helpers/linkParser/index.ts":function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"c",function(){return o});var a=n("./src/lib/linkMatchers/index.ts");const s=e=>!!a.c.test(e),c=(e,t,n)=>{const a=[];let s=0;return t.forEach(({index:t,lastIndex:c,text:r,url:o,schema:i})=>{const l="mailto:"===i?"_self":"_blank";a.push(e.substring(s,t)),a.push(n(o,r,l,i)),s=c}),a.push(e.substring(s,e.length)),a},r=/^(((file|https?|ftps?):)?\/|mailto:)/i,o=e=>{if(void 0===e)return e;return e.match(r)?e:"#"};t.a=((e,t,n)=>{const s=Object(a.a)(e,t);return s&&s.length?c(e,s,n):e})},"./src/chat/helpers/styles/components/index.m.less":function(e,t,n){e.exports={HeaderMain:"_2c7PdJhtZYaRXPDl6VZDXL",headerMain:"_2c7PdJhtZYaRXPDl6VZDXL",RegularText:"_1Ke-z89tci1Ds-jhHyFAar",regularText:"_1Ke-z89tci1Ds-jhHyFAar",CenterWrapper:"_2RzakqFb75vsIBk7E43T_C",centerWrapper:"_2RzakqFb75vsIBk7E43T_C",CenterContent:"_13Gn8BFWgn5Dx1YEb5KBqX",centerContent:"_13Gn8BFWgn5Dx1YEb5KBqX"}},"./src/chat/icons/Loader/index.m.less":function(e,t,n){e.exports={Square:"_1o-ux8CJI01lsz3U88wukN",square:"_1o-ux8CJI01lsz3U88wukN",LoadingIcon:"_2aBU27Uc0L10Q-sondXGQo",loadingIcon:"_2aBU27Uc0L10Q-sondXGQo",Wrapper:"_2zstkXjlzum5VrIXwJ_LbE",wrapper:"_2zstkXjlzum5VrIXwJ_LbE"}},"./src/chat/icons/Nsfw/index.m.less":function(e,t,n){e.exports={NSFWIcon:"_3tGjpjmj4u2KBLEzbnRoY8",nsfwIcon:"_3tGjpjmj4u2KBLEzbnRoY8",SmallNSFWIcon:"_1-70BdutOVjeysjfA7hXNi",smallNsfwIcon:"_1-70BdutOVjeysjfA7hXNi"}},"./src/chat/icons/Userpic/index.m.less":function(e,t,n){e.exports={FallbackAvatar:"_3fWTn-X4PrDQLucVMSXwyV",fallbackAvatar:"_3fWTn-X4PrDQLucVMSXwyV",FallbackAvatarWrapper:"_3CFk8xpOzvpvSC_PBxNSK4",fallbackAvatarWrapper:"_3CFk8xpOzvpvSC_PBxNSK4",SnooIcon:"_1GdxTd_KdBwXGklhIJkGJa",snooIcon:"_1GdxTd_KdBwXGklhIJkGJa",VoicesAvatar:"_3WnOjkciK_EV9-9Ak459rx",voicesAvatar:"_3WnOjkciK_EV9-9Ak459rx"}},"./src/chat/icons/svgs/ChatNew/index.tsx":function(e,t,n){"use strict";var a=n("./node_modules/react/index.js"),s=n.n(a),c=n("./src/chat/controls/Svg/index.tsx");t.a=(e=>s.a.createElement(c.a,Object.assign({},e,{viewBox:"0 0 16 16"}),s.a.createElement("path",{d:"M10.625 8.656h-1.97v1.97c0 .36-.293.655-.655.655-.362 0-.656-.293-.656-.655v-1.97h-1.97c-.36 0-.655-.293-.655-.655 0-.362.293-.656.655-.656h1.97v-1.97c0-.36.293-.655.655-.655.362 0 .656.293.656.655v1.97h1.97c.36 0 .655.293.655.655 0 .362-.293.656-.655.656M8 1C4.14 1 1 4.14 1 8c0 1.222.317 2.372.87 3.373l-.824 2.476c-.105.313-.024.66.21.894.167.167.39.256.62.256.09 0 .185-.015.275-.045l2.478-.825c1 .553 2.15.87 3.372.87 3.86 0 7-3.14 7-7s-3.14-7-7-7"})))},"./src/chat/icons/svgs/Checkbox/checked.m.less":function(e,t,n){e.exports={StyledCircle:"_2QEVbfgOdAh_E_UteGSdz9",styledCircle:"_2QEVbfgOdAh_E_UteGSdz9",StyledCheckmark:"_2hHL8LCEXapDOjiChO0JWH",styledCheckmark:"_2hHL8LCEXapDOjiChO0JWH"}},"./src/chat/icons/svgs/Checkbox/unchecked.m.less":function(e,t,n){e.exports={StyledCircle:"_2WDOoyLYNQZODKF6ScpgSO",styledCircle:"_2WDOoyLYNQZODKF6ScpgSO"}},"./src/chat/icons/svgs/NavClose/index.tsx":function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n("./node_modules/react/index.js"),s=n.n(a),c=n("./src/chat/controls/Svg/index.tsx");const r=e=>s.a.createElement(c.a,Object.assign({},e,{viewBox:"0 0 20 20"}),s.a.createElement("path",{d:"M11.105 9.75l4.114-4.114a.957.957 0 1 0-1.355-1.355L9.75 8.395 5.636 4.281a.957.957 0 1 0-1.355 1.355L8.395 9.75l-4.114 4.114a.957.957 0 1 0 1.355 1.355l4.114-4.114 4.114 4.114a.956.956 0 0 0 1.355 0 .957.957 0 0 0 0-1.355L11.105 9.75z",fillRule:"evenodd"}));r.displayName="NavClose"},"./src/chat/icons/svgs/Trash/index.tsx":function(e,t,n){"use strict";var a=n("./node_modules/react/index.js"),s=n.n(a),c=n("./src/chat/controls/Svg/index.tsx");t.a=(e=>s.a.createElement(c.a,Object.assign({},e,{viewBox:"0 0 16 16"}),s.a.createElement("path",{d:"M10.845 11.6c0 .22-.182.4-.407.4a.403.403 0 0 1-.406-.4V7.2c0-.22.182-.4.406-.4.225 0 .407.18.407.4v4.4zm-2.438 0c0 .22-.183.4-.407.4a.403.403 0 0 1-.406-.4V7.2c0-.22.182-.4.406-.4.224 0 .407.18.407.4v4.4zm-2.439 0c0 .22-.182.4-.406.4a.403.403 0 0 1-.406-.4V7.2c0-.22.182-.4.406-.4.224 0 .406.18.406.4v4.4zm6.426-6.8c.225 0 .406.18.406.4v8c0 .662-.547 1.2-1.219 1.2H4.42c-.672 0-1.219-.538-1.219-1.2v-8c0-.22.181-.4.407-.4h8.787zm0-2.4c.224 0 .406.18.406.4v.8c0 .22-.182.4-.407.4H3.606a.403.403 0 0 1-.406-.4v-.8c0-.22.182-.4.406-.4H6.01l.602-.666a.411.411 0 0 1 .304-.134h2.166c.116 0 .226.049.304.134l.602.666h2.404z",fillRule:"evenodd"})))},"./src/chat/models/Channel/platform.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a=n("./src/chat/models/Channel/subreddit.ts"),s=n("./src/chat/models/Channel/utils/index.ts"),c=n("./src/chat/models/Channel/utils/removeSendbirdPrefix.ts"),r=n("./src/chat/models/User/inviter.ts"),o=n("./src/chat/models/User/member.ts");function i(e,t){return{channelId:Object(c.a)(e.channel_url),channelSendbirdUrl:e.channel_url,channelState:Object(s.b)(t),fetchingFirstMessage:!1,fetchingMessages:!1,fetchingMessagesError:!1,hasMoreMessages:!1,isMessageListLoaded:!1,inviter:Object(r.b)(e.inviter),coverUrl:e.cover_url,createdAt:e.created_at,customType:e.custom_type,data:e.data,maxLengthMessage:-1,memberCount:e.member_count,name:e.name,type:Object(s.d)(e),lastMessage:void 0,unreadMessageCount:e.unread_message_count,unreadMentionCount:e.unread_mention_count,members:Object(o.a)(e.members),customData:Object(a.d)(e.data)}}},"./src/chat/models/Contact/index.ts":function(e,t,n){"use strict";n.d(t,"c",function(){return s}),n.d(t,"a",function(){return c}),n.d(t,"d",function(){return r}),n.d(t,"b",function(){return o});var a=n("./src/lib/constants/index.ts");function s(e){return e?e.map(r).filter(e=>!!e):[]}const c=3;function r(e){if(e.contact_account_id||e.id)return{id:e.contact_account_id||`${a.mb.ACCOUNT}_${e.id}`,name:e.name,lastInteraction:e.last_interaction,created:e.created_utc,linkKarma:e.link_karma,commentKarma:e.comment_karma,profileImg:e.profile_img,isNSFW:e.profile_over_18}}const o={id:"",name:"",profileImg:"",lastInteraction:0,created:0,linkKarma:0,commentKarma:0,isNSFW:!1}},"./src/chat/models/Message/report.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o}),n.d(t,"c",function(){return i});var a=n("./node_modules/lodash/sortBy.js"),s=n.n(a),c=n("./src/chat/helpers/errors.ts");const r=(e,t)=>t&&t.sender?{channelUrl:t.channelSendbirdUrl,channelType:t.channelType,createdAt:t.createdAt,customData:t.data,customType:t.customType,messageBody:t.messageData.value,messageId:t.messageId,userId:t.sender.userId,fileUrl:"",reason:e,userNickname:t.sender.nickname}:Object(c.b)(`\n      Error reporting message: ${t&&t.messageId}.\n      The sender is unknown.\n    `),o=(e,t,n)=>{if(!t||!t.sender)return[];const a=s()(n,["createdAt"]),c=a.findIndex(({messageId:e})=>e===t.messageId),o=Math.max(c-20,0),i=c+20;return a.slice(o,i).reduce((t,n)=>{const a=r(e,n);return a&&t.push(a),t},[])},i=(e,t)=>t?{sendbirdChatMessage:e,sendbirdEphemeralChatLog:t}:{sendbirdChatMessage:e}},"./src/chat/models/ReportFlow/index.ts":function(e,t,n){"use strict";var a;n.d(t,"a",function(){return a}),function(e){e[e.Default=0]="Default",e[e.BlockUser=1]="BlockUser",e[e.FileComplaint=2]="FileComplaint"}(a||(a={}))},"./src/chat/models/Theme/index.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return m});var a=n("./node_modules/polished/dist/polished.es.js"),s=n("./src/reddit/constants/theme.ts"),c=n("./src/reddit/models/Theme/index.ts"),r=n("./src/chat/constants/theme.ts"),o=n("./src/reddit/constants/colors.ts");const i=s.b.REDDIT,l=s.b.NIGHT,d=e=>c.d[e].newRedditTheme,u={activity:{icon:{default:Object(a.a)(.3,o.a.white),active:o.a.op,disable:Object(a.a)(.5,o.a.white),hover:Object(a.a)(.5,o.a.white),contrast:d(i).bodyText,nsfw:{bg:o.a.black,text:o.a.white}},text:{regular:d(i).bodyText,active:o.a.op,fade:Object(a.a)(.4,o.a.white),light:d(i).actionIcon,warning:o.a.warning,highlight:o.a.white,success:o.a.approved},button:{active:o.a.alienblue},send:{disable:Object(a.a)(.5,o.a.white),hover:Object(a.a)(.08,o.a.op)},checkbox:{checked:o.a.alienblue,checkmark:o.a.white,unchecked:d(i).body,uncheckedBorder:Object(a.a)(.3,o.a.white)},input:{border:o.a.defaultFlair,focusColor:o.a.white,focusBg:o.a.approved,ownerBg:d(i).line,color:d(i).bodyText,error:o.a.warning,channelRename:Object(a.a)(.1,o.a.white)},link:{staticUnderline:o.a.alienblue,staticText:o.a.op,hoverText:o.a.snoo}},layout:{body:d(i).body,colsBorder:d(i).line,controlsBorder:Object(a.g)(o.a.black,.15),header:{counterBg:o.a.snoo,counterText:o.a.white},scrollbar:Object(a.a)(.2,o.a.white),scrollbarHover:Object(a.a)(.4,o.a.white)},message:{list:{item:{ownerBg:d(i).inactive,button:d(i).actionIcon}}},subreddit:{iconBg:o.a.alienblue},sidebar:{background:Object(a.g)(Object(a.a)(.3,o.a.white),.1),subreddit:{background:{active:o.a.alienblue,hover:d(i).canvas}},basic:{background:{active:o.a.alienblue,hover:d(i).canvas}},text:{divider:Object(a.a)(.5,o.a.white)}},toast:{pending:o.a.black,success:o.a.approved}},h={activity:{icon:{default:Object(a.a)(.3,o.a.white),active:o.a.op,disable:Object(a.a)(.5,o.a.white),hover:Object(a.a)(.5,o.a.white),contrast:Object(a.a)(.4,d(l).bodyText),nsfw:{bg:o.a.black,text:o.a.white}},text:{regular:d(l).bodyText,active:o.a.op,fade:Object(a.a)(.4,o.a.white),light:d(l).actionIcon,warning:o.a.warning,highlight:o.a.white,success:o.a.approved},button:{active:o.a.alienblue},send:{disable:Object(a.a)(.5,o.a.white),hover:Object(a.a)(.08,o.a.op)},checkbox:{checked:o.a.alienblue,checkmark:o.a.white,unchecked:d(l).body,uncheckedBorder:Object(a.a)(.3,o.a.white)},input:{border:o.a.defaultFlair,focusColor:o.a.white,focusBg:o.a.approved,ownerBg:d(l).line,color:d(l).bodyText,error:o.a.warning,channelRename:Object(a.a)(.1,o.a.white)},link:{staticUnderline:o.a.alienblue,staticText:o.a.op,hoverText:o.a.snoo}},layout:{body:d(l).body,colsBorder:d(l).line,controlsBorder:Object(a.g)(o.a.white,.15),header:{counterBg:o.a.snoo,counterText:o.a.white},scrollbar:Object(a.a)(.2,d(l).bodyText),scrollbarHover:Object(a.a)(.1,d(l).bodyText)},message:{list:{item:{ownerBg:d(l).inactive,button:d(l).actionIcon}}},subreddit:{iconBg:o.a.alienblue},sidebar:{background:Object(a.g)(Object(a.a)(.4,o.a.white),.1),subreddit:{background:{active:o.a.alienblue,hover:Object(a.h)(.2,d(l).canvas)}},basic:{background:{active:o.a.alienblue,hover:Object(a.h)(.2,d(l).canvas)}},text:{divider:Object(a.a)(.5,o.a.white)}},toast:{pending:o.a.black,success:o.a.approved}},m={[r.b.REDDIT]:u,[r.b.NIGHT]:h}},"./src/chat/models/User/index.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i});var a=n("./src/lib/constants/index.ts"),s=n("./src/lib/convertToCamelCase/index.ts");const c=`${a.mb.ACCOUNT}_`,r=e=>{const t={};for(const n in e)t[n]=o(Object.assign({id:n},e[n]));return t};function o(e){return{id:e.id,name:e.name,created:e.created_utc,linkKarma:e.link_karma,commentKarma:e.comment_karma,profileImg:e.profile_img,isNSFW:e.profile_over_18}}const i=e=>{const t=(e=>(e&&e.id&&(e.id.includes(c)?e.id=e.id:e.id=c+e.id),e))(e);return Object(s.a)(t)}},"./src/chat/pageLoaders/async.ts":function(e,t,n){"use strict";var a=n("./src/lib/constants/index.ts"),s=n("./node_modules/react/index.js"),c=n.n(s),r=n("./src/chat/strings/index.ts"),o=n("./src/config.ts"),i=n("./src/lib/lessComponent.tsx"),l=n("./src/chat/components/CloseIcon/index.tsx"),d=n("./src/chat/controls/Button/index.tsx"),u=n("./src/chat/helpers/styles/components/index.m.less"),h=n.n(u);const m=i.a.h2("HeaderMain",h.a),b=i.a.p("RegularText",h.a),p=i.a.div("CenterWrapper",h.a),g=i.a.div("CenterContent",h.a),O=e=>c.a.createElement(p,{className:e.className},c.a.createElement(g,null,e.children));var j=n("./src/chat/icons/svgs/ChatNew/index.tsx"),f=n("./src/chat/helpers/urls/index.ts"),C=n("./node_modules/react-router-dom/es/index.js"),E=n("./src/chat/components/EmptyState/index.m.less"),_=n.n(E);const I=i.a.div("Wrapper",_.a),v=i.a.img("Image",_.a),y=i.a.div("Info",_.a),x=i.a.wrapped(m,"Header",_.a),S=i.a.wrapped(d.a,"Button",_.a);var N=()=>c.a.createElement(O,null,c.a.createElement(l.a,null),c.a.createElement(I,null,c.a.createElement(v,{src:`${o.a.assetPath}/img/chat/empty-hero.png`}),c.a.createElement(y,null,c.a.createElement(x,null,Object(r.a)("en","app.chat.emptyState.title")),c.a.createElement(b,null,Object(r.a)("en","app.chat.emptyState.main"),c.a.createElement(C.a,{to:Object(f.channelUrl)("create")},c.a.createElement(S,{primary:!0},c.a.createElement(j.a,{width:"1em"})," ",Object(r.a)("en","app.chat.actions.new")))))));class w extends c.a.Component{render(){return c.a.createElement(N,null)}}class k extends c.a.Component{render(){return null}}t.a=(e=>()=>{switch(e){case a.o.CHAT:return n.e("ChatPage").then(n.bind(null,"./src/chat/pages/Chat.tsx")).then(e=>e.default);case a.o.CHAT_EMPTY:return Promise.resolve(w);case a.o.CHAT_MINIMIZE:return Promise.resolve(k);default:throw new Error(`Route is not defined for '${e}'.`)}})},"./src/chat/reducers/index.ts":function(e,t,n){"use strict";var a=n("./node_modules/redux/es/index.js"),s=n("./src/chat/actions/channel.ts");var c=(e=!1,t)=>{switch(t.type){case s.r:return!0;default:return e}},r=n("./node_modules/lodash/uniq.js"),o=n.n(r),i=n("./src/chat/models/Channel/index.ts"),l=n("./src/chat/models/Channel/utils/index.ts");const d={fetchingChannels:!1,hasMoreChannels:!1,sortedKeys:[]};var u=(e=d,t)=>{switch(t.type){case s.h:return Object.assign({},e,{fetchingChannels:!0});case s.i:return Object.assign({},e,{fetchingChannels:!1});case s.a:{var n=t.payload;const a=n.channels,s=n.hasMoreChannels,c=Object(l.c)(a,[i.a.Direct,i.a.Group]);if(!c)return e;const r=Object.keys(c),o=s&&!!r.length;return Object.assign({},e,{fetchingChannels:!1,hasMoreChannels:o,sortedKeys:[...e.sortedKeys,...r]})}case s.t:{const n=t.payload.channelId;return Object.assign({},e,{sortedKeys:e.sortedKeys.filter(e=>e!==n)})}case s.v:case s.m:{const n=t.payload.channelId;return Object.assign({},e,{sortedKeys:e.sortedKeys.filter(e=>e!==n)})}case s.y:{const n=t.payload.channel.channelId;return e.sortedKeys.indexOf(n)>-1?Object.assign({},e,{sortedKeys:e.sortedKeys.filter(e=>e!==n)}):e}case s.x:{const n=t.payload.channel;return e.sortedKeys.includes(n.channelId)?e:Object.assign({},e,{sortedKeys:o()([n.channelId,...e.sortedKeys])})}default:return e}};var h=(e=!1,t)=>{switch(t.type){case s.c:return!1;case s.g:return!0;default:return e}};var m=n("./src/chat/actions/message/index.ts");const b={fetchingChannels:!1,hasMoreChannels:!0,sortedKeys:[]};var p=(e=b,t)=>{switch(t.type){case s.j:return Object.assign({},e,{fetchingChannels:!0});case s.k:return Object.assign({},e,{fetchingChannels:!1});case s.b:{var n=t.payload;const a=n.channels,s=n.hasMoreChannels,c=Object(l.c)(a,[i.a.Direct,i.a.Group]);if(!c)return e;const r=Object.keys(c),o=s&&!!r.length;return Object.assign({},e,{fetchingChannels:!1,hasMoreChannels:o,sortedKeys:[...e.sortedKeys,...r]})}case s.v:case s.m:{const n=t.payload.channelId;return Object.assign({},e,{sortedKeys:e.sortedKeys.filter(e=>e!==n)})}case s.t:{const n=t.payload.channelId;return Object.assign({},e,{sortedKeys:[n,...e.sortedKeys]})}case s.f:{const n=Object.keys(t.payload);return Object.assign({},e,{sortedKeys:o()([...n,...e.sortedKeys])})}case s.u:case m.a:{const n=t.payload.channelId;return e.sortedKeys.includes(n)?Object.assign({},e,{sortedKeys:o()([n,...e.sortedKeys])}):e}default:return e}},g=n("./node_modules/lodash/first.js"),O=n.n(g),j=n("./node_modules/lodash/omit.js"),f=n.n(j),C=n("./node_modules/lodash/reduce.js"),E=n.n(C),_=n("./src/chat/actions/channel/dropdown.ts"),I=n("./src/chat/actions/channel/subreddit.ts"),v=n("./src/chat/actions/message/inboxScroller.ts"),y=n("./src/chat/constants/channels.ts");const x={};var S=(e=x,t)=>{switch(t.type){case s.f:return Object.assign({},e,t.payload);case s.b:case s.a:case I.e:case I.f:{const n=t.payload.channels,a=E()(e,(e,t,a)=>n[a]&&t.channelState===y.b.PARTIAL&&(e[a]=n[a])&&e||e,{});return Object.assign({},n,e,a)}case I.g:return Object.assign({},t.payload.channels,e);case s.o:{const n=t.payload,a=e[n];return!a||a&&0===a.unreadMessageCount?e:Object.assign({},e,{[n]:Object.assign({},a,{unreadMessageCount:0,unreadMentionCount:0})})}case s.t:case I.b:{const n=t.payload.channelId,a=Object.assign({},e[n],{channelState:y.b.JOINED});return Object.assign({},e,{[a.channelId]:a})}case s.y:{const n=t.payload.channel,a=e[n.channelId],s=Object.assign({},a,f()(n,"hasMoreMessages","isMessageListLoaded")),c={[n.channelId]:s};return Object.assign({},e,c)}case I.m:case s.x:{const n=t.payload.channel,a=e[n.channelId],s=Object.assign({},a,n,{channelState:y.b.INVITED}),c={[n.channelId]:s};return Object.assign({},e,c)}case s.w:{const n=t.payload.channel;return Object.assign({},e,{[n.channelId]:n})}case s.m:{const n=t.payload.channelId;return f()(e,n)}case s.v:{const n=t.payload.channelId,a=Object.assign({},e[n],{channelState:y.b.UNSORTED});return Object.assign({},e,{[a.channelId]:a})}case _.a:{var n=t.payload;const a=n.channelId,s=n.name,c=Object.assign({},e[a],{name:s});return Object.assign({},e,{[a]:Object.assign({},c)})}case m.a:{const n=t.payload.channelId,a=Number(O()(Object.keys(t.payload.message))),s=Object.assign({},e[n],{lastMessage:t.payload.message[a]});return Object.assign({},e,{[n]:s})}case m.g:{const n=t.payload;return Object.assign({},e,{[n]:Object.assign({},e[n],{fetchingMessages:!0,fetchingMessagesError:!1})})}case m.b:case m.e:{var a=t.payload;const n=a.hasMore,s=a.channelId;return Object.assign({},e,{[s]:Object.assign({},e[s],{isMessageListLoaded:!0,hasMoreMessages:n,fetchingMessages:!1,fetchingMessagesError:!1})})}case m.f:{const n=t.payload;return Object.assign({},e,{[n]:Object.assign({},e[n],{fetchingMessages:!1,fetchingMessagesError:!0})})}case s.l:{const n=t.payload.channelId;return Object.assign({},e,{[n]:Object.assign({},e[n],{fetchingFirstMessage:!0})})}case s.s:{var c=t.payload;const n=c.channelId,a=c.firstMessageId;return Object.assign({},e,{[n]:Object.assign({},e[n],{fetchingFirstMessage:!1,firstMessageId:a})})}case v.b:{const n=t.payload.channelId;return Object.assign({},e,{[n]:Object.assign({},e[n],{hasMoreMessages:!0})})}default:return e}};const N={channelId:void 0,isLoaded:!1};var w=(e=N,t)=>{switch(t.type){case s.p:{const n=Object.assign({},e,{isLoaded:!1});if(t.payload){const e=t.payload.channelId;e&&(n.channelId=e)}return n}case s.q:return Object.assign({},e,{isLoaded:!0});case s.v:case s.m:return t.payload.channelId!==e.channelId?e:Object.assign({},e,{channelId:""});default:return e}};const k={sortedKeys:[]};var T=(e=k,t)=>{switch(t.type){case I.a:return{sortedKeys:[t.payload.channelId]};default:return e}};const M={fetchingChannels:!1,hasMoreChannels:!1,sortedKeys:[]};var D=(e=M,t)=>{switch(t.type){case I.h:return Object.assign({},e,{fetchingChannels:!0});case I.i:return Object.assign({},e,{fetchingChannels:!1});case I.e:{var n=t.payload;const a=n.channels,s=n.hasMoreChannels,c=Object(l.e)(a,"name"),r=Object.keys(c);return r.length?{fetchingChannels:!1,hasMoreChannels:s&&!!r,sortedKeys:[...r]}:e}case s.v:case s.m:case I.b:{const n=t.payload.channelId;return e.sortedKeys.includes(n)?Object.assign({},e,{sortedKeys:e.sortedKeys.filter(e=>e!==n)}):e}case I.m:{const n=t.payload.channel;return Object.assign({},e,{sortedKeys:o()([n.channelId,...e.sortedKeys])})}default:return e}};const A={fetchingChannels:!1,sortedKeys:{}},L=(e,t,n)=>Object.assign({},e,{[t.toLowerCase()]:e[t.toLowerCase()].filter(e=>e!==n)});var U=(e=A,t)=>{switch(t.type){case I.j:return Object.assign({},e,{fetchingChannels:!0});case I.k:return Object.assign({},e,{fetchingChannels:!1});case I.b:case I.f:{const e=t.payload.sortedKeys;return{fetchingChannels:!1,sortedKeys:Object.assign({},e)}}case s.v:case s.m:{var n=t.payload;const a=n.channelId,s=n.subredditName,c=s&&s.toLowerCase();if(!e.sortedKeys[c]||!e.sortedKeys[c].includes(a))return e;const r=e.sortedKeys[c].length<=1?f()(e.sortedKeys,c):L(e.sortedKeys,c,a);return Object.assign({},e,{sortedKeys:r})}case s.w:{const n=e.sortedKeys,a=t.payload.channel.channelId;for(const t in n)e.sortedKeys[t.toLowerCase()].includes(a)&&L(n,t.toLowerCase(),a);return Object.assign({},e,{sortedKeys:n})}default:return e}};const B={sortedKeys:[]};var R=(e=B,t)=>{switch(t.type){case I.c:return{sortedKeys:[t.payload.channelId]};default:return e}};const P={fetchingChannels:!1,firstLoaded:!1,sortedKeys:[]};var H=(e=P,t)=>{switch(t.type){case I.l:return Object.assign({},e,{firstLoaded:!0,fetchingChannels:!0});case I.g:{const n=t.payload.channels,a=Object.keys(n);return a.length?{fetchingChannels:!1,firstLoaded:e.firstLoaded,sortedKeys:[...a]}:e}default:return e}},F=Object(a.c)({banned:T,invited:D,joined:U,kicked:R,recommended:H}),K=Object(a.c)({isCreatingChannel:(e=!1,t)=>{switch(t.type){case s.e:return!0;case s.f:case s.d:return!1;default:return e}},firstLoaded:c,inviteListExpanded:h,invited:u,joined:p,models:S,selected:w,subreddit:F}),G=n("./src/chat/actions/user.ts");var z=(e=!1,t)=>{switch(t.type){case G.b:return!0;default:return e}},W=n("./node_modules/lodash/values.js"),V=n.n(W),q=n("./src/chat/actions/sendbird/index.ts");const J="search",Z="contacts",Q={};var Y=(e=Q,t)=>{switch(t.type){case q.g:return Object.assign({},e,t.payload.reduce((e,t)=>(e[t.name.toLowerCase()]={loaded:!0,userId:t.id,valid:!0,method:Z},e),{}));case q.b:return Object.assign({},t.payload.reduce((e,t)=>(e[t.name.toLowerCase()]={loaded:!0,userId:t.id,valid:!0,method:Z},e),{}),e);case q.d:{const n=t.payload.username;return Object.assign({},e,{[n]:{loaded:!1,userId:null,valid:!1,method:J}})}case q.e:{var n=t.payload;const a=n.contact,s=n.username,c=!!(n.valid&&a&&a.id);return Object.assign({},e,{[s.toLowerCase()]:{loaded:!0,userId:a?a.id:null,valid:c,method:J}})}case G.i:{const n=t.payload;return Object.assign({},e,V()(n).reduce((e,t)=>(e[t.name.toLowerCase()]={loaded:!0,userId:t.id,valid:!0,method:J},e),{}))}case G.c:{const n=t.payload.username;return n?f()(e,n):e}default:return e}};const X={};var $=(e=X,t)=>{switch(t.type){case q.g:return Object.assign({},e,t.payload.reduce((t,n)=>(t[n.id]=Object.assign({},e[n.id],n),t),{}));case q.e:{const n=t.payload.contact;return n?Object.assign({},e,{[n.id]:n}):e}case G.i:return Object.assign({},e,t.payload||{});case G.c:{const n=t.payload.userId;return n?Object.assign({},e,{[n]:Object.assign({},e[n],{isBlocked:!0})}):e}case G.b:{const n=t.payload.blockedContacts;return Object.assign({},e,n)}default:return e}};const ee=[];var te=(e=ee,t)=>{switch(t.type){case G.h:return[...e,t.payload];case G.k:return e.filter(e=>e!==t.payload);case G.j:return ee;default:return e}};const ne=[];var ae=(e=ne,t)=>{switch(t.type){case q.g:return[...e,...t.payload.map(e=>e.id)];case G.c:return e.filter(e=>e!==t.payload.userId);default:return e}},se=Object(a.c)({fetchedBlockedUsers:z,knownContacts:Y,models:$,selectedUserIds:te,suggestedKeys:ae}),ce=n("./src/chat/actions/container.ts"),re=n("./src/chat/constants/container.ts");const oe={size:re.a.EMBED};var ie=(e=oe,t)=>{switch(t.type){case ce.SIZE_CHANGED:if(re.b[t.payload])return Object.assign({},e,{size:t.payload});default:return e}},le=n("./src/lib/makeActionCreator/index.ts"),de=n("./src/lib/constants/index.ts");n("./src/lib/makeApiRequest/index.ts");Object(le.a)("EMOJIS__FETCH_EMOJIS_FAILED"),Object(le.a)("EMOJI__ADD_EMOJIS");const ue={snoomojis:{}};var he=(e=ue,t)=>{switch(t.type){case"EMOJI__ADD_EMOJIS":{const e=t.payload.snoomojis;return{snoomojis:Object.assign({},e)}}default:return e}},me=n("./node_modules/lodash/toArray.js"),be=n.n(me),pe=n("./node_modules/lodash/uniqBy.js"),ge=n.n(pe),Oe=n("./src/chat/actions/members.ts");const je={};var fe=(e=je,t)=>{switch(t.type){case Oe.b:{const n=t.payload.channelId;return Object.assign({},e,{[n]:Object.assign({},e[n],{fetchingMembers:!0})})}case Oe.c:{var n=t.payload;const a=n.channelId,s=n.hasMoreMembers;return Object.assign({},e,{[a]:Object.assign({},e[a],{hasMoreMembers:s,fetchingMembers:!1})})}case Oe.a:{var a=t.payload;const n=a.channelId,s=a.members,c=be()(s),r=e[n]&&e[n].model||[],o=ge()([...r,...c],"id");return Object.assign({},e,{[n]:Object.assign({},e[n],{model:o})})}case Oe.d:return{};default:return e}};var Ce=(e=!1,t)=>{switch(t.type){case m.b:case m.k:return!0;default:return e}};const Ee={};var _e=(e=Ee,t)=>{switch(t.type){case m.b:{const n=t.payload.messages;return Object.assign({},e,n)}case m.a:return Object.assign({},e,t.payload.message);case m.h:return Object.assign({},e,t.payload);case m.d:case m.i:return f()(e,t.payload);case m.e:{const n=t.payload.messages;return Object.assign({},e,n)}case s.n:{const n=t.payload;return Object.assign({},f()(e,...n))}case v.a:{const n=t.payload.messageIdList;return f()(e,n)}default:return e}};const Ie={};var ve=(e=Ie,t)=>{switch(t.type){case m.c:{const n=t.payload;return Object.assign({},e,{[n.clientMessageId]:n})}case m.l:{var n=t.payload;const a=n.clientMessageId,s=n.toggle;if(a){const t=e[a];return Object.assign({},e,{[a]:Object.assign({},t,{error:s})})}return Object.assign({},e)}case m.a:case m.j:{const n=t.payload.clientMessageId;return Object.assign({},n?f()(e,n):e)}default:return e}},ye=n("./node_modules/lodash/isEqual.js"),xe=n.n(ye),Se=n("./src/chat/actions/message/unreadCount.ts");const Ne={basicChannelCount:0,subredditChannelCount:0,subredditMentionCount:0};var we=(e=Ne,t)=>{switch(t.type){case Se.a:return xe()(e,t.payload)?e:Object.assign({},e,t.payload)}return e},ke=Object(a.c)({firstLoaded:Ce,models:_e,pending:ve,unread:we}),Te=n("./src/chat/reducers/meta/index.ts"),Me=n("./src/chat/reducers/platform/index.ts"),De=n("./src/chat/reducers/promos/index.ts"),Ae=n("./src/chat/actions/sendbird/config.ts");const Le={maxMessageLength:void 0};var Ue=(e=Le,t)=>{switch(t.type){case Ae.b:return Object.assign({},e,t.payload);default:return e}};const Be={host:void 0};var Re=(e=Be,t)=>{switch(t.type){case Ae.c:return Object.assign({},e,t.payload);default:return e}},Pe=n("./src/chat/actions/sendbird/sdk.ts"),He=n("./src/chat/constants/sendbird.ts");const Fe={connectionStatus:He.b.Closed,initialized:!1};var Ke=(e=Fe,t)=>{switch(t.type){case Pe.a:return Object.assign({},e,{initialized:!0,connectionStatus:He.b.Open});case Pe.c:{const n=Object.assign({},t.payload);return Object.assign({},e,{error:n,connectionStatus:He.b.Closed})}case Pe.b:return Object.assign({},e,{connectionStatus:He.b.Closed});case Pe.d:{const n=t.payload.connectionStatus;return Object.assign({},e,{connectionStatus:n})}default:return e}};const Ge={expires:void 0,token:void 0,active:!1};var ze=(e=Ge,t)=>{switch(t.type){case q.h:return Object.assign({},e,t.payload);case q.a:return Object.assign({},e,{active:!0});case q.c:return Object.assign({},e,{active:!1});default:return e}},We=Object(a.c)({globalSettings:Ue,proxy:Re,session:ze,sdk:Ke}),Ve=n("./src/chat/actions/sidebar.ts");const qe=n("./src/chat/constants/sidebar.ts").a.SubredditChannels;var Je=(e=qe,t)=>{switch(t.type){case Ve.b:return t.payload.activeIndex;default:return e}};const Ze={};var Qe=(e=Ze,t)=>{switch(t.type){case Ve.a:{var n=t.payload;const a=n.channelId,s=n.tabIndex;return Object.assign({},e,{[s]:a})}default:return e}},Ye=Object(a.c)({activeIndex:Je,lastChannelIdPerTab:Qe}),Xe=n("./src/chat/actions/sitewideRules.ts");const $e=[];var et=(e=$e,t)=>{switch(t.type){case Xe.a:return t.payload;default:return e}},tt=n("./node_modules/lodash/isEmpty.js"),nt=n.n(tt),at=n("./node_modules/lodash/keyBy.js"),st=n.n(at),ct=n("./src/chat/models/Channel/subreddit.ts");const rt={};var ot=(e=rt,t)=>{switch(t.type){case I.d:return Object.assign({},e,t.payload);case s.b:case s.a:{const n=t.payload.channels,a=Object(l.c)(n,[i.a.Subreddit]);if(nt()(a))return e;const s=be()(a).map(e=>{const t=e&&Object(ct.d)(e.data);if(t&&t.subreddit)return t.subreddit});return Object.assign({},e,st()(s,"id"))}default:return e}},it=Object(a.c)({models:ot}),lt=n("./src/chat/reducers/subscribe.ts"),dt=n("./src/chat/actions/theme.ts"),ut=n("./src/chat/constants/theme.ts"),ht=n("./src/chat/models/Theme/index.ts");const mt={current:ht.a[ut.a],cached:{}};var bt=(e=mt,t)=>{switch(t.type){case dt.THEME_CHANGED:return e.current=ht.a[t.payload.themeKey],Object.assign({},e);default:return e}},pt=n("./src/chat/actions/toast.ts");var gt=(e=null,t)=>{switch(t.type){case pt.a:return null;case pt.b:return t.payload.toast;default:return e}},Ot=n("./src/chat/actions/platform.ts"),jt=n("./src/chat/actions/tooltip.ts");var ft=(e=null,t)=>{switch(t.type){case jt.a:{const n=t.payload.tooltipId;return e===n?null:n}case jt.b:case Ot.a:return null;default:return e}},Ct=n("./src/chat/actions/typingIndicator.ts");const Et={usernames:[]};var _t=(e=Et,t)=>{switch(t.type){case Ct.a:{const n=t.payload.usernames;return function(e,t){return e===t||(0===e.length&&0===t.length||!(0===e.length&&t.length>0)&&(!(e.length>0&&0===t.length)&&(1===e.length&&1===t.length?e[0]===t[0]:2===e.length&&2===t.length?e[0]===t[0]&&e[1]===t[1]:3===e.length&&3===t.length?e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]:xe()(e,t))))}(n,e.usernames)?e:{usernames:n}}case s.p:return{usernames:[]};default:return e}},It=n("./src/chat/actions/promo/index.ts"),vt=n("./src/lib/reducers/addAuthentication/index.ts");var yt=Object(vt.a)((e,t)=>{switch(void 0===e&&(e=null),t.type){case G.a:{const e=t.payload.profileImg||t.payload.subreddit&&t.payload.subreddit.icon_img||t.payload.iconImg;return{id:t.payload.id,name:t.payload.name,profileImg:e,features:t.payload.features,prefNightmode:t.payload.prefNightmode,inChat:t.payload.inChat,lastInteraction:t.payload.lastInteraction,created:t.payload.created,linkKarma:t.payload.linkKarma,commentKarma:t.payload.commentKarma,isNSFW:t.payload.isNSFW,seenSubredditChatFtux:t.payload.seenSubredditChatFtux}}case It.b:return e?Object.assign({},e,{seenSubredditChatFtux:!0}):null;default:return e}},null);const xt={userSubredditChatEnabled:!1};var St=(e=xt,t)=>{switch(t.type){case q.f:case Ae.a:{const n=(t.payload||xt).userSubredditChatEnabled;return Object.assign({},e,t.payload,{userSubredditChatEnabled:e.userSubredditChatEnabled||n})}}return e};const Nt={};var wt=(e=Nt,t)=>{switch(t.type){case G.d:return t.payload;default:return e}};const kt=de.y;var Tt=Object(vt.a)((e=kt,t)=>(t.type,e),kt);const Mt={blob:"",loid:"",loidCreated:"",version:-1};var Dt=(e=Mt,t)=>{switch(t.type){case G.e:return t.payload;default:return e}};const At={globalTheme:ut.a};var Lt=(e=At,t)=>{switch(t.type){case dt.THEME_CHANGED:{const n=t.payload.themeKey;return Object.assign({},e,{globalTheme:n})}default:return e}};var Ut=(e="",t)=>{switch(t.type){case G.f:return t.payload;default:return e}},Bt=n("./src/chat/actions/session.ts");var Rt=(e=null,t)=>{switch(t.type){case Bt.a:case Bt.c:return t.payload;case Bt.b:return null;default:return e}};var Pt=(e="",t)=>{switch(t.type){case G.g:return t.payload;default:return e}},Ht=Object(a.c)({account:yt,chatExperiments:St,experiments:wt,language:Tt,loid:Dt,prefs:Lt,reddaid:Ut,session:Rt,sessionTracker:Pt});t.a=Object(a.c)({channels:K,contacts:se,container:ie,emojis:he,members:fe,messages:ke,meta:Te.b,platform:Me.b,promos:De.b,sendbird:We,sidebarTabs:Ye,sitewideRules:et,subreddits:it,themes:bt,toast:gt,tooltipId:ft,typingIndicator:_t,user:Ht,actionListener:lt.a})},"./src/chat/reducers/meta/index.ts":function(e,t,n){"use strict";var a=n("./src/lib/makeActionCreator/index.ts");Object(a.a)("META__META_RECEIVED");n.d(t,"a",function(){return s});const s={country:"",domain:"",isBot:!1,isRedesign:!1,isSessionSeo:!1,method:"",protocol:"",sessionReferrerDomain:"",userAgent:""};t.b=((e=s,t)=>{switch(t.type){case"META__META_RECEIVED":return t.payload;default:return e}})},"./src/chat/reducers/platform/index.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n("./node_modules/history/index.js"),s=n("./src/chat/actions/platform.ts"),c=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(a=Object.getOwnPropertySymbols(e);s<a.length;s++)t.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(n[a[s]]=e[a[s]])}return n};const r={currentPage:null,referrers:{},metas:{}};t.b=((e=r,t)=>{switch(t.type){case s.a:{if(!t.payload)return e;const n=e.currentPage,s=t.payload,r=s.routeMatch,o=s.location,i=o.key,l=Object(a.createPath)(o),d=r?((e,t,n,a)=>{const s=n.route,r=(s.action,c(s,["action"]));return{key:e,locationState:a.state,meta:n.route.meta,queryParams:n.match.queryParams,routeMatch:Object.assign({},n,{route:r}),status:200,url:t,urlParams:n.match.params}})(i,l,r,o):((e,t)=>({key:e,locationState:{},queryParams:{},routeMatch:null,status:404,url:t,urlParams:{}}))(i,l);let u=e.referrers;if("PUSH"===s.action){const e=n&&n.url||"";u=Object.assign({},u,{[i]:e})}return Object.assign({},e,{referrers:u,currentPage:d})}case s.c:{if(!t.payload)return e;var n=t.payload;const a=n.key,s=n.title,c=n.description,r=n.icon,o=n.type;return Object.assign({},e,{metas:Object.assign({},e.metas,{[a]:{description:c,icon:r,title:s,type:o}})})}case s.b:return t.payload,e;default:return e}})},"./src/chat/reducers/promos/index.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return s});var a=n("./src/chat/actions/promo/constants.ts");const s={displayNSFWWarning:!1,displaySubredditChatFtux:!1};t.b=((e=s,t)=>{switch(t.type){case a.a:{const n=t.payload;return Object.assign({},e,{[n]:!0})}case a.b:{const n=t.payload;return Object.assign({},e,{[n]:!1})}default:return e}})},"./src/chat/routes/chat.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a,s=n("./src/lib/constants/index.ts"),c=n("./src/chat/actions/page.ts");!function(e){e.Message="message",e.User="user"}(a||(a={}));const r={action:c.b,chunk:s.o.CHAT,exact:!0,meta:{name:s.zb.CHAT},path:"/chat/"},o={action:c.b,chunk:s.o.CHAT_EMPTY,exact:!0,meta:{name:s.zb.CHAT_EMPTY},path:"/chat/empty/"},i={action:c.c,chunk:s.o.CHAT_MINIMIZE,exact:!0,meta:{name:s.zb.CHAT_MINIMIZE},path:"/chat/minimize/"},l=["/chat/","/chat/channel/:action(create)/","/chat/channel/:channelId/:action(block|decline|delete|invite|invited|kick|members|leave|nsfw|report)?/:attr(message|user)?/:attrId?","/chat/r/:subredditName/channel/:channelId/:action(ban|block|decline|delete|deny|invite|invited|join|kick|leave|lock_confirmation|members|private|report)?/:attr(message|user)?/:attrId?"].map(e=>({action:c.a,chunk:s.o.CHAT,exact:!0,meta:{name:s.zb.CHAT},path:e})),d=["/chat/user_id/:userIds/"].map(e=>({action:c.d,chunk:s.o.CHAT,exact:!0,meta:{name:s.zb.CHAT},path:e}));t.b=[r,o,i,...l,...d]},"./src/chat/routes/index.ts":function(e,t,n){"use strict";var a=n("./src/lib/constants/index.ts");var s={action:n("./src/chat/actions/page.ts").b,chunk:a.o.CHAT,exact:!0,meta:{name:a.zb.CHAT},path:"/chat/*"};const c=[...n("./src/chat/routes/chat.ts").b,s];t.a=c},"./src/chat/selectors/app.ts":function(e,t,n){"use strict";n.d(t,"e",function(){return o}),n.d(t,"c",function(){return i}),n.d(t,"f",function(){return l}),n.d(t,"d",function(){return d}),n.d(t,"b",function(){return u}),n.d(t,"a",function(){return h});var a=n("./node_modules/lodash/isEmpty.js"),s=n.n(a),c=n("./src/chat/constants/container.ts"),r=n("./src/chat/strings/index.ts");const o=e=>e.container.size===c.a.HIDDEN,i=e=>e.container.size===c.a.EMBED||e.container.size===c.a.FULL,l=e=>!(!(e.user.account&&e.sendbird.session.active&&e.sendbird.sdk.initialized&&e.channels.firstLoaded)||u(e)),d=e=>window.parent!==window||!!(e&&e.meta&&e.meta.isRedesign),u=e=>{if(!e.user.account)return Object(r.a)("en","app.error.signIn")},h=e=>!s()(e.user.experiments)},"./src/chat/selectors/channels/next.tsx":function(e,t,n){"use strict";n.d(t,"d",function(){return i}),n.d(t,"f",function(){return l}),n.d(t,"g",function(){return d}),n.d(t,"c",function(){return h}),n.d(t,"e",function(){return m}),n.d(t,"a",function(){return g}),n.d(t,"b",function(){return O});var a=n("./src/chat/constants/channels.ts"),s=n("./src/chat/constants/sidebar.ts"),c=n("./src/chat/selectors/channels.ts"),r=n("./src/chat/selectors/experiments.ts"),o=n("./src/chat/selectors/subreddit.ts");const i=e=>{const t=e.channels.subreddit.invited.sortedKeys[0],n=Object(o.b)(e,t);return{channelId:t,subredditName:n&&n.name,channelAction:a.a.VIEW_INVITE}},l=e=>{const t=e.channels.subreddit.joined.sortedKeys,n=Object.keys(t),a=!n.length?void 0:n[0];return{channelId:a&&t[a][0],subredditName:a}},d=e=>{const t=e.channels.subreddit.recommended.sortedKeys[0],n=Object(o.b)(e,t);return{channelId:t,subredditName:n&&n.name,channelAction:a.a.VIEW_JOIN}},u=e=>[i(e),l(e),d(e)],h=e=>{return{channelId:e.channels.invited.sortedKeys[0],channelAction:a.a.VIEW_INVITE}},m=e=>{return{channelId:e.channels.joined.sortedKeys[0]}},b=e=>[h(e),m(e)],p=e=>e.find(e=>!!e.channelId),g=(e,t)=>{const n=t===s.a.SubredditChannels?u(e):b(e),a=p(n);return a&&a.channelId},O=(e,t)=>{const n=Object(r.b)(e),a=[...t?[(e=>{const t=Object(c.k)(e);return{channelId:t&&t.channelId}})(e)]:[],...n?u(e):[],...b(e)];return p(a)}},"./src/chat/selectors/contacts.ts":function(e,t,n){"use strict";n.d(t,"i",function(){return r}),n.d(t,"j",function(){return o}),n.d(t,"b",function(){return i}),n.d(t,"c",function(){return l}),n.d(t,"a",function(){return u}),n.d(t,"e",function(){return h}),n.d(t,"h",function(){return m}),n.d(t,"k",function(){return b}),n.d(t,"l",function(){return p}),n.d(t,"f",function(){return g}),n.d(t,"g",function(){return O}),n.d(t,"d",function(){return j});var a=n("./node_modules/lodash/values.js"),s=n.n(a),c=n("./src/chat/selectors/members.ts");const r=e=>e.contacts.suggestedKeys.map(t=>e.contacts.models[t]),o=e=>{var t=e.contacts;const n=t.knownContacts,a=t.models;return Object.keys(n).map(e=>n[e]).filter(e=>e&&e.loaded&&e.valid).map(e=>e.userId&&a[e.userId]).filter(e=>!!e)},i=(e,t)=>{return s()(e.contacts.models).find(e=>e.id===t)},l=(e,t)=>{return s()(e.contacts.models).find(e=>e.name.toLowerCase()===t.toLowerCase())},d=(e,t)=>e.contacts.knownContacts[t.toLowerCase()],u=(e,t)=>{const n=d(e,t);return n&&n.method},h=(e,t)=>{if(t&&t.inviter)return e.contacts.models[t.inviter.id]},m=e=>e.contacts.knownContacts,b=e=>e.contacts.selectedUserIds,p=e=>b(e).length,g=e=>{const t=e.contacts.selectedUserIds;return t.length&&t.map(t=>{const n=i(e,t);return n&&n.id})},O=(e,t)=>{const n=l(e,t);if(n)return{name:t,id:n.id};const a=d(e,t);if(a&&a.userId)return{name:t,id:a.userId};const s=Object(c.c)(e,t);return s?{name:t,id:s.id}:void 0},j=e=>e.contacts.models},"./src/chat/selectors/experiments.ts":function(e,t,n){"use strict";var a;!function(e){e.SubredditChat="chat_subreddit",e.SubredditChatNotifcationFtux="chat_subreddit_notification_ftux"}(a||(a={})),n.d(t,"b",function(){return s}),n.d(t,"a",function(){return c});const s=e=>!!e.user.experiments[a.SubredditChat]||!!e.user.chatExperiments.userSubredditChatEnabled,c=e=>!!e.user.experiments[a.SubredditChatNotifcationFtux]},"./src/chat/selectors/members.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"d",function(){return i}),n.d(t,"b",function(){return l}),n.d(t,"e",function(){return d}),n.d(t,"f",function(){return m}),n.d(t,"c",function(){return b});var a=n("./node_modules/lodash/sortBy.js"),s=n.n(a),c=n("./src/chat/selectors/channels.ts");const r=e=>{const t=Object(c.x)(e);if(t)return e.members[t]},o=e=>{const t=r(e);if(t)return t.fetchingMembers},i=e=>{const t=r(e);if(t)return t.hasMoreMembers},l=(e,t)=>{if(t&&e.members[t]){const n=e.members[t];if(n.model){const t=n.model.map(t=>u(t,e.contacts.models));return h(t)}}},d=(e,t)=>{const n=t[e.id];return{id:e.id,name:e.name,isBlockedByMe:n&&void 0!==n.isBlocked?n.isBlocked:e.isBlocked||!1,isOnline:!1,isNSFW:!(!n||void 0===n.isNSFW)&&n.isNSFW,lastSeenAt:"",profileUrl:e.profileImg||n&&n.profileImg||"",state:""}},u=(e,t)=>{const n=t[e.id];return n?{id:e.id,name:e.name,isBlockedByMe:void 0!==n.isBlocked?n.isBlocked:e.isBlockedByMe,isOnline:e.isOnline,isNSFW:void 0!==n.isNSFW&&n.isNSFW,lastSeenAt:e.lastSeenAt,profileUrl:e.profileUrl,state:e.state}:e},h=e=>{if(!e)return[];const t=[],n=[],a=[],c=[];e.forEach(e=>{e.isNSFW&&e.isBlockedByMe?n.push(e):e.isNSFW?a.push(e):e.isBlockedByMe?t.push(e):c.push(e)});const r=e=>e.name&&e.name.toLowerCase();return[...s()(t,r),...s()(n,r),...s()(a,r),...s()(c,r)]},m=e=>{const t=r(e);if(t)return t.model},b=(e,t)=>{const n=r(e);return n&&n.model&&n.model.find(e=>e.name===t)}},"./src/chat/selectors/platform.ts":function(e,t,n){"use strict";n.d(t,"d",function(){return s}),n.d(t,"c",function(){return c}),n.d(t,"e",function(){return r}),n.d(t,"a",function(){return o}),n.d(t,"f",function(){return i}),n.d(t,"b",function(){return l}),n.d(t,"g",function(){return d});var a=n("./src/chat/constants/sidebar.ts");const s=e=>e.platform&&e.platform.currentPage&&e.platform.currentPage.urlParams.channelId,c=e=>e.platform&&e.platform.currentPage&&e.platform.currentPage.urlParams.action,r=e=>e.platform&&e.platform.currentPage&&e.platform.currentPage.urlParams.subredditName||void 0,o=e=>e.platform&&e.platform.currentPage&&e.platform.currentPage.meta&&e.platform.currentPage.meta.name,i=e=>{return!!r(e)?a.a.SubredditChannels:a.a.DirectChannels},l=e=>e.platform.currentPage&&e.platform.currentPage.queryParams,d=e=>!(!s(e)||c(e))},"./src/chat/selectors/sendbird.ts":function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"d",function(){return s}),n.d(t,"a",function(){return c}),n.d(t,"c",function(){return r}),n.d(t,"e",function(){return o});const a=e=>e.sendbird.sdk.connectionStatus,s=e=>e.sendbird.sdk.initialized,c=e=>e.sendbird.proxy.host,r=e=>e.sendbird.session,o=e=>e.sendbird.session.active},"./src/chat/selectors/sidebar.ts":function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"a",function(){return c});var a=n("./src/chat/constants/sidebar.ts");const s=e=>e.sidebarTabs.activeIndex===a.a.SubredditChannels,c=e=>e.sidebarTabs.activeIndex},"./src/chat/selectors/subreddit.ts":function(e,t,n){"use strict";n.d(t,"d",function(){return l}),n.d(t,"c",function(){return d}),n.d(t,"b",function(){return u}),n.d(t,"a",function(){return h});var a=n("./node_modules/lodash/isEmpty.js"),s=n.n(a),c=n("./node_modules/lodash/map.js"),r=n.n(c),o=n("./src/chat/models/Channel/index.ts"),i=n("./src/chat/selectors/channels.ts");const l=e=>e.subreddits&&e.subreddits.models,d=(e,t)=>{const n=l(e);return n&&n[t]},u=(e,t)=>{const n=t?Object(i.h)(e,t):Object(i.w)(e);if(n&&n.type===o.a.Subreddit){const t=n.customData;return d(e,t.subredditId)}},h=e=>{const t=e.subreddits.models,n=e.channels.models,a=e.channels.subreddit.joined.sortedKeys;if(!s()(a))return r()(a,e=>{const a=e[0],s=n[a].customData.subredditId;return{name:t[s].name,keyColor:t[s].keyColor,iconImg:t[s].iconImg,sortedChannels:(e=>r()(e,e=>n[e]))(e)}})}},"./src/chat/selectors/telemetry.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"d",function(){return l}),n.d(t,"e",function(){return d}),n.d(t,"b",function(){return u}),n.d(t,"c",function(){return h});var a=n("./node_modules/js-cookie/src/js.cookie.js"),s=n.n(a),c=n("./node_modules/url/url.js"),r=n.n(c),o=n("./src/chat/selectors/app.ts");const i=e=>({pageType:Object(o.d)(e)?"chat":"chat_fullscreen"}),l=e=>{const t=s.a.get("session_tracker");return{id:t?t.split(".")[0]:""}},d=e=>({id:e.user.account?e.user.account.id:"accessed_chat_without_login",isLoggedIn:!!e.user.account}),u=e=>{const t=e.platform.currentPage?e.platform.referrers[e.platform.currentPage.key]:void 0;if(t){return{domain:r.a.parse(t).hostname,url:t}}},h=e=>({})},"./src/chat/singleton/SendbirdSDK.ts":function(e,t,n){"use strict";var a=n("./src/config.ts"),s=n("./node_modules/lodash/noop.js"),c=n.n(s),r=n("./node_modules/sendbird/SendBird.min.js"),o=n.n(r),i=n("./node_modules/timers-browserify/main.js"),l=n("./src/lib/constants/index.ts"),d=n("./src/chat/actions/channel.ts"),u=n("./node_modules/react-router-redux/es/index.js"),h=n("./src/chat/constants/channels.ts"),m=n("./src/chat/helpers/urls/index.ts"),b=n("./src/chat/selectors/channels.ts"),p=n("./src/chat/selectors/subreddit.ts");const g=e=>async(t,n)=>{const a=n(),s=Object(b.w)(a),c=Object(p.b)(a,e),r=c&&c.name.toLowerCase();r&&(t(Object(d.M)({channelId:e,subredditName:r})),s&&s.channelId===e&&t(Object(u.b)(Object(m.channelAction)(e,h.a.DENY,r))))};var O=n("./src/chat/actions/channel/subreddit.ts"),j=n("./src/chat/actions/message/index.ts"),f=n("./src/chat/actions/sendbird/index.ts"),C=n("./src/chat/actions/sendbird/sdk.ts"),E=n("./src/chat/actions/toast.ts"),_=n("./src/chat/actions/typingIndicator.ts"),I=n("./src/chat/constants/batchSizes.ts"),v=n("./src/chat/constants/messages.ts"),y=n("./src/chat/constants/sendbird.ts"),x=n("./src/chat/constants/toast.ts"),S=n("./src/chat/helpers/errors.ts"),N=n("./src/chat/models/Channel/index.ts"),w=n("./src/chat/models/Channel/platform.ts"),k=n("./src/chat/models/Channel/subreddit.ts"),T=n("./src/chat/models/Channel/utils/index.ts"),M=n("./src/chat/models/Channel/utils/removeSendbirdPrefix.ts"),D=n("./src/chat/models/Message/index.ts"),A=n("./src/chat/models/User/member.ts");n.d(t,"a",function(){return U}),n.d(t,"c",function(){return B});const L=a.a.sendbirdAppId;var U;!function(e){e.VIEW_PRIVATE="view_private",e.KICKED="kicked",e.BANNED="banned"}(U||(U={}));const B=new class{constructor(){this.dispatch=c.a,this.channels={},this.channelUniqueHandlerID=[],this.connectionUniqueHandlerID=[],this.switchChannel=((e,t)=>{if(this.channel=e,t)return Promise.resolve([]);{this.subredditChannelMembersQuery=this.channel.createMemberListQuery(),this.memberListQuery=this.channel.createMemberListQuery(),this.createPreviousMessageListQuery();const e=this.getPreviousMessages(v.c.USER);return Promise.all([e])}}),(this.self=new o.a({appId:L})).Options.typingIndicatorThrottle=1e4}connect(e,t,n,a){return new Promise(s=>{this.dispatch=a,this.self.connect(n,t,`https://${e}`,`wss://${e}`,(e,t)=>{this.toggleUpdateListeners(!0),s({data:e,error:t})})})}isConnected(){return!!this.self.currentUser}disconnect(){return new Promise(e=>{this.isConnected()&&(this.toggleUpdateListeners(!1),this.self.disconnect(()=>e()))})}toggleUpdateListeners(e){e?(this.onChannelChanged(),this.onChannelDeleted(),this.onChannelMuted(),this.onChannelUnmuted(),this.onChannelLocked(),this.onChannelUnlocked(),this.onReceiveInvite(),this.onReceiveMessage(),this.onUpdateMessage(),this.onDeleteMessage(),this.onUserActions(),this.onUserKicked(),this.onTypingStatusUpdated(),this.onReconnectStarted(),this.onReconnectSucceeded(),this.onReconnectFailed()):(this.channelUniqueHandlerID.length&&this.channelUniqueHandlerID.forEach(e=>{this.self.removeChannelHandler(e)}),this.connectionUniqueHandlerID.length&&this.channelUniqueHandlerID.forEach(e=>{this.self.removeConnectionHandler(e)}))}reconnect(){this.dispatch(Object(E.e)({toast:x.a.ConnectionPending})),this.dispatch(Object(f.m)())}onReconnectStarted(){const e=new this.self.ConnectionHandler,t={connectionStatus:y.b.Pending},n={toast:x.a.ConnectionPending};e.onReconnectStarted=(()=>{this.dispatch(Object(C.h)(t)),this.dispatch(Object(E.e)(n))}),this.self.addConnectionHandler("CONNECTION_CHANGE",e),this.connectionUniqueHandlerID.push("CONNECTION_CHANGE")}onReconnectSucceeded(){const e=new this.self.ConnectionHandler,t={connectionStatus:y.b.Open};e.onReconnectSucceeded=(()=>{this.dispatch(Object(C.h)(t)),this.dispatch(Object(E.e)({toast:x.a.ConnectionOpen})),Object(i.setTimeout)(()=>this.dispatch(Object(E.d)()),3*l.Db),this.dispatch(Object(j.q)(!0)),this.dispatch(Object(d.F)())}),this.self.addConnectionHandler("RECONNECT_SUCCEEDED",e),this.connectionUniqueHandlerID.push("RECONNECT_SUCCEEDED")}onReconnectFailed(){const e=new this.self.ConnectionHandler,t={connectionStatus:y.b.Closed};e.onReconnectFailed=(()=>{this.dispatch(Object(C.h)(t)),this.dispatch(Object(E.e)({toast:x.a.ConnectionClosed}))}),this.self.addConnectionHandler("RECONNECT_FAILED",e),this.connectionUniqueHandlerID.push("RECONNECT_FAILED")}onReceiveInvite(){const e=new this.self.ChannelHandler;e.onUserReceivedInvitation=(e=>{const t=Object(N.f)(e);this.dispatch(Object(d.S)(t))}),this.self.addChannelHandler("RECEIVE_CHANNEL_INVITE",e),this.channelUniqueHandlerID.push("RECEIVE_CHANNEL_INVITE")}onReceiveMessage(){const e=new this.self.ChannelHandler;e.onMessageReceived=((e,t)=>{const n=Object(N.f)(e);this.dispatch(Object(d.R)(n));const a=Object(D.b)(t);a&&this.dispatch(Object(j.r)(a))}),this.self.addChannelHandler("RECEIVE_CHANNEL_MESSAGE",e),this.channelUniqueHandlerID.push("RECEIVE_CHANNEL_MESSAGE")}onUpdateMessage(){const e=new this.self.ChannelHandler;e.onMessageUpdated=((e,t)=>{const n=Object(N.f)(e);this.dispatch(Object(d.R)(n));const a=Object(D.b)(t);a&&this.dispatch(Object(j.r)(a))}),this.self.addChannelHandler("UPDATE_CHANNEL_MESSAGE",e),this.channelUniqueHandlerID.push("UPDATE_CHANNEL_MESSAGE")}onDeleteMessage(){const e=new this.self.ChannelHandler;e.onMessageDeleted=((e,t)=>{this.dispatch(Object(j.t)(t))}),this.self.addChannelHandler("DELETE_CHANNEL_MESSAGE",e),this.channelUniqueHandlerID.push("DELETE_CHANNEL_MESSAGE")}onTypingStatusUpdated(){const e=new this.self.ChannelHandler;e.onTypingStatusUpdated=(e=>{const t=Object(M.a)(e.url),n=e.getTypingMembers().map(e=>e.nickname);this.dispatch(Object(_.b)({channelId:t,usernames:n}))}),this.self.addChannelHandler("TYPING_STATUS_UPDATED",e),this.channelUniqueHandlerID.push("TYPING_STATUS_UPDATED")}onUserActions(){let e;!function(e){e.onUserLeft="USER_LEFT_CHANNEL",e.onUserBanned="USER_BANNED_CHANNEL"}(e||(e={})),Object.keys(e).filter(e=>"string"==typeof e).map(t=>{const n=t,a=new this.self.ChannelHandler,s=e[n];a[n]=(e=>{const t=Object(N.f)(e);this.dispatch(Object(d.S)(t,!0))}),this.self.addChannelHandler(s,a),this.channelUniqueHandlerID.push(s)})}onChannelChanged(){const e=new this.self.ChannelHandler;e.onChannelChanged=(e=>{const t=Object(N.f)(e);this.dispatch(Object(d.S)(t))}),this.self.addChannelHandler("ON_CHANNEL_CHANGED",e),this.channelUniqueHandlerID.push("ON_CHANNEL_CHANGED")}onChannelDeleted(){const e=new this.self.ChannelHandler;e.onChannelDeleted=(e=>{const t=Object(M.a)(e);this.dispatch(g(t))}),this.self.addChannelHandler("ON_CHANNEL_DELETED",e),this.channelUniqueHandlerID.push("ON_CHANNEL_DELETED")}onChannelMuted(){const e=new this.self.ChannelHandler;e.onUserMuted=(e=>{const t=Object(N.f)(e);this.dispatch(Object(d.S)(t))}),this.self.addChannelHandler("ON_CHANNEL_MUTED",e),this.channelUniqueHandlerID.push("ON_CHANNEL_MUTED")}onChannelUnmuted(){const e=new this.self.ChannelHandler;e.onUserUnmuted=(e=>{const t=Object(N.f)(e);this.dispatch(Object(d.S)(t))}),this.self.addChannelHandler("ON_CHANNEL_UNMUTED",e),this.channelUniqueHandlerID.push("ON_CHANNEL_UNMUTED")}onChannelLocked(){const e=new this.self.ChannelHandler;e.onChannelFrozen=(e=>{const t=Object(N.f)(e);this.dispatch(Object(d.S)(t))}),this.self.addChannelHandler("ON_CHANNEL_LOCKED",e),this.channelUniqueHandlerID.push("ON_CHANNEL_LOCKED")}onChannelUnlocked(){const e=new this.self.ChannelHandler;e.onChannelUnfrozen=(e=>{const t=Object(N.f)(e);this.dispatch(Object(d.S)(t))}),this.self.addChannelHandler("ON_CHANNEL_UNLOCKED",e),this.channelUniqueHandlerID.push("ON_CHANNEL_UNLOCKED")}mapCodeToError(e){switch(e){case 400750:return U.KICKED;case 400751:return U.BANNED;default:return U.VIEW_PRIVATE}}autoJoinSubredditChannel(e,t){return new Promise((e,n)=>{const a=t.channelSendbirdUrl,s=t.customData;s&&s.subredditId?this.dispatch(Object(O.u)(a,s.subredditId)).then(t=>{t.error?n({error:this.mapCodeToError(t.error.code)}):e(t.body)}).catch(e=>{Object(S.b)("Error: can't join subreddit channel"),n({error:this.mapCodeToError(e.code)})}):e()})}convertPartialToSubredditChannel(e,t){const n=h.b.PARTIAL,a=h.b.INVITED;t===n&&(e.channelState=a,this.dispatch(Object(d.T)({channel:e})))}getChannelByChannelId(e){return new Promise((t,n)=>{const a=Object(T.a)(e);this.self.GroupChannel.getChannel(a,(e,a)=>{a?(Object(S.b)("Error: can't get channel by id"),n(a)):t(e)})})}addChannelModelByChannelId(e){return new Promise((t,n)=>{this.getChannelByChannelId(e).then(e=>{if(!e)return t();const n=Object(N.f)(e);if(!n)return t();if(n.type===N.a.Subreddit){const e=n.customData.subreddit;e&&this.dispatch(Object(O.o)({[e.id]:e}))}this.dispatch(Object(d.T)({channel:n})),t(n)}).catch(e=>{Object(S.b)("Error: can't add channel by id"),n(e)})})}enterChannel(e,t,n){return new Promise(a=>{const s=(e={})=>({data:e});if(!this.isConnected())return a(s());const c=e.channelId,r=this.channels[c];if(r&&!t)return this.switchChannel(r,n).then(([e])=>a(s({messageListData:e}))).catch(()=>a(s()));this.getChannelByChannelId(c).then(r=>{if(!r)return a(s());this.channels[c]=r;const o=Object(N.f)(r);if(this.convertPartialToSubredditChannel(o,e.channelState),t&&o.type===N.a.Subreddit)return this.autoJoinSubredditChannel(r,o).then(e=>{const t=Object(w.a)(e,h.b.JOINED);this.dispatch(Object(d.T)({channel:t})),this.switchChannel(r).then(([e])=>a(s({messageListData:e}))).catch(()=>a(s()))}).catch(e=>a(s(e.error)));this.switchChannel(r,n).then(([e])=>a(s({messageListData:e}))).catch(()=>a(s()))}).catch(()=>a(s()))})}updateChannel({name:e,coverUrl:t,data:n}){return new Promise((a,s)=>{this.channel?this.channel.updateChannel(e,t,n,(e,t)=>e?a():s(t)):s("No channel selected")})}hideChannel(){return new Promise(e=>{this.channel?this.channel.hide(e):e()})}leaveChannel(){return new Promise((e,t)=>{if(this.channel)return this.channel.leave((e,n)=>{n&&t(n)}),e();t("No channel selected")})}acceptChannelInvite(){return new Promise(e=>{this.channel?this.channel.acceptInvitation(e):e()})}declineChannelInvite(){return new Promise((e,t)=>{this.channel?this.channel.declineInvitation((n,a)=>{a?t(a):e(n)}):e()})}lockChannel(){return new Promise((e,t)=>(this.channel&&this.channel.freeze((e,n)=>{n&&t(n)}),e()))}unlockChannel(){return new Promise((e,t)=>(this.channel&&this.channel.unfreeze((e,n)=>{n&&t(n)}),e()))}onUserKicked(){const e=new this.self.ChannelHandler;e.onUserBanned=((e,t)=>{const n=Object(k.b)(e);n&&this.dispatch(Object(O.s)(n,t.userId))}),this.self.addChannelHandler("CHANNEL_USER_KICKED",e),this.channelUniqueHandlerID.push("CHANNEL_USER_KICKED")}kickUserFromChannel(e,t,n){return new Promise((a,s)=>this.channel?(this.channel.banUserWithUserId(e,t,n,(e,t)=>e?a():s(t)),a()):a())}getExistingChannels(e,t){return new Promise((n,a)=>{let s;e===h.b.INVITED&&t===h.f.NonSuper?this.channelListQueryInvited?s=this.channelListQueryInvited:(this.channelListQueryInvited=this.self.GroupChannel.createMyGroupChannelListQuery(),s=this.channelListQueryInvited):e===h.b.JOINED&&t===h.f.NonSuper?this.channelListQueryJoined?s=this.channelListQueryJoined:(this.channelListQueryJoined=this.self.GroupChannel.createMyGroupChannelListQuery(),s=this.channelListQueryJoined):e===h.b.JOINED&&t===h.f.Super?this.channelListQueryJoinedSubreddit?s=this.channelListQueryJoinedSubreddit:(this.channelListQueryJoinedSubreddit=this.self.GroupChannel.createMyGroupChannelListQuery(),s=this.channelListQueryJoinedSubreddit):e===h.b.INVITED&&t===h.f.Super&&(this.channelListQueryInvitedSubreddit?s=this.channelListQueryInvitedSubreddit:(this.channelListQueryInvitedSubreddit=this.self.GroupChannel.createMyGroupChannelListQuery(),s=this.channelListQueryInvitedSubreddit)),s.includeEmpty=!0,s.limit=I.a.Channels,s.memberStateFilter=this.self.GroupChannel.memberState[e],s.superChannelFilter=t,s.hasNext?s.next((e,t)=>{if(t)a(t);else{const t=s.hasNext;n({channels:e,hasMoreChannels:t})}}):n()})}getSubredditChannelMembers(){return new Promise((e,t)=>{this.subredditChannelMembersQuery&&this.subredditChannelMembersQuery.hasNext&&this.subredditChannelMembersQuery.next((n,a)=>{if(!a&&this.subredditChannelMembersQuery){const t=this.subredditChannelMembersQuery.hasNext;e({members:n,hasMoreMembers:t})}else t(a)})})}getChannelMembersStartsWith(e){return new Promise((t,n)=>{if(!this.channel)return n(new Error("this.channel is null or undefined"));this.memberListQuery=this.channel.createMemberListQuery(),this.memberListQuery?(this.memberListQuery.nicknameStartsWithFilter=e,this.memberListQuery.next((e,a)=>{if(a)n(a);else{const n=this.memberListQuery&&this.memberListQuery.hasNext||!1;t({members:e,hasMoreMembers:n})}})):n(Error("this.memberListQuery is null or undefined"))})}searchMemberByName(e,t=!1){return new Promise((n,a)=>{if(!this.channel)return a(new Error("this.channel is null or undefined"));this.memberListQuery=this.channel.createMemberListQuery(),this.memberListQuery?(this.memberListQuery.nicknameStartsWithFilter=e,this.memberListQuery.next((a,s)=>{const c=Object(A.a)(a),r=c.filter(n=>t&&n&&n.name===e||!t&&n);c.length&&this.dispatch(Object(f.i)(c)),n(r)})):a(Error("this.memberListQuery is null or undefined"))})}startTypingIndicator(){this.channel&&this.channel.startTyping()}endTypingIndicator(){this.channel&&this.channel.endTyping()}getPreviousMessages(e,t){return new Promise((n,a)=>{if(this.channel){const s={};t&&this.createPreviousMessageListQuery(),this.messageListQuery?this.messageListQuery.load(I.a.Messages,!0,e,(e,t)=>{if(!t&&this.messageListQuery){e.forEach(e=>{s[e.messageId]=Object(D.b)(e)});const t=this.messageListQuery.hasMore;n({messages:s,hasMore:t})}else a()}):a()}else a()})}addMessage(e,t,n=[]){return new Promise((a,s)=>{if(this.channel){const c=new(0,this.self.UserMessageParams);if(c.data=t,c.message=e,n&&n.length){const e=this.self;c.mentionType=e.BaseMessageParams.MentionType.USERS,c.mentionedUserIds=n}this.channel.sendUserMessage(c,(e,t)=>{t?s():a(Object(D.b)(e))})}})}createPreviousMessageListQuery(){this.channel&&(this.messageListQuery=this.channel.createPreviousMessageListQuery())}deleteMessage(e){return new Promise(t=>{if(this.channel){const n=e;this.channel.deleteMessage(n,(e,n)=>{n||t(e)})}})}getFirstMessage(){return new Promise((e,t)=>{this.channel?this.channel.getNextMessagesByTimestamp(0,!0,1,!0,"","",(t,n)=>{n||e(t)}):t()})}getUnreadCount(){return new Promise((e,t)=>{const n=["super_group_channel_unread_message_count","super_group_channel_invitation_count","super_group_channel_unread_mention_count","non_super_group_channel_unread_message_count","non_super_group_channel_invitation_count"];this.self.GroupChannel.getUnreadItemCount(n,(n,a)=>{if(a)t(a);else{const t=(Number(n.super_group_channel_unread_message_count)||0)+(Number(n.super_group_channel_invitation_count)||0),a=Number(n.super_group_channel_unread_mention_count)||0,s=(Number(n.non_super_group_channel_unread_message_count)||0)+(Number(n.non_super_group_channel_invitation_count)||0);e({unread_count:s,subreddit_unread_count:t,subreddit_mention_count:a})}})})}markChannelAsRead(){return new Promise(e=>{this.channel&&this.channel.markAsRead(),e()})}setMyCountPreference(e){return new Promise(t=>{this.channel&&this.channel.setMyCountPreference(e,()=>t())})}resetChannelMessageListQuery(){return new Promise((e,t)=>{this.channel?(this.messageListQuery=this.channel.createPreviousMessageListQuery(),e()):t("this.channel does not exist")})}};t.b=B},"./src/chat/strings/index.ts":function(e,t,n){"use strict";var a=n("./node_modules/lodash/get.js"),s=n.n(a),c={app:{layout:{header:{title:{en:"Chats"},newChat:{en:"Start a new chat"},popout:{en:"Open chat in new window"},close:{en:"Close chat"},menu:{en:"Menu"},minimize:{en:"Minimize chat"}},contactList:{en:"Contact List"},currentConversation:{en:"Current Conversation"}},chat:{firstTimeUserExp:{label:{en:"New Feature"},title:{en:"Community Chat Rooms"},body:{en:"Some subreddits now have chat rooms. You've got early access - find\n          topics you're interested in and join the conversation!"},button:{en:"Got it"}},actions:{new:{en:"New Chat"},invited:{en:"Let's go"}},list:{new:{en:"Wants to message you"},showMore:{en:"Show more"},collapse:{en:"Collapse"},prefix:{messageOwner:{en:"You:"},sentSnoomoji:{en:"Sent a Snoomoji"},sentPostLink:{en:"Shared a post"},sentTextLink:{en:"Shared a link"}}},ban:{header:{en:"Confirm Ban"},warning:{en:"Are you sure you want to ban <%= user %> from chat?"},userNameFallback:{en:"this user"},details:{en:"They won't be able to send messages in any chatrooms\n        or be invited to private chatrooms."},additionalDetails:{en:"You can also remove all messages they've\n        sent across all rooms or "},banFromSubreddit:{en:"ban from the subreddit."},banFromCommunity:{en:"Also ban from community"},removeAllMessages:{en:"Remove all messages"}},block:{warning:{en:"Are you sure you want to block this user?"},header:{en:"Block"},details:{en:"You will no longer see their comments, posts,\n          and messages. They will not know that you've blocked them.\n          You will no longer get notifications from this user."},apiError:"Something went wrong. Please try again later.",apiSuccess:"User has been successfully blocked."},channels:{addGroupMembers:{en:"You can add %0 more Redditors"},addToGroup:{en:"Add to group"},addToRoom:{en:"Add to room"},chats:{en:"Chats"},createGroup:{en:"Create Group"},groupName:{en:"Group name (required)"},groupMembers:{en:"group members"},maxGroupSize:{en:"Maximum group size reached"},loading:{en:"Loading channels..."},requests:{en:"Requests"},renameGroup:{en:"Rename group"},rooms:{en:"Please check back for rooms soon!"}},privateChannel:{title:{en:"is a private community"},description:{en:"The moderators in this\n          community have set it to private. You must be a\n          moderator or approved user to join this room."}},contactList:{to:{en:"To:"},invalidUser:{en:"User doesn't exist"},potentialsHeader:{en:"Click to add"},existingGroupContact:{en:"already in group"},existingRoomContact:{en:"already in room"},blockedContact:{en:"blocked"}},delete:{warning:{en:"Are you sure you want to delete this message?"},title:{en:"Delete message"},details:{en:"You can't undo this."}},inviteConfirmation:{basicTitle:{en:"Invite users to chat"},roomTitle:{en:"Invite users to room"},basicDetails:{en:"Invited users will have access to the\n          chat history of this conversation."},roomDetails:{en:"Invited users will have access to the chat room."}},nsfwWarning:{title:{en:"NSFW User"},details:{en:"One or more users in this chat are marked as NSFW\n          (not safe for work), which means they tend to post explicit content\n          elsewhere on Reddit. This doesn't necessarily mean that the content\n          of this chat is explicit."}},leave:{title:{en:"Are you sure"},groupSubHeader:{en:"Leave group chat?"},roomSubHeader:{en:"Leave Room?"},groupDetails:{en:"You will be removed from the group and no longer receive new messages.\n          You will not be able to join this group again unless you receive another invite."},roomDetails:{en:"You will be removed from the room and no longer receive new messages."}},lock:{title:{en:"Are you sure"},roomSubHeader:{en:"Lock Room?"},roomDetails:{en:"No one in this room will be able to send messages in while it is locked."},lockerText:{en:"This chat has been locked."}},message:{placeholder:{en:"Enter text here"},failedToSend:{en:"Failed to send"},dropdown:{options:{addToGroup:{en:"Add to group"},addToRoom:{en:"Add to Room"},profile:{en:"View Profile"},block:{en:"Block"},members:{en:"View members"},leave:{en:"Leave group"},leaveRoom:{en:"Leave room"},lockRoom:{en:"Lock room"},unlockRoom:{en:"Unlock room"},renameGroup:{en:"Rename group"},copyLink:{en:"Copy link"},muteChannel:{en:"Disable notification badging"},unmuteChannel:{en:"Enable notification badging"}}},pickers:{snoomoji:{en:"Choose Snoomoji"},snoomojiLoading:{en:"Loading snoomoji..."},userlistLoading:{en:"Loading members..."},memberNotFound:{en:"Member not found!"}},timeStamp:{now:{en:"Now"},today:{en:"Today"},yesterday:{en:"Yesterday"}}},muted:{mutedText:{en:"You are temporarily muted in this room"}},messageList:{loading:{en:"Loading history..."},loadingError:{en:"Something went wrong. Please try again."},members:{en:"Members"}},request:{karma:{en:"karma"},header:{en:"Chat Request"},decline:{title:{en:"Decline invite?"},details:{en:"This chat will be deleted, and this person will not be notified\n            that you've declined their request."}},groupHeader:{en:"Group invite"},redditor:{en:"redditor for"},details:{en:"Accept their request if you'd like to continue the\n          conversation. We won't notify them if you decline."},blocked:{warning:{en:"Heads up: you previously blocked\n            at least one person in this group."},details:{en:"If you join, you'll be able to see any\n            messages they send. They'll remain blocked\n            on the rest of Reddit."},label:{en:"Blocked"}},nsfw:{en:"NSFW"},preview:{en:"Preview of this chat"},defaultTitle:{en:"group"}},emptyState:{info:{en:"All the direct chats that you're in will show up here"},startChatting:{en:"Start chatting"},title:{en:"Start a direct chat"},main:{en:"You can start a new direct chat with the button below or from someone's profile"}},beta:{title:{en:"You're invited. Try out Reddit Chat."},main:{en:"Start a real-time chat with another redditor.\n          We're beta testing this feature, so please share your feedback by chatting u/reddit_chat_feedback."}},members:{dropdown:{options:{ban:{en:"Ban"},block:{en:"Block"},kick:{en:"Kick"},report:{en:"Report"}}},loading:{en:"Loading members..."}},typingIndicator:{oneUser:{en:"<%= user %> is typing..."},twoUsers:{en:"<%= firstUser %> and <%= secondUser %> are typing..."},severalUsers:{en:"Several people are typing..."},directChannelUser:{en:"is typing..."}},report:{blockUser:{en:"Block this user"},loading:{en:"Loading reasons..."},spamItem:{en:"It's spam or abuse"},selectRulePlaceholder:{en:"Select a rule"},reasonHeader:{en:"We're sorry something's wrong. How can we help?"},blockFlow:{header:{en:"Thanks for letting us know!"},description:{en:"We've received your report. Here are some things you can do:"},block:{en:"Block u/<%= username %>"},blocked:{en:"u/<%= username %> is blocked"},pending:{en:"Pending..."},warning:{en:"You won't see posts or comments from u/<%= username %>. You can change this later in your preference."}},reasons:{threats:{en:"Threatens, harrasses, or bullies"},violence:{en:"It threatens violence or physical harm"},personal:{en:"It's personal and confidential information"},impersonation:{en:"Impersonation"},minorSexualization:{en:"It's sexual or suggestive content involving minors"}},title:{en:"Reason for report"}},reportedMessage:{action:{report:{en:'Reported for "<%= reason %>"'},delete:{en:"Deleted by u/<%= username %>"},approve:{en:"Approved by u/<%= username %>"}},button:{delete:{en:"Delete Message"},ignore:{en:"Ignore Report"}}},kick:{title:{en:"Confirm Kick"},duration:{tenMinutes:{en:"10 minutes"},oneHour:{en:"1 hour"},oneDay:{en:"1 day"},threeDays:{en:"3 days"}},headerText:{en:"Are you sure you want to kick <%= user %> from this room?"},headerSubText:{en:"They'll be able to join again once the kick duration is over."},durationHeader:{en:"Kick Duration"}},intro:{en:"This is the start of a beautiful thing. Say something nice, or share a cat fact."},user:{snoovatar:{en:"Snoovatar"}},subredditChannel:{joinedRooms:{en:"Joined Rooms"},blankState:{en:"Community chatrooms that you join will show up here."},recommendedHeader:{title:{en:"Recommended Rooms"},subText:{en:"Also check out"}},inviteHeader:{en:"Invites"},members:{en:"Members"},joinHeader:{en:"Room Details"},joinDesc:{en:"Description"},nsfwHeader:{en:"NSFW community"},nsfwDesc:{en:"It may contain explicit or adult content."},nsfwWarning:{en:"Heads up: this community is labeled not safe for work. "},removedUserExperience:{default:{title:{en:"Removed"},header:{en:"You have been removed from this room."},description:{en:"You have been removed from this room."}},banned:{title:{en:"Banned"},header:{en:"You are banned from this room."},description:{en:"You are banned from this room and may not join until you are unbanned."}},kicked:{title:{en:"Kicked"},header:{en:"You are temporarily kicked from this room."},description:{en:"You are temporarily kicked from this room and may not join until you are no longer kicked."}}}},toast:{connectionClosed:{en:"Hmm, no internet?"},connectionPending:{en:"Looking for the internet..."},connectionOpen:{en:"Found the internet!"}}},button:{accept:{en:"Accept"},ban:{en:"Confirm Ban"},block:{en:"Block"},cancel:{en:"Cancel"},chat:{en:"Chat"},close:{en:"Close"},decline:{en:"Decline"},delete:{en:"Delete"},directs:{en:"Directs"},done:{en:"Done"},init:{en:"Start a chat"},joinRoom:{en:"Join Room"},kick:{en:"Kick"},leave:{en:"Leave"},lock:{en:"Lock"},resend:{en:"Resend"},rooms:{en:"Rooms"},submit:{en:"Submit"},save:{en:"Save"}},error:{genericPage:{en:"Sorry, something went wrong."},signIn:{en:"Sign in, please."}}}};function r(e,t){const n=[t,e].join(".");return s()(c,n,"")}n.d(t,"a",function(){return r})},"./src/chat/tracking/events/chatPreview.ts":function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return l});var a=n("./src/telemetry/models/Event.ts"),s=n("./src/chat/tracking/fields/chat.ts"),c=n("./src/chat/tracking/fields/common.ts"),r=n("./src/chat/tracking/fields/subreddit.ts"),o=n("./src/chat/tracking/sendEvent.ts");const i=e=>{Object(o.a)(Object.assign({noun:"preview",source:a.b.ChatPreview,action:a.a.View,chat:Object.assign({},Object(s.g)(e),Object(s.A)(e),Object(s.p)(e),Object(s.s)(e)),subreddit:Object.assign({},Object(r.a)(e),Object(r.b)(e))},Object(c.a)(e)))},l=e=>{Object(o.a)(Object.assign({noun:"join",source:a.b.ChatPreview,action:a.a.Click,chat:Object.assign({},Object(s.g)(e),Object(s.A)(e),Object(s.p)(e),Object(s.s)(e)),subreddit:Object.assign({},Object(r.a)(e),Object(r.b)(e))},Object(c.a)(e)))}},"./src/chat/tracking/events/chatSettings.ts":function(e,t,n){"use strict";n.d(t,"f",function(){return i}),n.d(t,"c",function(){return l}),n.d(t,"b",function(){return d}),n.d(t,"d",function(){return u}),n.d(t,"a",function(){return h}),n.d(t,"e",function(){return m});var a=n("./src/telemetry/models/Event.ts"),s=n("./src/chat/tracking/fields/chat.ts"),c=n("./src/chat/tracking/fields/common.ts"),r=n("./src/chat/tracking/fields/subreddit.ts"),o=n("./src/chat/tracking/sendEvent.ts");const i=e=>Object(o.a)(Object.assign({noun:"chat_settings",source:a.b.ChatSettings,action:a.a.View,chat:Object.assign({},Object(s.A)(e),Object(s.p)(e),Object(s.g)(e)),subreddit:Object.assign({},Object(r.a)(e),Object(r.b)(e))},Object(c.a)(e))),l=(e,t)=>Object(o.a)(Object.assign({noun:"chat_member_block",source:a.b.ChatSettings,action:a.a.Submit,chat:Object.assign({},Object(s.A)(e),Object(s.p)(e),Object(s.g)(e),Object(s.b)(t)),subreddit:Object.assign({},Object(r.a)(e),Object(r.b)(e))},Object(c.a)(e))),d=e=>{Object(o.a)(Object.assign({noun:"view_member",source:a.b.ChatSettings,action:a.a.Click,chat:Object.assign({},Object(s.A)(e),Object(s.p)(e),Object(s.u)(e),Object(s.g)(e))},Object(c.a)(e)))},u=(e,t)=>{Object(o.a)(Object.assign({noun:"chat_member_report",source:a.b.ChatSettings,action:a.a.Submit,chat:Object.assign({},Object(s.A)(e),Object(s.p)(e),Object(s.g)(e),Object(s.w)(t)),subreddit:Object.assign({},Object(r.a)(e),Object(r.b)(e))},Object(c.a)(e)))},h=e=>Object(o.a)(Object.assign({noun:"leave_group",source:a.b.ChatSettings,action:a.a.Click,chat:Object.assign({},Object(s.A)(e),Object(s.p)(e),Object(s.g)(e),Object(s.y)(e)),subreddit:Object.assign({},Object(r.a)(e),Object(r.b)(e))},Object(c.a)(e))),m=(e,t,n)=>Object(o.a)(Object.assign({noun:t?"lock_room":"unlock_room",source:a.b.ChatSettings,action:n?a.a.Click:a.a.View,chat:Object.assign({},Object(s.A)(e),Object(s.p)(e),Object(s.g)(e)),subreddit:Object.assign({},Object(r.a)(e),Object(r.b)(e))},Object(c.a)(e)))},"./src/chat/tracking/events/chatView.ts":function(e,t,n){"use strict";n.d(t,"c",function(){return i}),n.d(t,"a",function(){return l}),n.d(t,"d",function(){return d}),n.d(t,"b",function(){return u}),n.d(t,"e",function(){return h});var a=n("./src/telemetry/models/Event.ts"),s=n("./src/chat/tracking/fields/chat.ts"),c=n("./src/chat/tracking/fields/common.ts"),r=n("./src/chat/tracking/fields/subreddit.ts"),o=n("./src/chat/tracking/sendEvent.ts");const i=e=>Object(o.a)(Object.assign({noun:"chat",source:a.b.ChatView,action:a.a.View,chat:Object.assign({},Object(s.A)(e),Object(s.p)(e),Object(s.g)(e),Object(s.s)(e),Object(s.l)(e),Object(s.y)(e)),subreddit:Object.assign({},Object(r.a)(e),Object(r.b)(e))},Object(c.a)(e))),l=(e,t)=>{Object(o.a)(Object.assign({noun:"chat_message",source:a.b.ChatView,action:a.a.Submit,chat:Object.assign({},Object(s.A)(e),Object(s.p)(e),Object(s.g)(e),Object(s.s)(e,0),Object(s.n)(e,t),Object(s.x)(e,t),Object(s.y)(e)),subreddit:Object.assign({},Object(r.a)(e),Object(r.b)(e))},Object(c.a)(e)))},d=(e,t)=>{Object(o.a)(Object.assign({noun:"chat_message_failed",source:a.b.ChatView,action:a.a.View,chat:Object.assign({},Object(s.A)(e),Object(s.p)(e),Object(s.g)(e),Object(s.s)(e,0),Object(s.t)(e,t),Object(s.x)(e),Object(s.y)(e)),subreddit:Object.assign({},Object(r.a)(e),Object(r.b)(e))},Object(c.a)(e)))},u=(e,t,n)=>{Object(o.a)(Object.assign({noun:"report_message",source:a.b.ChatView,action:a.a.Submit,chat:Object.assign({},Object(s.A)(e),Object(s.p)(e),Object(s.g)(e),Object(s.s)(e,0),Object(s.m)(t),Object(s.n)(e,t),Object(s.v)(n),Object(s.x)(e,t),Object(s.y)(e)),subreddit:Object.assign({},Object(r.a)(e),Object(r.b)(e))},Object(c.a)(e)))},h=e=>{Object(o.a)(Object.assign({noun:"history",source:a.b.ChatView,action:a.a.View,chat:Object.assign({},Object(s.A)(e),Object(s.p)(e),Object(s.g)(e),Object(s.y)(e)),subreddit:Object.assign({},Object(r.a)(e),Object(r.b)(e))},Object(c.a)(e)))}},"./src/chat/tracking/events/contactsList.ts":function(e,t,n){"use strict";n.d(t,"g",function(){return i}),n.d(t,"c",function(){return l}),n.d(t,"f",function(){return d}),n.d(t,"e",function(){return u}),n.d(t,"d",function(){return h}),n.d(t,"b",function(){return m}),n.d(t,"a",function(){return b});var a=n("./src/chat/tracking/sendEvent.ts"),s=n("./src/telemetry/models/Event.ts"),c=n("./src/chat/tracking/fields/chat.ts"),r=n("./src/chat/tracking/fields/common.ts"),o=n("./src/chat/tracking/fields/subreddit.ts");const i=e=>{Object(a.a)(Object.assign({noun:"contacts",source:s.b.ContactsList,action:s.a.View,chat:Object.assign({},Object(c.c)(e),Object(c.d)(e))},Object(r.a)(e)))},l=(e,t)=>{Object(a.a)(Object.assign({noun:"contact_add",source:s.b.ContactsList,action:s.a.Click,chat:Object.assign({},Object(c.e)(e),Object(c.a)(e,t),Object(c.c)(e),Object(c.g)(e),Object(c.f)(e),Object(c.B)(e,t))},Object(r.a)(e)))},d=e=>{Object(a.a)(Object.assign({noun:"alert_invalid_user",source:s.b.ContactsList,action:s.a.View,chat:Object.assign({},Object(c.A)(e),Object(c.c)(e),Object(c.d)(e),Object(c.g)(e),Object(c.B)(e,"search"),Object(c.f)(e))},Object(r.a)(e)))},u=(e,t)=>{Object(a.a)(Object.assign({noun:"alert_invalid_channel",source:s.b.ContactsList,action:s.a.View,chat:Object.assign({},Object(c.A)(e),Object(c.c)(e),Object(c.d)(e),Object(c.g)(e),Object(c.B)(e,t),Object(c.f)(e))},Object(r.a)(e)))},h=(e,t)=>{Object(a.a)(Object.assign({noun:"create_chat",source:s.b.ContactsList,action:s.a.Click,chat:Object.assign({},Object(c.A)(e,t),Object(c.c)(e),Object(c.d)(e),Object(c.g)(e,t),Object(c.f)(e))},Object(r.a)(e)))},m=e=>{Object(a.a)(Object.assign({noun:"close_contacts",source:s.b.ContactsList,action:s.a.Click,chat:Object.assign({},Object(c.e)(e),Object(c.c)(e),Object(c.d)(e),Object(c.g)(e),Object(c.f)(e))},Object(r.a)(e)))},b=e=>{Object(a.a)(Object.assign({noun:"add_to_chat",source:s.b.ContactsList,action:s.a.Click,chat:Object.assign({},Object(c.A)(e),Object(c.p)(e),Object(c.g)(e),Object(c.d)(e),Object(c.f)(e)),subreddit:Object.assign({},Object(o.a)(e),Object(o.b)(e))},Object(r.a)(e)))}},"./src/chat/tracking/events/invitationInbox.ts":function(e,t,n){"use strict";n.d(t,"f",function(){return i}),n.d(t,"g",function(){return l}),n.d(t,"c",function(){return d}),n.d(t,"d",function(){return u}),n.d(t,"e",function(){return h}),n.d(t,"b",function(){return m}),n.d(t,"a",function(){return b});var a=n("./src/chat/tracking/sendEvent.ts"),s=n("./src/telemetry/models/Event.ts"),c=n("./src/chat/tracking/fields/chat.ts"),r=n("./src/chat/tracking/fields/common.ts"),o=n("./src/chat/tracking/fields/subreddit.ts");const i=e=>Object(a.a)(Object.assign({noun:"inbox",source:s.b.InvitationInbox,action:s.a.View,chat:Object.assign({},Object(c.j)(e,"room"),Object(c.q)(e))},Object(r.a)(e))),l=e=>Object(a.a)(Object.assign({noun:"invitation",source:s.b.InvitationInbox,action:s.a.View,chat:Object.assign({},Object(c.j)(e),Object(c.k)(e),Object(c.h)(e),Object(c.i)(e),Object(c.p)(e)),subreddit:Object.assign({},Object(o.a)(e),Object(o.b)(e))},Object(r.a)(e))),d=e=>Object(a.a)(Object.assign({noun:"invitation_accept",source:s.b.InvitationInbox,action:s.a.Click,chat:Object.assign({},Object(c.j)(e),Object(c.k)(e),Object(c.h)(e),Object(c.i)(e),Object(c.p)(e)),subreddit:Object.assign({},Object(o.a)(e),Object(o.b)(e))},Object(r.a)(e))),u=e=>Object(a.a)(Object.assign({noun:"invitation_decline",source:s.b.InvitationInbox,action:s.a.Click,chat:Object.assign({},Object(c.j)(e),Object(c.k)(e),Object(c.h)(e),Object(c.i)(e),Object(c.p)(e)),subreddit:Object.assign({},Object(o.a)(e),Object(o.b)(e))},Object(r.a)(e))),h=e=>Object(a.a)(Object.assign({noun:"invitation_view_member",source:s.b.InvitationInbox,action:s.a.Click,chat:Object.assign({},Object(c.j)(e),Object(c.k)(e),Object(c.h)(e),Object(c.i)(e),Object(c.p)(e)),subreddit:Object.assign({},Object(o.a)(e),Object(o.b)(e))},Object(r.a)(e))),m=e=>{Object(a.a)(Object.assign({noun:"expand",source:s.b.InvitationInbox,action:s.a.Click},Object(r.a)(e)))},b=e=>{Object(a.a)(Object.assign({noun:"collapse",source:s.b.InvitationInbox,action:s.a.Click},Object(r.a)(e)))}},"./src/chat/tracking/events/messagesInbox.ts":function(e,t,n){"use strict";var a=n("./src/chat/selectors/telemetry.ts"),s=n("./src/chat/selectors/promos.ts");const c=e=>{return{settingValue:Object(s.c)(e)?"ftue_none":"ftue_open"}};var r=n("./src/chat/tracking/fields/chat.ts"),o=n("./src/chat/tracking/fields/common.ts"),i=n("./src/chat/tracking/sendEvent.ts"),l=n("./src/telemetry/models/Event.ts");n.d(t,"e",function(){return d}),n.d(t,"f",function(){return u}),n.d(t,"b",function(){return h}),n.d(t,"a",function(){return m}),n.d(t,"g",function(){return b}),n.d(t,"d",function(){return p}),n.d(t,"c",function(){return g});const d=e=>{Object(i.a)(Object.assign({noun:"inbox",source:l.b.MessageInbox,action:l.a.View,chat:Object.assign({},Object(r.o)(e),Object(r.z)(e),Object(r.q)(e,!1))},Object(o.a)(e)))},u=e=>{Object(i.a)(Object.assign({noun:"rooms_inbox",source:l.b.MessageInbox,action:l.a.View,chat:Object.assign({},Object(r.r)(e),Object(r.q)(e,!0))},Object(o.a)(e)))},h=e=>{Object(i.a)(Object.assign({noun:"create_chat",source:l.b.MessageInbox,action:l.a.Click,chat:Object.assign({},Object(r.o)(e),Object(r.z)(e),Object(r.q)(e))},Object(o.a)(e)))},m=e=>{Object(i.a)(Object.assign({noun:"close_chat",source:l.b.MessageInbox,action:l.a.Click,chat:Object.assign({},Object(r.o)(e),Object(r.q)(e))},Object(o.a)(e),{actionInfo:Object.assign({},c(e),Object(a.a)(e))}))},b=e=>{Object(i.a)(Object.assign({noun:"rooms_tooltip_523",source:l.b.MessageInbox,action:l.a.View,chat:Object.assign({},Object(r.o)(e),Object(r.q)(e))},Object(o.a)(e)))},p=e=>{Object(i.a)(Object.assign({noun:"dismiss_rooms_tooltip_523",source:l.b.MessageInbox,action:l.a.Click,chat:Object.assign({},Object(r.o)(e),Object(r.q)(e))},Object(o.a)(e)))},g=e=>{Object(i.a)(Object.assign({noun:"minimize_chat",source:l.b.MessageInbox,action:l.a.Click,chat:Object.assign({},Object(r.o)(e),Object(r.q)(e))},Object(o.a)(e),{actionInfo:Object.assign({},c(e),Object(a.a)(e))}))}},"./src/chat/tracking/events/platform.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return i});var a=n("./src/chat/tracking/sendEvent.ts"),s=n("./src/telemetry/models/Event.ts"),c=n("./src/chat/tracking/fields/chat.ts"),r=n("./src/chat/tracking/fields/common.ts");const o=(e,t,n,o)=>{Object(a.a)(Object.assign({noun:t||"chat",source:n||s.b.Nav,action:o||s.a.Click,chat:Object.assign({},Object(c.g)(e),Object(c.u)(e),Object(c.p)(e),Object(c.z)(e),Object(c.A)(e))},Object(r.a)(e)))},i=e=>{Object(a.a)(Object.assign({source:s.b.Nav,action:s.a.View,noun:"orangered_06"},Object(r.a)(e)))}},"./src/chat/tracking/fields/chat.ts":function(e,t,n){"use strict";n.d(t,"g",function(){return m}),n.d(t,"A",function(){return b}),n.d(t,"e",function(){return p}),n.d(t,"c",function(){return g}),n.d(t,"E",function(){return O}),n.d(t,"D",function(){return j}),n.d(t,"p",function(){return f}),n.d(t,"x",function(){return C}),n.d(t,"k",function(){return E}),n.d(t,"C",function(){return _}),n.d(t,"z",function(){return I}),n.d(t,"s",function(){return v}),n.d(t,"o",function(){return y}),n.d(t,"r",function(){return x}),n.d(t,"q",function(){return S}),n.d(t,"n",function(){return N}),n.d(t,"t",function(){return w}),n.d(t,"B",function(){return k}),n.d(t,"f",function(){return T}),n.d(t,"h",function(){return M}),n.d(t,"j",function(){return D}),n.d(t,"i",function(){return A}),n.d(t,"b",function(){return L}),n.d(t,"w",function(){return U}),n.d(t,"u",function(){return B}),n.d(t,"a",function(){return R}),n.d(t,"d",function(){return P}),n.d(t,"l",function(){return H}),n.d(t,"y",function(){return F}),n.d(t,"m",function(){return K}),n.d(t,"v",function(){return G});var a,s=n("./node_modules/lodash/difference.js"),c=n.n(s),r=n("./node_modules/lodash/isEmpty.js"),o=n.n(r),i=n("./src/chat/models/Channel/index.ts"),l=n("./src/chat/selectors/channels.ts"),d=n("./src/chat/selectors/contacts.ts"),u=n("./src/chat/selectors/messages.ts");!function(e){e.Direct="direct",e.Group="group",e.SubredditPublic="room_public",e.SubredditPrivate="room_private"}(a||(a={}));const h=(e,t)=>{switch(e){case i.a.Direct:return a.Direct;case i.a.Group:return a.Group;case i.a.Subreddit:return t?a.SubredditPublic:a.SubredditPrivate}},m=(e,t)=>{const n=t?Object(l.h)(e,t):Object(l.k)(e);return n&&{id:n.channelSendbirdUrl}},b=(e,t)=>{const n=t?Object(l.h)(e,t):Object(l.m)(e);if(n){const e=n.type,t=n.isPublic,a=h(e,t);return a&&{type:a}}},p=e=>{return{type:Object(d.l)(e)>1?a.Group:a.Direct}},g=e=>{const t=Object(d.l)(e);return{number_members:t?t+1:0}},O=(e,t)=>{return{type:(t&&t.length)>2?a.Group:a.Direct}},j=(e,t)=>{return{number_members:_(e,t).members.length}},f=e=>{const t=Object(l.m)(e);return{number_members:t&&t.memberCount}},C=(e,t)=>{const n=Object(u.e)(e,t);return{sender_user_id:n&&n.userId||e.user.account.id}},E=e=>{const t=Object(l.k)(e);return{sender_user_id:t&&t.inviter&&t.inviter.id}},_=(e,t)=>(t.push(e.user.account.id),{members:t}),I=e=>({number_unreads:Object(u.j)(e)}),v=(e,t)=>{const n=Object(l.m)(e),a=n&&n.unreadMessageCount;return{number_unreads:"number"==typeof t?t:a||0}},y=e=>({number_channels:Object(l.r)(e)}),x=e=>({number_channels:Object(l.s)(e)}),S=(e,t)=>{const n=Object(l.m)(e),a=n&&n.type===i.a.Subreddit;return void 0!==t?{number_pending_invites:t?Object(l.p)(e):Object(l.n)(e)}:{number_pending_invites:a?Object(l.p)(e):Object(l.n)(e)}},N=(e,t)=>({message_type:Object(u.g)(e,t)||"text"}),w=(e,t)=>{const n=Object(u.h)(e,t);return n&&{message_type:n.messageData.type}},k=(e,t,n)=>{const a=Object(d.a)(e,t);return{user_added_method:n||(a||null)}},T=e=>{let t=!1;const n=Object(d.f)(e),a=Object(l.f)(e);return n&&n.length&&a&&a.length&&(t=!!a.find(e=>o()(c()(n.sort(),e.sort())))),{existing_channel:t}},M=e=>{const t=Object(l.m)(e);return{invitation_id:t?t.channelSendbirdUrl:null}},D=(e,t)=>{if(t)return{invitation_type:t};const n=Object(l.m)(e),a=n&&h(n.type,n.isPublic);return a&&{invitation_type:a}},A=e=>{const t=Object(l.m)(e);return{invitation_timestamp:t?t.createdAt:null}},L=e=>({blocked_user_id:e||null}),U=e=>({reported_user_id:e||null}),B=e=>{const t=Object(l.m)(e),n=!(!t||t.type!==i.a.Direct),a=Object(l.u)(e),s=a&&a.length&&a[0].id;return{recipient_user_id:n?s:null}},R=(e,t)=>{const n=Object(d.b)(e,t);return{recipient_user_id:n?n.id:null}},P=e=>{const t=Object(d.k)(e);return{recipient_user_id:1===t.length?t[0]:null}},H=e=>({is_member:Object(l.O)(e)}),F=e=>{const t=Object(l.l)(e);return t&&{shown_history:!!t.lastMessage}},K=e=>({message_id:e}),G=e=>({report_reason:e})},"./src/chat/tracking/fields/common.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n("./src/config.ts"),s=n("./src/chat/constants/container.ts"),c=n("./src/chat/selectors/telemetry.ts");const r=e=>({app:{name:e.meta.isRedesign||e.container.size===s.a.FULL?a.a.telemetry.appName.chat2x:a.a.telemetry.appName.chatR2},user:Object(c.e)(e),screen:Object(c.c)(e),session:Object(c.d)(e),referrer:Object(c.b)(e),actionInfo:Object(c.a)(e)})},"./src/chat/tracking/fields/subreddit.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"b",function(){return c});var a=n("./src/chat/selectors/subreddit.ts");const s=e=>{const t=Object(a.b)(e);return t&&{id:t.id}},c=e=>{const t=Object(a.b)(e);return t&&{name:t.name}}},"./src/chat/tracking/sendEvent.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return c});var a=n("./src/telemetry/index.ts"),s=n("./src/chat/helpers/errors.ts");const c=e=>{if(e.session&&e.session.id)try{Object(a.a)(e)}catch(t){Object(s.b)(`Error sending telemetry event: ${t}`)}}},"./src/lib/convertToCamelCase/index.ts":function(e,t,n){"use strict";t.a=(e=>{const t={};for(const n in e)t[n.replace(/_\w/g,e=>e[1].toUpperCase())]=e[n];return t})},"./src/lib/linkMatchers/index.ts":function(e,t,n){"use strict";var a=n("./node_modules/linkify-it/index.js"),s=n.n(a),c=n("./node_modules/tlds/index.js"),r=n.n(c),o=n("./src/lib/linkMatchers/customLinks.ts"),i=n("./node_modules/lodash/values.js"),l=n.n(i);const d=e=>l()(o.b).includes(e.substring(1)),u=["//","ftp:","http:","https:","mailto:"],h=e=>((e,t)=>(t.forEach(t=>e.add(t,null)),e))(e,u);n.d(t,"c",function(){return m}),n.d(t,"d",function(){return p}),n.d(t,"g",function(){return g}),n.d(t,"a",function(){return f}),n.d(t,"b",function(){return C}),n.d(t,"e",function(){return E}),n.d(t,"f",function(){return _});const m=s()().tlds(r.a).set({fuzzyIP:!0}),b=s()().set({fuzzyIP:!0}).add(o.f.mention.prefix,o.f.mention.config),p=h(s()()).set({fuzzyLink:!1,fuzzyEmail:!1}).add(o.f.subreddit.prefix,o.f.subreddit.config).add(o.f.subredditFull.prefix,o.f.subreddit.config),g=h(s()()).set({fuzzyLink:!1,fuzzyEmail:!1}).add(o.f.profile.prefix,o.f.profile.config).add(o.f.profileFull.prefix,o.f.profile.config),O=s()().tlds(r.a).set({fuzzyIP:!0}).add(o.f.subreddit.prefix,o.f.subreddit.config).add(o.f.subredditFull.prefix,o.f.subreddit.config).add(o.f.profile.prefix,o.f.profile.config).add(o.f.profileFull.prefix,o.f.profile.config).add(o.f.mention.prefix,o.f.mention.config),j=m.normalize;m.normalize=(e=>{j.call(m,e),!e.schema&&e.url.startsWith("http:")&&(e.url=`https:${e.url.slice(5)}`)});const f=(e,t)=>{return(O.match(e)||[]).filter(e=>{const n=d(e.text);return!n||n&&t})},C=e=>{return[...g.match(e)||[],...b.match(e)||[]].map(e=>!d(e.text)&&e.text.replace(o.a,"")).filter(e=>e)},E=(e,t)=>{const n=e.match(t);if(n&&1===n.length&&0===n[0].index&&n[0].lastIndex===t.length)return n[0]},_=e=>{const t=m.match(e);if(t&&1===t.length&&0===t[0].index){const n=t[0];return n.lastIndex===e.length?n:((e,t)=>{const n=e.substring(t.lastIndex);if(/.*\/\/.*\/.*/.test(t.url)&&/^(\?|\!)+$/.test(n))return t.lastIndex+=n.length,t.url+=n,t})(e,n)}}},"./src/lib/timeAgo/index.ts":function(e,t,n){"use strict";n.d(t,"b",function(){return u}),n.d(t,"c",function(){return h}),n.d(t,"a",function(){return m});var a=n("./src/app/strings/index.ts"),s=n("./src/reddit/i18n/utils.ts"),c=n("./src/lib/constants/index.ts");const r={[c.db]:c.Db,[c.K]:c.db,[c.w]:c.K,[c.eb]:c.w,[c.Xb]:c.eb},o={[c.Db]:"time.seconds",[c.db]:"time.minutes",[c.K]:"time.hours",[c.w]:"time.days",[c.eb]:"time.months",[c.Xb]:"time.years"},i={[c.Db]:"time.ago.seconds",[c.db]:"time.ago.minutes",[c.K]:"time.ago.hours",[c.w]:"time.ago.days",[c.eb]:"time.ago.months",[c.Xb]:"time.ago.years"},l={[c.Db]:"time.short.seconds",[c.db]:"time.short.minutes",[c.K]:"time.short.hours",[c.w]:"time.short.days",[c.eb]:"time.short.months",[c.Xb]:"time.short.years"},d={[c.Db]:"second",[c.db]:"minute",[c.K]:"hour",[c.w]:"day",[c.eb]:"month",[c.Xb]:"year"};function u(e,t,n,s){const d=Date.now(),u="number"==typeof t?t:new Date(t).valueOf(),h=Math.abs(d-1e3*u);if(h<c.db)return Object(a.a)(e,"time.justNow");const m=n?o:i;for(const o of[c.K,c.w,c.eb,c.Xb])if(h<o){const t=Math.floor(h/r[o]);return s?`${t}${Object(a.a)(e,l[r[o]])}`:Object(a.c)(e,m[r[o]],t)}const b=Math.floor(h/c.Xb);return s?`${b}${Object(a.a)(e,l[c.Xb])}`:Object(a.c)(e,m[c.Xb],b)}function h(e){const t=Date.now(),n=Math.abs(t-1e3*e);if(n<c.db)return Object(s.c)("just now");for(const l of[c.K,c.w,c.eb,c.Xb])if(n<l){const e=Math.floor(n/r[l]),t=Object(s.b)("count",e),a=Object(s.b)("interval",d[r[l]]+(1!==e?"s":""));return Object(s.c)(`${t} ${a} ago`)}const a=Math.floor(n/c.Xb),o=Object(s.b)("count",a),i=Object(s.b)("interval",d[c.Xb]+(1!==a?"s":""));return Object(s.c)(`${o} ${i} ago`)}function m(e){const t=Date.now(),n="number"==typeof e?e:new Date(e).valueOf(),a=Math.abs(t-1e3*n);return Math.floor(a/c.w)}},"./src/reddit/layout/row/Inline/index.m.less":function(e,t,n){e.exports={inlineRow:"XZK-LTFT5CgGo9MvPQQsy"}},"./src/reddit/layout/row/Inline/index.tsx":function(e,t,n){"use strict";var a=n("./src/lib/lessComponent.tsx"),s=n("./src/reddit/layout/row/Inline/index.m.less"),c=n.n(s);t.a=a.a.div("inlineRow",c.a)}}]);
//# sourceMappingURL=Chat~RedesignChat.fb873c82659f6565a2e8.js.map