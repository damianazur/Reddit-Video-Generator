(window.webpackJsonp=window.webpackJsonp||[]).push([["GovernanceVotingBanner"],{"./src/reddit/components/Governance/VotingBanner/index.m.less":function(e,t,n){e.exports={bannerTitle:"_2RlUIqHbJhtqBPVOWc9EIl",button:"v2IDimagf9R1V7C7SahRI",container:"_1hs-SYfOXsOvtGLvgYSGq",flexRow:"_1Q5pm9fTTP3El8OlDEZLem",controls:"_-9zD1vVqEYmUMZcelQho0",content:"t61e4NmTLweNDu9wA2hM6",cta:"_1aUSA6nx3p-1LER33aE5sM",description:"_2JKRsNNJ0TUIpOpUjXAkpL",glowInner:"xB16-1ZjXRo4UiBMlYtPy",glowAnimationInner:"_3STmIEeB0QCC1Re7XiJe-_",glowOuter:"_1kAC_-k9cYMPGSTdijNoI2",glowAnimationOuter:"_3XZ0cG3H3WJKDt_a_msBqN",govIcon:"_1U_LKqjH8Y6XwWtdOJK2Ma",inner:"mRG6WomZbOvrz4BzzTv_A",postTitle:"-fXFhjjEdrS0uDz5V8nQG",redditIconContainer:"_1cp4bjnJiK5Xlg8tlgnJHc",redditIcon:"_3Etrkn9wjZNA84PFTPQ1H1"}},"./src/reddit/components/Governance/VotingBanner/index.tsx":function(e,t,n){"use strict";n.r(t);var s=n("./node_modules/react/index.js"),o=n.n(s),r=n("./node_modules/react-motion/lib/react-motion.js"),a=n("./node_modules/react-redux/es/index.js"),i=n("./node_modules/reselect/es/index.js"),c=n("./src/app/strings/index.ts"),l=n("./src/lib/constants/index.ts"),d=n("./src/lib/localStorageAvailable/index.ts"),m=n("./src/reddit/contexts/ApiContext.tsx"),b=n("./src/reddit/contexts/PageLayer/index.tsx"),p=n("./node_modules/polished/dist/polished.es.js"),u=n("./bundled-modules/styled-components/styled-components.min.js"),v=n.n(u),g=n("./src/reddit/models/Theme/NewColorSystem/index.ts"),j=n("./src/reddit/controls/Button/index.tsx");const h=Object(u.css)(["",""],e=>{const t=Object(g.c)(e).active,n=Object(g.c)(e).body,s=Object(p.g)(t,.5),o=Object(p.j)(.5,n),r=Object(p.i)(.8,n),a=Object(p.j)(.8,n);return`\n      background-color: ${n};\n      border-color: ${n};\n      color: ${t};\n      fill: ${t};\n\n      &:hover {\n        background-color: ${a};\n        border-color: ${a};\n        color: ${t};\n        fill: ${t};\n      }\n\n      &:active {\n        background-color: ${r};\n        border-color: ${r};\n        color: ${t};\n        fill: ${t};\n      }\n\n      &:disabled,\n      &[disabled],\n      &[data-disabled] {\n        background-color: ${o};\n        border-color: ${o};\n        color: ${s};\n        fill: ${s};\n        cursor: not-allowed;\n      }\n    `}),O=Object(u.css)(["",""],e=>{const t=Object(g.c)(e).body,n=Object(p.g)(t,.5),s=Object(p.i)(.8,t);return`\n      color: ${t};\n      fill: ${t};\n\n      &:hover {\n        color: ${s};\n        fill: ${s};\n      }\n\n      &:active {\n        color: ${s};\n        fill: ${s};\n      }\n\n      &:disabled,\n      &[disabled],\n      &[data-disabled] {\n        color: ${n};\n        fill: ${n};\n        cursor: not-allowed;\n      }\n    `}),w=v()(j.m).withConfig({componentId:"s1dyot6v-0"})(["","","","display: block;"],j.q,j.y,h),x=v()(j.l).withConfig({componentId:"s1dyot6v-1"})(["","","background-color: transparent;",""],j.q,j.y,O);var f=n("./src/reddit/endpoints/governance/poll.ts"),E=n("./src/reddit/featureFlags/component.tsx"),y=n("./src/reddit/helpers/overlay/index.ts"),$=n("./src/reddit/i18n/components.tsx"),I=n("./src/reddit/icons/svgs/GovSmall/index.tsx"),N=n("./src/reddit/icons/svgs/Snoo/index.tsx"),_=n("./src/reddit/selectors/gov.ts"),S=n("./src/reddit/selectors/user.ts"),k=n("./src/reddit/components/Governance/VotingBanner/index.m.less"),B=n.n(k);const T=100,C=[{key:"banner",style:{bottom:Object(r.spring)(0)}}];function D(e){return`governance-banner-${e}`}function G(e){if(!e)return!0;if(!Object(d.a)())return!0;const t=D(e.id),n=localStorage.getItem(t);if(!n)return!1;const s=new Date(n).getTime();return Date.now()-l.w<s}const P=Object(i.c)({assets:(e,t)=>{const n=Object(b.t)(e,t);if(n)return Object(_.g)(e,{subredditId:n?n.id:void 0})},language:S.Q,subreddit:b.t}),L=Object(a.b)(P,e=>({onOpenPoll:e=>{}})),A=Object(b.w)();t.default=Object(E.a)("spGovPolls",A(Object(m.b)(L(class extends o.a.Component{constructor(){super(...arguments),this.state={postTitle:"",postUrl:"",showBanner:!1},this.dismissBanner=(()=>{this.setState({showBanner:!1})}),this.saveDismissState=(()=>{Object(d.a)()&&this.props.subreddit&&localStorage.setItem(D(this.props.subreddit.id),(new Date).toISOString())}),this.willEnter=(()=>({bottom:-T})),this.willLeave=(()=>({bottom:Object(r.spring)(-T)}))}async componentDidMount(){if(G(this.props.subreddit)||!Object(d.a)())return;const e=function(e){if(e&&e.pinnedPolls){const t=Object.keys(e.pinnedPolls)[0];if(t)return e.pinnedPolls.content[t].postId}}(this.props.assets);if(e){const t=await Object(f.a)(this.props.apiContext(),e);t.ok&&this.setState({postTitle:t.body.title,postUrl:t.body.url,showBanner:!0})}}render(){if(G(this.props.subreddit)||!this.props.subreddit)return null;var e=this.props;const t=e.subreddit,n=e.language;return o.a.createElement(r.TransitionMotion,{defaultStyles:[],didLeave:this.saveDismissState,styles:this.state.showBanner?C:[],willEnter:this.willEnter,willLeave:this.willLeave},e=>o.a.createElement(s.Fragment,null,e.map(e=>o.a.createElement("div",{className:B.a.container,key:e.key,style:e.style},o.a.createElement("div",{className:B.a.inner},o.a.createElement("div",{className:B.a.content},o.a.createElement("div",{className:B.a.redditIconContainer},o.a.createElement(N.a,{className:B.a.redditIcon}),o.a.createElement("div",{className:B.a.glowInner}),o.a.createElement("div",{className:B.a.glowOuter})),o.a.createElement("div",{className:B.a.description},o.a.createElement("div",{className:B.a.cta},Object(c.a)(n,"gov.voteCta",{subredditName:t.displayText})),o.a.createElement("div",{className:B.a.postTitle},this.state.postTitle))),o.a.createElement("div",{className:B.a.controls},o.a.createElement(x,{className:B.a.button,onClick:this.dismissBanner},o.a.createElement($.c,null,"later")),o.a.createElement(w,{className:B.a.button,to:Object(y.b)(this.state.postUrl),onClick:this.dismissBanner},o.a.createElement(I.a,{className:B.a.govIcon}),o.a.createElement($.c,null,"vote"))))))))}}))))}}]);
//# sourceMappingURL=GovernanceVotingBanner.62284af0eba7f8710ee2.js.map